(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const f of o)if(f.type==="childList")for(const v of f.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&i(v)}).observe(document,{childList:!0,subtree:!0});function a(o){const f={};return o.integrity&&(f.integrity=o.integrity),o.referrerPolicy&&(f.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?f.credentials="include":o.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function i(o){if(o.ep)return;o.ep=!0;const f=a(o);fetch(o.href,f)}})();const sharedConfig={context:void 0,registry:void 0},equalFn=(n,e)=>n===e,$PROXY=Symbol("solid-proxy"),$TRACK=Symbol("solid-track"),signalOptions={equals:equalFn};let runEffects=runQueue;const STALE=1,PENDING=2,UNOWNED={owned:null,cleanups:null,context:null,owner:null};var Owner=null;let Transition=null,ExternalSourceConfig=null,Listener=null,Updates=null,Effects=null,ExecCount=0;function createRoot(n,e){const a=Listener,i=Owner,o=n.length===0,f=e===void 0?i:e,v=o?UNOWNED:{owned:null,cleanups:null,context:f?f.context:null,owner:f},d=o?n:()=>n(()=>untrack(()=>cleanNode(v)));Owner=v,Listener=null;try{return runUpdates(d,!0)}finally{Listener=a,Owner=i}}function createSignal(n,e){e=e?Object.assign({},signalOptions,e):signalOptions;const a={value:n,observers:null,observerSlots:null,comparator:e.equals||void 0},i=o=>(typeof o=="function"&&(o=o(a.value)),writeSignal(a,o));return[readSignal.bind(a),i]}function createRenderEffect(n,e,a){const i=createComputation(n,e,!1,STALE);updateComputation(i)}function createEffect(n,e,a){runEffects=runUserEffects;const i=createComputation(n,e,!1,STALE);(!a||!a.render)&&(i.user=!0),Effects?Effects.push(i):updateComputation(i)}function createMemo(n,e,a){a=a?Object.assign({},signalOptions,a):signalOptions;const i=createComputation(n,e,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=a.equals||void 0,updateComputation(i),readSignal.bind(i)}function batch(n){return runUpdates(n,!1)}function untrack(n){if(Listener===null)return n();const e=Listener;Listener=null;try{return n()}finally{Listener=e}}function on(n,e,a){const i=Array.isArray(n);let o,f=a&&a.defer;return v=>{let d;if(i){d=Array(n.length);for(let r=0;r<n.length;r++)d[r]=n[r]()}else d=n();if(f)return f=!1,v;const P=untrack(()=>e(d,o,v));return o=d,P}}function onCleanup(n){return Owner===null||(Owner.cleanups===null?Owner.cleanups=[n]:Owner.cleanups.push(n)),n}function getListener(){return Listener}function getOwner(){return Owner}function runWithOwner(n,e){const a=Owner,i=Listener;Owner=n,Listener=null;try{return runUpdates(e,!0)}catch(o){handleError(o)}finally{Owner=a,Listener=i}}function startTransition(n){const e=Listener,a=Owner;return Promise.resolve().then(()=>{Listener=e,Owner=a;let i;return runUpdates(n,!1),Listener=Owner=null,i?i.done:void 0})}function createContext(n,e){const a=Symbol("context");return{id:a,Provider:createProvider(a),defaultValue:n}}function useContext(n){return Owner&&Owner.context&&Owner.context[n.id]!==void 0?Owner.context[n.id]:n.defaultValue}function children(n){const e=createMemo(n),a=createMemo(()=>resolveChildren(e()));return a.toArray=()=>{const i=a();return Array.isArray(i)?i:i!=null?[i]:[]},a}function readSignal(){if(this.sources&&this.state)if(this.state===STALE)updateComputation(this);else{const n=Updates;Updates=null,runUpdates(()=>lookUpstream(this),!1),Updates=n}if(Listener){const n=this.observers?this.observers.length:0;Listener.sources?(Listener.sources.push(this),Listener.sourceSlots.push(n)):(Listener.sources=[this],Listener.sourceSlots=[n]),this.observers?(this.observers.push(Listener),this.observerSlots.push(Listener.sources.length-1)):(this.observers=[Listener],this.observerSlots=[Listener.sources.length-1])}return this.value}function writeSignal(n,e,a){let i=n.value;return(!n.comparator||!n.comparator(i,e))&&(n.value=e,n.observers&&n.observers.length&&runUpdates(()=>{for(let o=0;o<n.observers.length;o+=1){const f=n.observers[o],v=Transition&&Transition.running;v&&Transition.disposed.has(f),(v?!f.tState:!f.state)&&(f.pure?Updates.push(f):Effects.push(f),f.observers&&markDownstream(f)),v||(f.state=STALE)}if(Updates.length>1e6)throw Updates=[],new Error},!1)),e}function updateComputation(n){if(!n.fn)return;cleanNode(n);const e=ExecCount;runComputation(n,n.value,e)}function runComputation(n,e,a){let i;const o=Owner,f=Listener;Listener=Owner=n;try{i=n.fn(e)}catch(v){return n.pure&&(n.state=STALE,n.owned&&n.owned.forEach(cleanNode),n.owned=null),n.updatedAt=a+1,handleError(v)}finally{Listener=f,Owner=o}(!n.updatedAt||n.updatedAt<=a)&&(n.updatedAt!=null&&"observers"in n?writeSignal(n,i):n.value=i,n.updatedAt=a)}function createComputation(n,e,a,i=STALE,o){const f={fn:n,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:Owner,context:Owner?Owner.context:null,pure:a};return Owner===null||Owner!==UNOWNED&&(Owner.owned?Owner.owned.push(f):Owner.owned=[f]),f}function runTop(n){if(n.state===0)return;if(n.state===PENDING)return lookUpstream(n);if(n.suspense&&untrack(n.suspense.inFallback))return n.suspense.effects.push(n);const e=[n];for(;(n=n.owner)&&(!n.updatedAt||n.updatedAt<ExecCount);)n.state&&e.push(n);for(let a=e.length-1;a>=0;a--)if(n=e[a],n.state===STALE)updateComputation(n);else if(n.state===PENDING){const i=Updates;Updates=null,runUpdates(()=>lookUpstream(n,e[0]),!1),Updates=i}}function runUpdates(n,e){if(Updates)return n();let a=!1;e||(Updates=[]),Effects?a=!0:Effects=[],ExecCount++;try{const i=n();return completeUpdates(a),i}catch(i){a||(Effects=null),Updates=null,handleError(i)}}function completeUpdates(n){if(Updates&&(runQueue(Updates),Updates=null),n)return;const e=Effects;Effects=null,e.length&&runUpdates(()=>runEffects(e),!1)}function runQueue(n){for(let e=0;e<n.length;e++)runTop(n[e])}function runUserEffects(n){let e,a=0;for(e=0;e<n.length;e++){const i=n[e];i.user?n[a++]=i:runTop(i)}for(e=0;e<a;e++)runTop(n[e])}function lookUpstream(n,e){n.state=0;for(let a=0;a<n.sources.length;a+=1){const i=n.sources[a];if(i.sources){const o=i.state;o===STALE?i!==e&&(!i.updatedAt||i.updatedAt<ExecCount)&&runTop(i):o===PENDING&&lookUpstream(i,e)}}}function markDownstream(n){for(let e=0;e<n.observers.length;e+=1){const a=n.observers[e];a.state||(a.state=PENDING,a.pure?Updates.push(a):Effects.push(a),a.observers&&markDownstream(a))}}function cleanNode(n){let e;if(n.sources)for(;n.sources.length;){const a=n.sources.pop(),i=n.sourceSlots.pop(),o=a.observers;if(o&&o.length){const f=o.pop(),v=a.observerSlots.pop();i<o.length&&(f.sourceSlots[v]=i,o[i]=f,a.observerSlots[i]=v)}}if(n.owned){for(e=n.owned.length-1;e>=0;e--)cleanNode(n.owned[e]);n.owned=null}if(n.cleanups){for(e=n.cleanups.length-1;e>=0;e--)n.cleanups[e]();n.cleanups=null}n.state=0}function castError(n){return n instanceof Error?n:new Error(typeof n=="string"?n:"Unknown error",{cause:n})}function handleError(n,e=Owner){throw castError(n)}function resolveChildren(n){if(typeof n=="function"&&!n.length)return resolveChildren(n());if(Array.isArray(n)){const e=[];for(let a=0;a<n.length;a++){const i=resolveChildren(n[a]);Array.isArray(i)?e.push.apply(e,i):e.push(i)}return e}return n}function createProvider(n,e){return function(i){let o;return createRenderEffect(()=>o=untrack(()=>(Owner.context={...Owner.context,[n]:i.value},children(()=>i.children))),void 0),o}}const FALLBACK=Symbol("fallback");function dispose(n){for(let e=0;e<n.length;e++)n[e]()}function mapArray(n,e,a={}){let i=[],o=[],f=[],v=0,d=e.length>1?[]:null;return onCleanup(()=>dispose(f)),()=>{let P=n()||[],r,t;return P[$TRACK],untrack(()=>{let p=P.length,h,s,m,_,u,w,C,x,c;if(p===0)v!==0&&(dispose(f),f=[],i=[],o=[],v=0,d&&(d=[])),a.fallback&&(i=[FALLBACK],o[0]=createRoot(b=>(f[0]=b,a.fallback())),v=1);else if(v===0){for(o=new Array(p),t=0;t<p;t++)i[t]=P[t],o[t]=createRoot(l);v=p}else{for(m=new Array(p),_=new Array(p),d&&(u=new Array(p)),w=0,C=Math.min(v,p);w<C&&i[w]===P[w];w++);for(C=v-1,x=p-1;C>=w&&x>=w&&i[C]===P[x];C--,x--)m[x]=o[C],_[x]=f[C],d&&(u[x]=d[C]);for(h=new Map,s=new Array(x+1),t=x;t>=w;t--)c=P[t],r=h.get(c),s[t]=r===void 0?-1:r,h.set(c,t);for(r=w;r<=C;r++)c=i[r],t=h.get(c),t!==void 0&&t!==-1?(m[t]=o[r],_[t]=f[r],d&&(u[t]=d[r]),t=s[t],h.set(c,t)):f[r]();for(t=w;t<p;t++)t in m?(o[t]=m[t],f[t]=_[t],d&&(d[t]=u[t],d[t](t))):o[t]=createRoot(l);o=o.slice(0,v=p),i=P.slice(0)}return o});function l(p){if(f[t]=p,d){const[h,s]=createSignal(t);return d[t]=s,e(P[t],h)}return e(P[t])}}}function createComponent(n,e){return untrack(()=>n(e||{}))}function trueFn(){return!0}const propTraps={get(n,e,a){return e===$PROXY?a:n.get(e)},has(n,e){return e===$PROXY?!0:n.has(e)},set:trueFn,deleteProperty:trueFn,getOwnPropertyDescriptor(n,e){return{configurable:!0,enumerable:!0,get(){return n.get(e)},set:trueFn,deleteProperty:trueFn}},ownKeys(n){return n.keys()}};function resolveSource(n){return(n=typeof n=="function"?n():n)?n:{}}function resolveSources(){for(let n=0,e=this.length;n<e;++n){const a=this[n]();if(a!==void 0)return a}}function mergeProps(...n){let e=!1;for(let v=0;v<n.length;v++){const d=n[v];e=e||!!d&&$PROXY in d,n[v]=typeof d=="function"?(e=!0,createMemo(d)):d}if(e)return new Proxy({get(v){for(let d=n.length-1;d>=0;d--){const P=resolveSource(n[d])[v];if(P!==void 0)return P}},has(v){for(let d=n.length-1;d>=0;d--)if(v in resolveSource(n[d]))return!0;return!1},keys(){const v=[];for(let d=0;d<n.length;d++)v.push(...Object.keys(resolveSource(n[d])));return[...new Set(v)]}},propTraps);const a={},i=Object.create(null);for(let v=n.length-1;v>=0;v--){const d=n[v];if(!d)continue;const P=Object.getOwnPropertyNames(d);for(let r=P.length-1;r>=0;r--){const t=P[r];if(t==="__proto__"||t==="constructor")continue;const l=Object.getOwnPropertyDescriptor(d,t);if(!i[t])i[t]=l.get?{enumerable:!0,configurable:!0,get:resolveSources.bind(a[t]=[l.get.bind(d)])}:l.value!==void 0?l:void 0;else{const p=a[t];p&&(l.get?p.push(l.get.bind(d)):l.value!==void 0&&p.push(()=>l.value))}}}const o={},f=Object.keys(i);for(let v=f.length-1;v>=0;v--){const d=f[v],P=i[d];P&&P.get?Object.defineProperty(o,d,P):o[d]=P?P.value:void 0}return o}function splitProps(n,...e){if($PROXY in n){const o=new Set(e.length>1?e.flat():e[0]),f=e.map(v=>new Proxy({get(d){return v.includes(d)?n[d]:void 0},has(d){return v.includes(d)&&d in n},keys(){return v.filter(d=>d in n)}},propTraps));return f.push(new Proxy({get(v){return o.has(v)?void 0:n[v]},has(v){return o.has(v)?!1:v in n},keys(){return Object.keys(n).filter(v=>!o.has(v))}},propTraps)),f}const a={},i=e.map(()=>({}));for(const o of Object.getOwnPropertyNames(n)){const f=Object.getOwnPropertyDescriptor(n,o),v=!f.get&&!f.set&&f.enumerable&&f.writable&&f.configurable;let d=!1,P=0;for(const r of e)r.includes(o)&&(d=!0,v?i[P][o]=f.value:Object.defineProperty(i[P],o,f)),++P;d||(v?a[o]=f.value:Object.defineProperty(a,o,f))}return[...i,a]}const narrowedError=n=>`Stale read from <${n}>.`;function For(n){const e="fallback"in n&&{fallback:()=>n.fallback};return createMemo(mapArray(()=>n.each,n.children,e||void 0))}function Show(n){const e=n.keyed,a=createMemo(()=>n.when,void 0,{equals:(i,o)=>e?i===o:!i==!o});return createMemo(()=>{const i=a();if(i){const o=n.children;return typeof o=="function"&&o.length>0?untrack(()=>o(e?i:()=>{if(!untrack(a))throw narrowedError("Show");return n.when})):o}return n.fallback},void 0,void 0)}function resetErrorBoundaries(){}const booleans=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Properties=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...booleans]),ChildProperties=new Set(["innerHTML","textContent","innerText","children"]),Aliases=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),PropAliases=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function getPropAlias(n,e){const a=PropAliases[n];return typeof a=="object"?a[e]?a.$:void 0:a}const DelegatedEvents=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),SVGNamespace={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function reconcileArrays(n,e,a){let i=a.length,o=e.length,f=i,v=0,d=0,P=e[o-1].nextSibling,r=null;for(;v<o||d<f;){if(e[v]===a[d]){v++,d++;continue}for(;e[o-1]===a[f-1];)o--,f--;if(o===v){const t=f<i?d?a[d-1].nextSibling:a[f-d]:P;for(;d<f;)n.insertBefore(a[d++],t)}else if(f===d)for(;v<o;)(!r||!r.has(e[v]))&&e[v].remove(),v++;else if(e[v]===a[f-1]&&a[d]===e[o-1]){const t=e[--o].nextSibling;n.insertBefore(a[d++],e[v++].nextSibling),n.insertBefore(a[--f],t),e[o]=a[f]}else{if(!r){r=new Map;let l=d;for(;l<f;)r.set(a[l],l++)}const t=r.get(e[v]);if(t!=null)if(d<t&&t<f){let l=v,p=1,h;for(;++l<o&&l<f&&!((h=r.get(e[l]))==null||h!==t+p);)p++;if(p>t-d){const s=e[v];for(;d<t;)n.insertBefore(a[d++],s)}else n.replaceChild(a[d++],e[v++])}else v++;else e[v++].remove()}}}const $$EVENTS="_$DX_DELEGATE";function render(n,e,a,i={}){let o;return createRoot(f=>{o=f,e===document?n():insert(e,n(),e.firstChild?null:void 0,a)},i.owner),()=>{o(),e.textContent=""}}function template(n,e,a){let i;const o=()=>{const v=document.createElement("template");return v.innerHTML=n,a?v.content.firstChild.firstChild:v.content.firstChild},f=e?()=>untrack(()=>document.importNode(i||(i=o()),!0)):()=>(i||(i=o())).cloneNode(!0);return f.cloneNode=f,f}function delegateEvents(n,e=window.document){const a=e[$$EVENTS]||(e[$$EVENTS]=new Set);for(let i=0,o=n.length;i<o;i++){const f=n[i];a.has(f)||(a.add(f),e.addEventListener(f,eventHandler))}}function setAttribute(n,e,a){a==null?n.removeAttribute(e):n.setAttribute(e,a)}function setAttributeNS(n,e,a,i){i==null?n.removeAttributeNS(e,a):n.setAttributeNS(e,a,i)}function className(n,e){e==null?n.removeAttribute("class"):n.className=e}function addEventListener(n,e,a,i){if(i)Array.isArray(a)?(n[`$$${e}`]=a[0],n[`$$${e}Data`]=a[1]):n[`$$${e}`]=a;else if(Array.isArray(a)){const o=a[0];n.addEventListener(e,a[0]=f=>o.call(n,a[1],f))}else n.addEventListener(e,a)}function classList(n,e,a={}){const i=Object.keys(e||{}),o=Object.keys(a);let f,v;for(f=0,v=o.length;f<v;f++){const d=o[f];!d||d==="undefined"||e[d]||(toggleClassKey(n,d,!1),delete a[d])}for(f=0,v=i.length;f<v;f++){const d=i[f],P=!!e[d];!d||d==="undefined"||a[d]===P||!P||(toggleClassKey(n,d,!0),a[d]=P)}return a}function style(n,e,a){if(!e)return a?setAttribute(n,"style"):e;const i=n.style;if(typeof e=="string")return i.cssText=e;typeof a=="string"&&(i.cssText=a=void 0),a||(a={}),e||(e={});let o,f;for(f in a)e[f]==null&&i.removeProperty(f),delete a[f];for(f in e)o=e[f],o!==a[f]&&(i.setProperty(f,o),a[f]=o);return a}function spread(n,e={},a,i){const o={};return i||createRenderEffect(()=>o.children=insertExpression(n,e.children,o.children)),createRenderEffect(()=>typeof e.ref=="function"?use(e.ref,n):e.ref=n),createRenderEffect(()=>assign(n,e,a,!0,o,!0)),o}function use(n,e,a){return untrack(()=>n(e,a))}function insert(n,e,a,i){if(a!==void 0&&!i&&(i=[]),typeof e!="function")return insertExpression(n,e,i,a);createRenderEffect(o=>insertExpression(n,e(),o,a),i)}function assign(n,e,a,i,o={},f=!1){e||(e={});for(const v in o)if(!(v in e)){if(v==="children")continue;o[v]=assignProp(n,v,null,o[v],a,f)}for(const v in e){if(v==="children"){i||insertExpression(n,e.children);continue}const d=e[v];o[v]=assignProp(n,v,d,o[v],a,f)}}function toPropertyName(n){return n.toLowerCase().replace(/-([a-z])/g,(e,a)=>a.toUpperCase())}function toggleClassKey(n,e,a){const i=e.trim().split(/\s+/);for(let o=0,f=i.length;o<f;o++)n.classList.toggle(i[o],a)}function assignProp(n,e,a,i,o,f){let v,d,P,r,t;if(e==="style")return style(n,a,i);if(e==="classList")return classList(n,a,i);if(a===i)return i;if(e==="ref")f||a(n);else if(e.slice(0,3)==="on:"){const l=e.slice(3);i&&n.removeEventListener(l,i),a&&n.addEventListener(l,a)}else if(e.slice(0,10)==="oncapture:"){const l=e.slice(10);i&&n.removeEventListener(l,i,!0),a&&n.addEventListener(l,a,!0)}else if(e.slice(0,2)==="on"){const l=e.slice(2).toLowerCase(),p=DelegatedEvents.has(l);if(!p&&i){const h=Array.isArray(i)?i[0]:i;n.removeEventListener(l,h)}(p||a)&&(addEventListener(n,l,a,p),p&&delegateEvents([l]))}else if(e.slice(0,5)==="attr:")setAttribute(n,e.slice(5),a);else if((t=e.slice(0,5)==="prop:")||(P=ChildProperties.has(e))||!o&&((r=getPropAlias(e,n.tagName))||(d=Properties.has(e)))||(v=n.nodeName.includes("-")))t&&(e=e.slice(5),d=!0),e==="class"||e==="className"?className(n,a):v&&!d&&!P?n[toPropertyName(e)]=a:n[r||e]=a;else{const l=o&&e.indexOf(":")>-1&&SVGNamespace[e.split(":")[0]];l?setAttributeNS(n,l,e,a):setAttribute(n,Aliases[e]||e,a)}return a}function eventHandler(n){const e=`$$${n.type}`;let a=n.composedPath&&n.composedPath()[0]||n.target;for(n.target!==a&&Object.defineProperty(n,"target",{configurable:!0,value:a}),Object.defineProperty(n,"currentTarget",{configurable:!0,get(){return a||document}});a;){const i=a[e];if(i&&!a.disabled){const o=a[`${e}Data`];if(o!==void 0?i.call(a,o,n):i.call(a,n),n.cancelBubble)return}a=a._$host||a.parentNode||a.host}}function insertExpression(n,e,a,i,o){for(;typeof a=="function";)a=a();if(e===a)return a;const f=typeof e,v=i!==void 0;if(n=v&&a[0]&&a[0].parentNode||n,f==="string"||f==="number")if(f==="number"&&(e=e.toString()),v){let d=a[0];d&&d.nodeType===3?d.data!==e&&(d.data=e):d=document.createTextNode(e),a=cleanChildren(n,a,i,d)}else a!==""&&typeof a=="string"?a=n.firstChild.data=e:a=n.textContent=e;else if(e==null||f==="boolean")a=cleanChildren(n,a,i);else{if(f==="function")return createRenderEffect(()=>{let d=e();for(;typeof d=="function";)d=d();a=insertExpression(n,d,a,i)}),()=>a;if(Array.isArray(e)){const d=[],P=a&&Array.isArray(a);if(normalizeIncomingArray(d,e,a,o))return createRenderEffect(()=>a=insertExpression(n,d,a,i,!0)),()=>a;if(d.length===0){if(a=cleanChildren(n,a,i),v)return a}else P?a.length===0?appendNodes(n,d,i):reconcileArrays(n,a,d):(a&&cleanChildren(n),appendNodes(n,d));a=d}else if(e.nodeType){if(Array.isArray(a)){if(v)return a=cleanChildren(n,a,i,e);cleanChildren(n,a,null,e)}else a==null||a===""||!n.firstChild?n.appendChild(e):n.replaceChild(e,n.firstChild);a=e}}return a}function normalizeIncomingArray(n,e,a,i){let o=!1;for(let f=0,v=e.length;f<v;f++){let d=e[f],P=a&&a[n.length],r;if(!(d==null||d===!0||d===!1))if((r=typeof d)=="object"&&d.nodeType)n.push(d);else if(Array.isArray(d))o=normalizeIncomingArray(n,d,P)||o;else if(r==="function")if(i){for(;typeof d=="function";)d=d();o=normalizeIncomingArray(n,Array.isArray(d)?d:[d],Array.isArray(P)?P:[P])||o}else n.push(d),o=!0;else{const t=String(d);P&&P.nodeType===3&&P.data===t?n.push(P):n.push(document.createTextNode(t))}}return o}function appendNodes(n,e,a=null){for(let i=0,o=e.length;i<o;i++)n.insertBefore(e[i],a)}function cleanChildren(n,e,a,i){if(a===void 0)return n.textContent="";const o=i||document.createTextNode("");if(e.length){let f=!1;for(let v=e.length-1;v>=0;v--){const d=e[v];if(o!==d){const P=d.parentNode===n;!f&&!v?P?n.replaceChild(o,d):n.insertBefore(o,a):P&&d.remove()}else f=!0}}else n.insertBefore(o,a);return[o]}const isServer=!1,SVG_NAMESPACE="http://www.w3.org/2000/svg";function createElement(n,e=!1){return e?document.createElementNS(SVG_NAMESPACE,n):document.createElement(n)}function Portal(n){const{useShadow:e}=n,a=document.createTextNode(""),i=()=>n.mount||document.body,o=getOwner();let f,v=!!sharedConfig.context;return createEffect(()=>{f||(f=runWithOwner(o,()=>createMemo(()=>n.children)));const d=i();if(d instanceof HTMLHeadElement){const[P,r]=createSignal(!1),t=()=>r(!0);createRoot(l=>insert(d,()=>P()?l():f(),null)),onCleanup(t)}else{const P=createElement(n.isSVG?"g":"div",n.isSVG),r=e&&P.attachShadow?P.attachShadow({mode:"open"}):P;Object.defineProperty(P,"_$host",{get(){return a.parentNode},configurable:!0}),insert(r,f),d.appendChild(P),n.ref&&n.ref(P),onCleanup(()=>d.removeChild(P))}},void 0,{render:!v}),a}const index="";function bindEvent(n,e,a){return n.addEventListener(e,a),()=>n.removeEventListener(e,a)}function intercept([n,e],a,i){return[a?()=>a(n()):n,i?o=>e(i(o)):e]}function querySelector(n){if(n==="#")return null;try{return document.querySelector(n)}catch{return null}}function scrollToHash(n,e){const a=querySelector(`#${n}`);a?a.scrollIntoView():e&&window.scrollTo(0,0)}function createIntegration(n,e,a,i){let o=!1;const f=d=>typeof d=="string"?{value:d}:d,v=intercept(createSignal(f(n()),{equals:(d,P)=>d.value===P.value}),void 0,d=>(!o&&e(d),d));return a&&onCleanup(a((d=n())=>{o=!0,v[1](f(d)),o=!1})),{signal:v,utils:i}}function normalizeIntegration(n){if(n){if(Array.isArray(n))return{signal:n}}else return{signal:createSignal({value:""})};return n}function pathIntegration(){return createIntegration(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:n,replace:e,scroll:a,state:i})=>{e?window.history.replaceState(i,"",n):window.history.pushState(i,"",n),scrollToHash(window.location.hash.slice(1),a)},n=>bindEvent(window,"popstate",()=>n()),{go:n=>window.history.go(n)})}function createBeforeLeave(){let n=new Set;function e(o){return n.add(o),()=>n.delete(o)}let a=!1;function i(o,f){if(a)return!(a=!1);const v={to:o,options:f,defaultPrevented:!1,preventDefault:()=>v.defaultPrevented=!0};for(const d of n)d.listener({...v,from:d.location,retry:P=>{P&&(a=!0),d.navigate(o,f)}});return!v.defaultPrevented}return{subscribe:e,confirm:i}}const hasSchemeRegex=/^(?:[a-z0-9]+:)?\/\//i,trimPathRegex=/^\/+|(\/)\/+$/g;function normalizePath(n,e=!1){const a=n.replace(trimPathRegex,"$1");return a?e||/^[?#]/.test(a)?a:"/"+a:""}function resolvePath(n,e,a){if(hasSchemeRegex.test(e))return;const i=normalizePath(n),o=a&&normalizePath(a);let f="";return!o||e.startsWith("/")?f=i:o.toLowerCase().indexOf(i.toLowerCase())!==0?f=i+o:f=o,(f||"/")+normalizePath(e,!f)}function invariant(n,e){if(n==null)throw new Error(e);return n}function joinPaths(n,e){return normalizePath(n).replace(/\/*(\*.*)?$/g,"")+normalizePath(e)}function extractSearchParams(n){const e={};return n.searchParams.forEach((a,i)=>{e[i]=a}),e}function createMatcher(n,e,a){const[i,o]=n.split("/*",2),f=i.split("/").filter(Boolean),v=f.length;return d=>{const P=d.split("/").filter(Boolean),r=P.length-v;if(r<0||r>0&&o===void 0&&!e)return null;const t={path:v?"":"/",params:{}},l=p=>a===void 0?void 0:a[p];for(let p=0;p<v;p++){const h=f[p],s=P[p],m=h[0]===":",_=m?h.slice(1):h;if(m&&matchSegment(s,l(_)))t.params[_]=s;else if(m||!matchSegment(s,h))return null;t.path+=`/${s}`}if(o){const p=r?P.slice(-r).join("/"):"";if(matchSegment(p,l(o)))t.params[o]=p;else return null}return t}}function matchSegment(n,e){const a=i=>i.localeCompare(n,void 0,{sensitivity:"base"})===0;return e===void 0?!0:typeof e=="string"?a(e):typeof e=="function"?e(n):Array.isArray(e)?e.some(a):e instanceof RegExp?e.test(n):!1}function scoreRoute(n){const[e,a]=n.pattern.split("/*",2),i=e.split("/").filter(Boolean);return i.reduce((o,f)=>o+(f.startsWith(":")?2:3),i.length-(a===void 0?0:1))}function createMemoObject(n){const e=new Map,a=getOwner();return new Proxy({},{get(i,o){return e.has(o)||runWithOwner(a,()=>e.set(o,createMemo(()=>n()[o]))),e.get(o)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(n())}})}function expandOptionals(n){let e=/(\/?\:[^\/]+)\?/.exec(n);if(!e)return[n];let a=n.slice(0,e.index),i=n.slice(e.index+e[0].length);const o=[a,a+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(i);)o.push(a+=e[1]),i=i.slice(e[0].length);return expandOptionals(i).reduce((f,v)=>[...f,...o.map(d=>d+v)],[])}const MAX_REDIRECTS=100,RouterContextObj=createContext(),RouteContextObj=createContext(),useRouter=()=>invariant(useContext(RouterContextObj),"Make sure your app is wrapped in a <Router />");let TempRoute;const useRoute=()=>TempRoute||useContext(RouteContextObj)||useRouter().base,useResolvedPath=n=>{const e=useRoute();return createMemo(()=>e.resolvePath(n()))},useHref=n=>{const e=useRouter();return createMemo(()=>{const a=n();return a!==void 0?e.renderPath(a):a})},useLocation=()=>useRouter().location;function createRoutes(n,e="",a){const{component:i,data:o,children:f}=n,v=!f||Array.isArray(f)&&!f.length,d={key:n,element:i?()=>createComponent(i,{}):()=>{const{element:P}=n;return P===void 0&&a?createComponent(a,{}):P},preload:n.component?i.preload:n.preload,data:o};return asArray(n.path).reduce((P,r)=>{for(const t of expandOptionals(r)){const l=joinPaths(e,t),p=v?l:l.split("/*",1)[0];P.push({...d,originalPath:t,pattern:p,matcher:createMatcher(p,!v,n.matchFilters)})}return P},[])}function createBranch(n,e=0){return{routes:n,score:scoreRoute(n[n.length-1])*1e4-e,matcher(a){const i=[];for(let o=n.length-1;o>=0;o--){const f=n[o],v=f.matcher(a);if(!v)return null;i.unshift({...v,route:f})}return i}}}function asArray(n){return Array.isArray(n)?n:[n]}function createBranches(n,e="",a,i=[],o=[]){const f=asArray(n);for(let v=0,d=f.length;v<d;v++){const P=f[v];if(P&&typeof P=="object"&&P.hasOwnProperty("path")){const r=createRoutes(P,e,a);for(const t of r){i.push(t);const l=Array.isArray(P.children)&&P.children.length===0;if(P.children&&!l)createBranches(P.children,t.pattern,a,i,o);else{const p=createBranch([...i],o.length);o.push(p)}i.pop()}}}return i.length?o:o.sort((v,d)=>d.score-v.score)}function getRouteMatches(n,e){for(let a=0,i=n.length;a<i;a++){const o=n[a].matcher(e);if(o)return o}return[]}function createLocation(n,e){const a=new URL("http://sar"),i=createMemo(P=>{const r=n();try{return new URL(r,a)}catch{return console.error(`Invalid path ${r}`),P}},a,{equals:(P,r)=>P.href===r.href}),o=createMemo(()=>i().pathname),f=createMemo(()=>i().search,!0),v=createMemo(()=>i().hash),d=createMemo(()=>"");return{get pathname(){return o()},get search(){return f()},get hash(){return v()},get state(){return e()},get key(){return d()},query:createMemoObject(on(f,()=>extractSearchParams(i())))}}function createRouterContext(n,e="",a,i){const{signal:[o,f],utils:v={}}=normalizeIntegration(n),d=v.parsePath||(L=>L),P=v.renderPath||(L=>L),r=v.beforeLeave||createBeforeLeave(),t=resolvePath("",e),l=void 0;if(t===void 0)throw new Error(`${t} is not a valid base path`);t&&!o().value&&f({value:t,replace:!0,scroll:!1});const[p,h]=createSignal(!1),s=async L=>{h(!0);try{await startTransition(L)}finally{h(!1)}},[m,_]=createSignal(o().value),[u,w]=createSignal(o().state),C=createLocation(m,u),x=[],c={pattern:t,params:{},path:()=>t,outlet:()=>null,resolvePath(L){return resolvePath(t,L)}};if(a)try{TempRoute=c,c.data=a({data:void 0,params:{},location:C,navigate:D(c)})}finally{TempRoute=void 0}function b(L,O,j){untrack(()=>{if(typeof O=="number"){O&&(v.go?r.confirm(O,j)&&v.go(O):console.warn("Router integration does not support relative routing"));return}const{replace:q,resolve:ee,scroll:W,state:J}={replace:!1,resolve:!0,scroll:!0,...j},G=ee?L.resolvePath(O):resolvePath("",O);if(G===void 0)throw new Error(`Path '${O}' is not a routable path`);if(x.length>=MAX_REDIRECTS)throw new Error("Too many redirects");const T=m();if((G!==T||J!==u())&&!isServer){if(r.confirm(G,j)){const E=x.push({value:T,replace:q,scroll:W,state:u()});s(()=>{_(G),w(J)}).then(()=>{x.length===E&&B({value:G,state:J})})}}})}function D(L){return L=L||useContext(RouteContextObj)||c,(O,j)=>b(L,O,j)}function B(L){const O=x[0];O&&((L.value!==O.value||L.state!==O.state)&&f({...L,replace:O.replace,scroll:O.scroll}),x.length=0)}createRenderEffect(()=>{const{value:L,state:O}=o();untrack(()=>{L!==m()&&s(()=>{_(L),w(O)})})});{let L=function(O){if(O.defaultPrevented||O.button!==0||O.metaKey||O.altKey||O.ctrlKey||O.shiftKey)return;const j=O.composedPath().find(T=>T instanceof Node&&T.nodeName.toUpperCase()==="A");if(!j||!j.hasAttribute("link"))return;const q=j.href;if(j.target||!q&&!j.hasAttribute("state"))return;const ee=(j.getAttribute("rel")||"").split(/\s+/);if(j.hasAttribute("download")||ee&&ee.includes("external"))return;const W=new URL(q);if(W.origin!==window.location.origin||t&&W.pathname&&!W.pathname.toLowerCase().startsWith(t.toLowerCase()))return;const J=d(W.pathname+W.search+W.hash),G=j.getAttribute("state");O.preventDefault(),b(c,J,{resolve:!1,replace:j.hasAttribute("replace"),scroll:!j.hasAttribute("noscroll"),state:G&&JSON.parse(G)})};delegateEvents(["click"]),document.addEventListener("click",L),onCleanup(()=>document.removeEventListener("click",L))}return{base:c,out:l,location:C,isRouting:p,renderPath:P,parsePath:d,navigatorFactory:D,beforeLeave:r}}function createRouteContext(n,e,a,i,o){const{base:f,location:v,navigatorFactory:d}=n,{pattern:P,element:r,preload:t,data:l}=i().route,p=createMemo(()=>i().path);t&&t();const h={parent:e,pattern:P,get child(){return a()},path:p,params:o,data:e.data,outlet:r,resolvePath(s){return resolvePath(f.path(),s,p())}};if(l)try{TempRoute=h,h.data=l({data:e.data,params:o,location:v,navigate:d(h)})}finally{TempRoute=void 0}return h}var _tmpl$$h=template("<a link>");const Router=n=>{const{source:e,url:a,base:i,data:o,out:f}=n,v=e||pathIntegration(),d=createRouterContext(v,i,o);return createComponent(RouterContextObj.Provider,{value:d,get children(){return n.children}})},Routes=n=>{const e=useRouter(),a=useRoute(),i=children(()=>n.children),o=createMemo(()=>createBranches(i(),joinPaths(a.pattern,n.base||""),Outlet)),f=createMemo(()=>getRouteMatches(o(),e.location.pathname)),v=createMemoObject(()=>{const t=f(),l={};for(let p=0;p<t.length;p++)Object.assign(l,t[p].params);return l});e.out&&e.out.matches.push(f().map(({route:t,path:l,params:p})=>({originalPath:t.originalPath,pattern:t.pattern,path:l,params:p})));const d=[];let P;const r=createMemo(on(f,(t,l,p)=>{let h=l&&t.length===l.length;const s=[];for(let m=0,_=t.length;m<_;m++){const u=l&&l[m],w=t[m];p&&u&&w.route.key===u.route.key?s[m]=p[m]:(h=!1,d[m]&&d[m](),createRoot(C=>{d[m]=C,s[m]=createRouteContext(e,s[m-1]||a,()=>r()[m+1],()=>f()[m],v)}))}return d.splice(t.length).forEach(m=>m()),p&&h?p:(P=s[0],s)}));return createComponent(Show,{get when(){return r()&&P},keyed:!0,children:t=>createComponent(RouteContextObj.Provider,{value:t,get children(){return t.outlet()}})})},Route=n=>{const e=children(()=>n.children);return mergeProps(n,{get children(){return e()}})},Outlet=()=>{const n=useRoute();return createComponent(Show,{get when(){return n.child},keyed:!0,children:e=>createComponent(RouteContextObj.Provider,{value:e,get children(){return e.outlet()}})})};function A(n){n=mergeProps({inactiveClass:"inactive",activeClass:"active"},n);const[,e]=splitProps(n,["href","state","class","activeClass","inactiveClass","end"]),a=useResolvedPath(()=>n.href),i=useHref(a),o=useLocation(),f=createMemo(()=>{const v=a();if(v===void 0)return!1;const d=normalizePath(v.split(/[?#]/,1)[0]).toLowerCase(),P=normalizePath(o.pathname).toLowerCase();return n.end?d===P:P.startsWith(d)});return(()=>{var v=_tmpl$$h();return spread(v,mergeProps(e,{get href(){return i()||n.href},get state(){return JSON.stringify(n.state)},get classList(){return{...n.class&&{[n.class]:!0},[n.inactiveClass]:!f(),[n.activeClass]:f(),...e.classList}},get"aria-current"(){return f()?"page":void 0}}),!1,!1),v})()}var _tmpl$$g=template('<svg xmlns=http://www.w3.org/2000/svg width=18 height=18 version=1.2 viewBox="0 0 1458 1516"><path fill-rule=evenodd d="M.1 1466.6H1457v49.4H.1zm933.4-802.4c44.5 37.1 177.8 71.6 177.8 204.9-1 14.1-3.2 28-6.5 41.7-3.2 13.7-7.6 27.1-13.1 40.1-5.4 13-11.9 25.5-19.4 37.5-7.5 11.9-15.9 23.2-25.2 33.8l39.5 138.2c5 9.9 5 14.9-4.9 24.7l-148.2 163-14.8 69.1H795.2c.6-11.2 2.6-22.3 6-33.1 3.4-10.7 8.2-20.9 14.2-30.4s13.3-18.1 21.5-25.8c8.3-7.6 17.5-14.1 27.5-19.3l103.7-133.3-177.8-182.7q-5-13.8-9.4-27.9-4.4-14-8.1-28.2t-6.7-28.6q-3.1-14.4-5.4-28.9-28.3-16.6-55.8-34.5-27.4-17.9-54-37.1-26.6-19.1-52.3-39.5-25.6-20.4-50.3-42-11.3-13.8-21.9-28.1-10.6-14.4-20.4-29.2-9.9-14.9-19.1-30.1-9.2-15.3-17.6-31.1L321.1 503.8l-54.3 39.5v88.8q1.9 7.9 4.5 15.5 2.5 7.7 5.6 15.1t6.8 14.6q3.6 7.2 7.8 14.1l-54.3 83.9c-6-8.1-11.3-16.8-15.8-25.8s-8.2-18.4-11.1-28c-3-9.7-5.1-19.6-6.4-29.6s-1.7-20.1-1.3-30.1v-34.6l4.9-103.7q.1-2.9.8-5.6.7-2.8 1.9-5.4 1.3-2.5 3.1-4.8 1.8-2.2 4.1-3.9l88.9-93.9c4.9-4.9 9.9-4.9 19.8-4.9l118.5 39.5 98.8-69.1 83.9-123.5q-16.8 2.2-33.6 4.9-16.7 2.6-33.4 5.7t-33.3 6.6q-16.5 3.6-33 7.5-4.7-1.7-9.2-3.8-4.6-2.2-8.9-4.6-4.4-2.5-8.5-5.4-4.1-2.8-8-5.9-1.7-7.3-2.9-14.7-1.1-7.3-1.7-14.8-.7-7.4-.7-14.9-.1-7.4.4-14.9C518.7 148.3 592.7 98.9 657 59.4l-5-54.3c0-5 5-5 9.9-5 19.7 0 64.2 49.4 74.1 64.2q9.7 12.2 18.8 24.9 9.2 12.6 17.9 25.5 8.6 13 16.7 26.3 8.2 13.4 15.7 27c2.8 24.6 4.1 49.4 3.8 74.1-.2 24.8-2 49.5-5.4 74-3.3 24.6-8.1 48.9-14.5 72.8-6.3 23.9-14.1 47.5-23.4 70.4q19.4 27.2 39.6 53.7 20.2 26.6 41.2 52.6 21 25.9 42.8 51.2t44.3 49.9zM264.3 400c17.3-4.9 17.3 0 12.4 5l-79 83.9-24.7 9.9q-6.1 5.1-11.8 10.4-5.8 5.3-11.4 10.9-5.6 5.5-10.9 11.3t-10.4 11.8l-98.8-24.7c0-14.8 24.7-39.5 49.4-54.3q9-4.8 18.2-9.4 9.1-4.6 18.4-8.9 9.2-4.4 18.6-8.4 9.4-4.1 18.9-7.8S261.9 400 266.8 400zM731 1239.4l138.3-133.3 54.3 54.3-148.2 123.5c-9.8 14.8-19.7 39.5-29.6 54.3H637.2c4.3-10.8 9.6-21.2 15.9-31s13.5-19 21.5-27.4c8-8.5 16.8-16.1 26.3-22.9 9.4-6.8 19.5-12.6 30.1-17.5m424.7-355.5q-3.4-12-7.2-23.9-3.9-11.9-8.2-23.7-4.4-11.7-9.1-23.3-4.8-11.5-10-22.9c-3.5-7.6 4.9-4.9 19.7 0s88.9 59.3 88.9 59.3c39.5 54.3 64.2 291.3 64.2 375.2q-16.2-6.8-31.8-14.8-15.6-8.1-30.5-17.4t-28.9-19.8q-14.1-10.5-27.3-22.1z"style=fill:#000>');const ContiLogo=(n={})=>(()=>{var e=_tmpl$$g();return spread(e,n,!0,!0),e})();var _tmpl$$f=template('<svg xmlns=http://www.w3.org/2000/svg width=20 height=20 baseProfile=tiny-ps version=1.2 viewBox="0 0 1649 1740"><path d="m.25 1228 962.43-358.17L.25 501.43V0l1648.42 665.17v409.33L.25 1739.66z"style=fill:#a100ff>');const AccentureLogo=(n={})=>(()=>{var e=_tmpl$$f();return spread(e,n,!0,!0),e})();var _tmpl$$e=template(`<div id=experience-container class="space-y-8 relative ml-[5rem] before: animate-[expand] before:absolute before:inset-0 before:ml-4 before:-translate-x-px md:before:ml-[8.5rem] md:before:translate-x-0 before:h-full before:w-0.5 before:bg-gradient-to-b before:from-blue-500 before:via-blue-300 before:to-transparent"><div class="max-w-[40rem] mr-4 mb-8"><div class="relative "><div class="md:flex items-center md:space-x-4 mb-1"><div class="flex items-center space-x-4 md:space-x-2 md:space-x-reverse"><div class="flex animate-expand items-center justify-center w-8 h-8 rounded-full bg-yellow-500 md:order-1"></div><time class="text-center font-medium text-blue-400 md:w-28">Oct 1, 2018</time></div><div class=text-xl><h1>Embedded System Developer</h1></div></div><div class="text-justify p-1 text-white ml-14 md:ml-44 ">I was part of a team of 12, responsible for ECU software implementation and developing web applications to support management's daily work.<br></div></div><div class=relative><div class="md:flex items-center md:space-x-4 mb-1"><div class="flex items-center space-x-4 md:space-x-2 md:space-x-reverse"><div class="flex animate-expand items-center justify-center w-8 h-8 rounded-full bg-white md:order-1"></div><time class="text-center font-medium text-blue-400 md:w-28">Jun 1, 2021</time></div><div class=text-xl><h1>Medior Frontend developer</h1></div></div><div class="text-justify p-1 text-white ml-14 md:ml-44 ">Since I enjoyed web development more, I felt it was better to focus on that, though embedded systems development remained a hobby :)<br>Here, I've been working for 2 contractors on different projects.</div></div><div class=" relative"><div class="md:flex items-center md:space-x-4 mb-1"><div class="flex items-center space-x-4 md:space-x-2 md:space-x-reverse"><div class="flex animate-expand items-center justify-center ml-1.5 w-5 h-5 rounded-full bg-white md:order-1"></div><time class="text-center font-medium text-blue-400 md:w-28">Jun 1, 2023</time></div><div class=text-xl><h1>Senior Frontend developer</h1></div></div><div class=" text-justify p-1 text-white ml-14 md:ml-44 ">I was working for a British telecommunications company. I was responsible for collaborating with cross-functional teams, including designers, BE developers and project managers to create high-quality web applications.<br>Stack: React, Java Spring</div></div><div class=relative><div class="md:flex items-center md:space-x-4 mb-1"><div class="flex items-center space-x-4 md:space-x-2 md:space-x-reverse"><div class="flex animate-expand items-center justify-center ml-1.5 w-5 h-5 rounded-full bg-white md:order-1"></div><time class="text-center font-medium text-blue-400 md:w-28">Oct 1, 2023</time></div><div class=text-xl><h1>Full-stack developer</h1></div></div><div class=" text-justify p-1 text-white ml-14 md:ml-44 ">I've been working for a German automotive company. Since I've always been drawn to full-stack development and had experience because of hobby projects, the new project presented a great opportunity for me to transition into this role. <br> Currently, my team is dedicated to developing applications for financial departments.<br>Stack: Angular, Nodejs, PostgreSQL`);function Experience(){return(()=>{var n=_tmpl$$e(),e=n.firstChild,a=e.firstChild,i=a.firstChild,o=i.firstChild,f=o.firstChild,v=i.nextSibling,d=v.firstChild;d.nextSibling;var P=a.nextSibling,r=P.firstChild,t=r.firstChild,l=t.firstChild;return insert(f,createComponent(ContiLogo,{})),insert(v,createComponent(A,{class:"text-yellow-400 ",href:"/projects",children:"See more in the projects section."}),null),insert(l,createComponent(AccentureLogo,{})),n})()}var _tmpl$$d=template('<div class="flex justify-center mx-auto items-center "><div class=text-white><div class=" mt-24 flex flex-col items-center justify-center text-center"><div class="text inline-block"><div class="text-4xl font-bold typed-out">Hi, my name is GÃ©za.</div></div><div></div></div><div class="mt-36 pb-12 px-8">'),_tmpl$2$2=template("<div class=text><p>I'm a full-stack web developer.");const Introduction=()=>{const[n,e]=createSignal(!1);return setTimeout(()=>{e(!0)},1200),(()=>{var a=_tmpl$$d(),i=a.firstChild,o=i.firstChild,f=o.firstChild;return f.nextSibling,insert(o,(()=>{var v=_tmpl$2$2(),d=v.firstChild;return createRenderEffect(()=>className(d,`  text-lg mt-2  ${n()?"typed-out":"hidden"} `)),v})(),null),a})()},AccentureSecureImage=""+new URL("images-9e7cb11f.jpeg",import.meta.url).href;var _tmpl$$c=template('<svg xmlns=http://www.w3.org/2000/svg width=40 height=40 viewBox="-11.5 -10.232 23 20.463"><circle r=2.05 fill=#61dafb></circle><g fill=none stroke=#61dafb><ellipse rx=11 ry=4.2></ellipse><ellipse rx=11 ry=4.2 transform=rotate(60)></ellipse><ellipse rx=11 ry=4.2 transform=rotate(120)>');const ReactLogo=(n={})=>(()=>{var e=_tmpl$$c();return spread(e,n,!0,!0),e})();var _tmpl$$b=template('<svg xmlns=http://www.w3.org/2000/svg width=60 height=40 version=1.2 viewBox="0 0 442.37 270.929"><defs><linearGradient id=b x1=-.348 x2=1.251 gradientTransform="rotate(116.114 53.1 202.97)scale(86.48)"gradientUnits=userSpaceOnUse><stop offset=.3 stop-color=#3E863D></stop><stop offset=.5 stop-color=#55934F></stop><stop offset=.8 stop-color=#5AAD45></stop></linearGradient><linearGradient id=d x1=-.456 x2=.582 gradientTransform="rotate(-36.46 550.846 -214.337)scale(132.798)"gradientUnits=userSpaceOnUse><stop offset=.57 stop-color=#3E863D></stop><stop offset=.72 stop-color=#619857></stop><stop offset=1 stop-color=#76AC64></stop></linearGradient><linearGradient id=f x1=.043 x2=.984 gradientTransform="translate(192.862 279.652)scale(97.417)"gradientUnits=userSpaceOnUse><stop offset=.16 stop-color=#6BBF47></stop><stop offset=.38 stop-color=#79B461></stop><stop offset=.47 stop-color=#75AC64></stop><stop offset=.7 stop-color=#659E5A></stop><stop offset=.9 stop-color=#3E863D></stop></linearGradient><clipPath id=a><path d="m239.03 226.605-42.13 24.317a5.09 5.09 0 0 0-2.546 4.406v48.668c0 1.817.968 3.496 2.546 4.406l42.133 24.336a5.1 5.1 0 0 0 5.09 0l42.126-24.336a5.1 5.1 0 0 0 2.54-4.406v-48.668c0-1.816-.97-3.496-2.55-4.406l-42.12-24.317a5.12 5.12 0 0 0-5.1 0"></path></clipPath><clipPath id=c><path d="M195.398 307.086c.403.523.907.976 1.5 1.316l36.14 20.875 6.02 3.46c.9.52 1.926.74 2.934.665q.506-.042 1-.183l44.434-81.36c-.34-.37-.738-.68-1.184-.94l-27.586-15.93-14.582-8.39a5.3 5.3 0 0 0-1.32-.53zm0 0"></path></clipPath><clipPath id=e><path d="M241.066 225.953a5.1 5.1 0 0 0-2.035.652l-42.01 24.247 45.3 82.51c.63-.09 1.25-.3 1.81-.624l42.13-24.336a5.1 5.1 0 0 0 2.46-3.476l-46.18-78.89a5.3 5.3 0 0 0-1.03-.102q-.21 0-.42.02"></path></clipPath></defs><path fill=#689f63 d="M218.647 270.93c-1.46 0-2.91-.383-4.19-1.12l-13.337-7.896c-1.992-1.114-1.02-1.508-.363-1.735 2.656-.93 3.195-1.14 6.03-2.75.298-.17.688-.11.993.07l10.246 6.08c.37.2.895.2 1.238 0l39.95-23.06c.37-.21.61-.64.61-1.08v-46.1c0-.46-.24-.87-.618-1.1l-39.934-23.04c-.37-.22-.86-.22-1.23 0l-39.926 23.04c-.387.22-.633.65-.633 1.09v46.1c0 .44.24.86.62 1.07l10.94 6.32c5.94 2.97 9.57-.53 9.57-4.05v-45.5c0-.65.51-1.15 1.16-1.15h5.06c.63 0 1.15.5 1.15 1.15v45.52c0 7.92-4.32 12.47-11.83 12.47-2.31 0-4.13 0-9.21-2.5l-10.48-6.04a8.45 8.45 0 0 1-4.19-7.29v-46.1c0-3 1.6-5.8 4.19-7.28l39.99-23.07c2.53-1.43 5.89-1.43 8.4 0l39.94 23.08a8.43 8.43 0 0 1 4.19 7.28v46.1c0 2.99-1.61 5.78-4.19 7.28l-39.94 23.07a8.4 8.4 0 0 1-4.21 1.12"></path><path fill=#689f63 d="M230.987 239.164c-17.48 0-21.145-8.024-21.145-14.754 0-.64.516-1.15 1.157-1.15h5.16c.57 0 1.05.415 1.14.978.78 5.258 3.1 7.91 13.67 7.91 8.42 0 12-1.902 12-6.367 0-2.57-1.02-4.48-14.1-5.76-10.94-1.08-17.7-3.49-17.7-12.24 0-8.06 6.8-12.86 18.19-12.86 12.79 0 19.13 4.44 19.93 13.98a1.164 1.164 0 0 1-1.16 1.26h-5.19c-.54 0-1.01-.38-1.12-.9-1.25-5.53-4.27-7.3-12.48-7.3-9.19 0-10.26 3.2-10.26 5.6 0 2.91 1.26 3.76 13.66 5.4 12.28 1.63 18.11 3.93 18.11 12.56 0 8.7-7.26 13.69-19.92 13.69m48.66-48.89h1.34c1.1 0 1.31-.77 1.31-1.22 0-1.18-.81-1.18-1.26-1.18h-1.38zm-1.63-3.78h2.97c1.02 0 3.02 0 3.02 2.28 0 1.59-1.02 1.92-1.63 2.12 1.19.08 1.27.86 1.43 1.96.08.69.21 1.88.45 2.28h-1.83c-.05-.4-.33-2.6-.33-2.72-.12-.49-.29-.73-.9-.73h-1.51v3.46h-1.67zm-3.57 4.3c0 3.58 2.89 6.48 6.44 6.48 3.58 0 6.47-2.96 6.47-6.48 0-3.59-2.93-6.44-6.48-6.44-3.5 0-6.44 2.81-6.44 6.43m14.16.03c0 4.24-3.47 7.7-7.7 7.7-4.2 0-7.7-3.42-7.7-7.7 0-4.36 3.58-7.7 7.7-7.7 4.15 0 7.69 3.35 7.69 7.7"></path><path fill=#333 fill-rule=evenodd d="M94.936 90.55c0-1.84-.97-3.53-2.558-4.445l-42.356-24.37a4.95 4.95 0 0 0-2.328-.67h-.438c-.812.03-1.613.25-2.34.67L2.562 86.105A5.15 5.15 0 0 0 0 90.555l.093 65.64c0 .91.47 1.76 1.27 2.21.78.48 1.76.48 2.54 0l25.18-14.42c1.59-.946 2.56-2.618 2.56-4.44V108.88a5.1 5.1 0 0 1 2.555-4.43l10.72-6.174a5.1 5.1 0 0 1 2.56-.688c.876 0 1.77.226 2.544.687l10.715 6.172c1.586.91 2.56 2.6 2.56 4.43v30.663c0 1.82.983 3.5 2.565 4.44l25.164 14.41a2.5 2.5 0 0 0 2.56 0 2.57 2.57 0 0 0 1.268-2.21zm199.868 34.176c0 .457-.243.88-.64 1.106l-14.548 8.386a1.28 1.28 0 0 1-1.277 0l-14.55-8.386c-.4-.227-.64-.65-.64-1.106V107.93c0-.458.24-.88.63-1.11l14.54-8.4c.4-.23.89-.23 1.29 0l14.55 8.4c.4.23.64.652.64 1.11zM298.734.324a2.57 2.57 0 0 0-2.544.027c-.78.46-1.262 1.3-1.262 2.21v65a1.788 1.788 0 0 1-2.684 1.55L281.634 63a5.11 5.11 0 0 0-5.112 0l-42.37 24.453a5.1 5.1 0 0 0-2.56 4.42v48.92c0 1.83.977 3.51 2.56 4.43l42.37 24.47c1.582.91 3.53.91 5.117 0l42.37-24.48c1.58-.92 2.56-2.6 2.56-4.43V18.863a5.13 5.13 0 0 0-2.63-4.47zm141.093 107.164a5.12 5.12 0 0 0 2.543-4.422V91.21c0-1.824-.97-3.507-2.547-4.425l-42.1-24.44a5.11 5.11 0 0 0-5.13 0l-42.36 24.45c-1.59.92-2.56 2.6-2.56 4.43v48.9c0 1.84.99 3.54 2.58 4.45l42.09 23.99c1.55.89 3.45.9 5.02.03l25.46-14.15c.8-.45 1.31-1.3 1.31-2.22s-.49-1.78-1.29-2.23l-42.62-24.46c-.8-.45-1.29-1.3-1.29-2.21v-15.34c0-.916.48-1.76 1.28-2.216l13.26-7.65c.79-.46 1.76-.46 2.55 0l13.27 7.65c.79.45 1.28 1.3 1.28 2.21v12.06c0 .91.49 1.76 1.28 2.22.79.45 1.77.45 2.56-.01zm0 0"></path><path fill=#689f63 fill-rule=evenodd d="M394.538 105.2a.97.97 0 0 1 .98 0l8.13 4.69c.304.176.49.5.49.85v9.39c0 .35-.186.674-.49.85l-8.13 4.69a.97.97 0 0 1-.98 0l-8.125-4.69a.98.98 0 0 1-.5-.85v-9.39c0-.35.18-.674.49-.85zm0 0"></path><g clip-path=url(#a) transform="translate(-78.306 -164.016)"><path fill=url(#b) d="m331.363 246.793-118.715-58.19-60.87 124.174L270.49 370.97zm0 0"></path></g><g clip-path=url(#c) transform="translate(-78.306 -164.016)"><path fill=url(#d) d="m144.07 264.004 83.825 113.453 110.86-81.906-83.83-113.45zm0 0"></path></g><g clip-path=url(#e) transform="translate(-78.306 -164.016)"><path fill=url(#f) d="M197.02 225.934v107.43h91.683v-107.43zm0 0">');const NodejsLogo=(n={})=>(()=>{var e=_tmpl$$b();return spread(e,n,!0,!0),e})();var _tmpl$$a=template('<svg xmlns=http://www.w3.org/2000/svg xml:space=preserve width=50 height=40 viewBox="0 0 250 250"><path d="M125 30 31.9 63.2l14.2 123.1L125 230l78.9-43.7 14.2-123.1z"style=fill:#dd0031></path><path d="M125 30v22.2-.1V230l78.9-43.7 14.2-123.1z"style=fill:#c3002f></path><path d="M125 52.1 66.8 182.6h21.7l11.7-29.2h49.4l11.7 29.2H183zm17 83.3h-34l17-40.9z"style=fill:#fff>');const AngularLogo=(n={})=>(()=>{var e=_tmpl$$a();return spread(e,n,!0,!0),e})();var _tmpl$$9=template('<svg xmlns=http://www.w3.org/2000/svg width=40 height=40 viewBox="0 -28.5 256 256"><path fill=#0089D6 fill-rule=nonzero d="M118.432 187.698c32.89-5.81 60.055-10.618 60.367-10.684l.568-.12-31.052-36.935c-17.078-20.314-31.051-37.014-31.051-37.11 0-.182 32.063-88.477 32.243-88.792.06-.105 21.88 37.567 52.893 91.32 29.035 50.323 52.973 91.815 53.195 92.203l.405.707-98.684-.012-98.684-.013zM0 176.435c0-.052 14.631-25.451 32.514-56.442l32.514-56.347 37.891-31.799C123.76 14.358 140.867.027 140.935.001c.069-.026-.205.664-.609 1.534s-18.919 40.582-41.145 88.25l-40.41 86.67-29.386.037c-16.162.02-29.385-.005-29.385-.057">');const AzureLogo=(n={})=>(()=>{var e=_tmpl$$9();return spread(e,n,!0,!0),e})();var _tmpl$$8=template('<svg xmlns=http://www.w3.org/2000/svg xml:space=preserve id=Layer_1 width=40 height=40 x=0 y=0 version=1.1 viewBox="0 0 304 182"><style>.st1{fill-rule:evenodd;clip-rule:evenodd;fill:#f90}</style><path d="M86.4 66.4c0 3.7.4 6.7 1.1 8.9.8 2.2 1.8 4.6 3.2 7.2.5.8.7 1.6.7 2.3 0 1-.6 2-1.9 3L83.2 92c-.9.6-1.8.9-2.6.9-1 0-2-.5-3-1.4-1.4-1.5-2.6-3.1-3.6-4.7-1-1.7-2-3.6-3.1-5.9Q59.2 94.7 41.5 94.7c-8.4 0-15.1-2.4-20-7.2s-7.4-11.2-7.4-19.2c0-8.5 3-15.4 9.1-20.6s14.2-7.8 24.5-7.8c3.4 0 6.9.3 10.6.8s7.5 1.3 11.5 2.2v-7.3c0-7.6-1.6-12.9-4.7-16-3.2-3.1-8.6-4.6-16.3-4.6-3.5 0-7.1.4-10.8 1.3s-7.3 2-10.8 3.4c-1.6.7-2.8 1.1-3.5 1.3s-1.2.3-1.6.3c-1.4 0-2.1-1-2.1-3.1v-4.9c0-1.6.2-2.8.7-3.5s1.4-1.4 2.8-2.1Q28.75 5 36.1 3.2C41 1.9 46.2 1.3 51.7 1.3c11.9 0 20.6 2.7 26.2 8.1 5.5 5.4 8.3 13.6 8.3 24.6v32.4zM45.8 81.6c3.3 0 6.7-.6 10.3-1.8s6.8-3.4 9.5-6.4c1.6-1.9 2.8-4 3.4-6.4s1-5.3 1-8.7v-4.2c-2.9-.7-6-1.3-9.2-1.7s-6.3-.6-9.4-.6c-6.7 0-11.6 1.3-14.9 4s-4.9 6.5-4.9 11.5c0 4.7 1.2 8.2 3.7 10.6 2.4 2.5 5.9 3.7 10.5 3.7m80.3 10.8c-1.8 0-3-.3-3.8-1-.8-.6-1.5-2-2.1-3.9L96.7 10.2c-.6-2-.9-3.3-.9-4 0-1.6.8-2.5 2.4-2.5h9.8c1.9 0 3.2.3 3.9 1 .8.6 1.4 2 2 3.9l16.8 66.2 15.6-66.2c.5-2 1.1-3.3 1.9-3.9s2.2-1 4-1h8c1.9 0 3.2.3 4 1 .8.6 1.5 2 1.9 3.9l15.8 67 17.3-67c.6-2 1.3-3.3 2-3.9.8-.6 2.1-1 3.9-1h9.3c1.6 0 2.5.8 2.5 2.5 0 .5-.1 1-.2 1.6s-.3 1.4-.7 2.5l-24.1 77.3q-.9 3-2.1 3.9c-.8.6-2.1 1-3.8 1h-8.6c-1.9 0-3.2-.3-4-1s-1.5-2-1.9-4L156 23l-15.4 64.4c-.5 2-1.1 3.3-1.9 4s-2.2 1-4 1zm128.5 2.7c-5.2 0-10.4-.6-15.4-1.8s-8.9-2.5-11.5-4c-1.6-.9-2.7-1.9-3.1-2.8s-.6-1.9-.6-2.8v-5.1c0-2.1.8-3.1 2.3-3.1q.9 0 1.8.3c.6.2 1.5.6 2.5 1 3.4 1.5 7.1 2.7 11 3.5 4 .8 7.9 1.2 11.9 1.2 6.3 0 11.2-1.1 14.6-3.3s5.2-5.4 5.2-9.5c0-2.8-.9-5.1-2.7-7s-5.2-3.6-10.1-5.2L246 52c-7.3-2.3-12.7-5.7-16-10.2-3.3-4.4-5-9.3-5-14.5q0-6.3 2.7-11.1c1.8-3.2 4.2-6 7.2-8.2 3-2.3 6.4-4 10.4-5.2s8.2-1.7 12.6-1.7c2.2 0 4.5.1 6.7.4 2.3.3 4.4.7 6.5 1.1 2 .5 3.9 1 5.7 1.6q2.7.9 4.2 1.8c1.4.8 2.4 1.6 3 2.5q.9 1.2.9 3.3v4.7c0 2.1-.8 3.2-2.3 3.2-.8 0-2.1-.4-3.8-1.2q-8.55-3.9-19.2-3.9c-5.7 0-10.2.9-13.3 2.8s-4.7 4.8-4.7 8.9c0 2.8 1 5.2 3 7.1s5.7 3.8 11 5.5l14.2 4.5c7.2 2.3 12.4 5.5 15.5 9.6s4.6 8.8 4.6 14c0 4.3-.9 8.2-2.6 11.6-1.8 3.4-4.2 6.4-7.3 8.8-3.1 2.5-6.8 4.3-11.1 5.6-4.5 1.4-9.2 2.1-14.3 2.1"style=fill:#f90></path><path d="M273.5 143.7c-32.9 24.3-80.7 37.2-121.8 37.2-57.6 0-109.5-21.3-148.7-56.7-3.1-2.8-.3-6.6 3.4-4.4 42.4 24.6 94.7 39.5 148.8 39.5 36.5 0 76.6-7.6 113.5-23.2 5.5-2.5 10.2 3.6 4.8 7.6"class=st1></path><path d="M287.2 128.1c-4.2-5.4-27.8-2.6-38.5-1.3-3.2.4-3.7-2.4-.8-4.5 18.8-13.2 49.7-9.4 53.3-5 3.6 4.5-1 35.4-18.6 50.2-2.7 2.3-5.3 1.1-4.1-1.9 4-9.9 12.9-32.2 8.7-37.5"class=st1>');const AwsLogo=(n={})=>(()=>{var e=_tmpl$$8();return spread(e,n,!0,!0),e})();var _tmpl$$7=template('<div><div class="bg-gray-50 mx-auto bg-opacity-50 w-[15rem] h-[15rem] overflow-visible"><img alt="Project Image"class="w-full h-52 "><div class="p-1 bg-black shadow-lg bg-opacity-25 backdrop-filter "><span class="text-white ">'),_tmpl$2$1=template('<div class="flex flex-col w-[18rem] min-h-[18rem] absolute z-50 ml-[-1.5rem] mt-[-1.5rem] group project-details bg-black rounded-2xl shadow-lg bg-opacity-70 backdrop-filter backdrop-blur-lg"><div class="flex justify-center align-middle ml-auto mr-auto mb-6"><h1 class="text-xl pt-4"></h1></div><div class="flex-1 flex-grow self-end mt-auto ml-4 mr-4"><span></span></div><div class="flex justify-center align-middle mt-auto">');const iconMapper={react:ReactLogo,nodejs:NodejsLogo,angular:AngularLogo,azure:AzureLogo,aws:AwsLogo};function ProjectContainer({name:n,description:e,image:a,technologies:i}){const[o,f]=createSignal(!1),v=()=>{f(!0)},d=()=>{f(!1)};return(()=>{var P=_tmpl$$7(),r=P.firstChild,t=r.firstChild,l=t.nextSibling,p=l.firstChild;return r.addEventListener("mouseleave",d),r.addEventListener("mouseenter",v),insert(r,(()=>{var h=createMemo(()=>!!o());return()=>h()?(()=>{var s=_tmpl$2$1(),m=s.firstChild,_=m.firstChild,u=m.nextSibling,w=u.firstChild,C=u.nextSibling;return s.addEventListener("mouseleave",d),insert(_,n),insert(w,e),insert(C,()=>i.map(x=>iconMapper[x])),s})():void 0})(),t),setAttribute(t,"src",a),insert(p,n),P})()}const Projects$1="";var _tmpl$$6=template(`<div class=m-auto><h1 class=text-xl>Few projects I've been working on...</h1><div class=" mt-10 grid custom-grid gap-x-[5px] gap-y-[10px]">`);const projects=[{image:AccentureSecureImage,name:"KPI Filler Tool",description:"The KPI Form Filler is an innovative software solution designed to streamline and automate the process of completing Key Performance Indicator (KPI) forms for companies of all sizes.",technologies:["angular","nodejs","azure"]},{image:AccentureSecureImage,name:"Event Expense Tool",description:"User-friendly application tailored specifically for managing expenses related hotel bookings, travel, meals, and other associated costs. By integrating advanced analytics, seamless data entry, and compliance features, the tool ensures that every aspect of expense handling is efficient, transparent, and compliant with relevant regulations.",technologies:["angular","nodejs","azure"]},{image:AccentureSecureImage,name:"Trouble Ticket",description:"This app is designed for British telecommunacation company to streamline their trouble ticket management process. It helps in tracking, managing, and resolving technical issues for the users.",technologies:["react","aws"]},{image:AccentureSecureImage,name:"Telecom Order Manager",description:"This app is designed for British telecommunaction company, with it companies can design their new phones and  order them.",technologies:["react","aws"]},{image:AccentureSecureImage,name:"Warranty calc",description:"WarrantyCalc is a specialized application designed specifically for German automotive company  to streamline the process of warranty posting and claims calculation. This application simplifies the handling of warranty claims by automating calculations and ensuring compliance with company's warranty policies and guidelines.",technologies:["angular","nodejs","azure"]},{image:AccentureSecureImage,name:"Federated modules",description:"For easier development and microarchitecture, it was necessary for the header and footer to be a federated module. With it, developers don't have to deal with update and install header and footer package anymore.",technologies:["react"]}];function Projects(){return(()=>{var n=_tmpl$$6(),e=n.firstChild,a=e.nextSibling;return insert(a,()=>projects.map(i=>createComponent(ProjectContainer,i))),n})()}const $RAW=Symbol("store-raw"),$NODE=Symbol("store-node"),$HAS=Symbol("store-has"),$SELF=Symbol("store-self");function wrap$1(n){let e=n[$PROXY];if(!e&&(Object.defineProperty(n,$PROXY,{value:e=new Proxy(n,proxyTraps$1)}),!Array.isArray(n))){const a=Object.keys(n),i=Object.getOwnPropertyDescriptors(n);for(let o=0,f=a.length;o<f;o++){const v=a[o];i[v].get&&Object.defineProperty(n,v,{enumerable:i[v].enumerable,get:i[v].get.bind(e)})}}return e}function isWrappable(n){let e;return n!=null&&typeof n=="object"&&(n[$PROXY]||!(e=Object.getPrototypeOf(n))||e===Object.prototype||Array.isArray(n))}function unwrap(n,e=new Set){let a,i,o,f;if(a=n!=null&&n[$RAW])return a;if(!isWrappable(n)||e.has(n))return n;if(Array.isArray(n)){Object.isFrozen(n)?n=n.slice(0):e.add(n);for(let v=0,d=n.length;v<d;v++)o=n[v],(i=unwrap(o,e))!==o&&(n[v]=i)}else{Object.isFrozen(n)?n=Object.assign({},n):e.add(n);const v=Object.keys(n),d=Object.getOwnPropertyDescriptors(n);for(let P=0,r=v.length;P<r;P++)f=v[P],!d[f].get&&(o=n[f],(i=unwrap(o,e))!==o&&(n[f]=i))}return n}function getNodes(n,e){let a=n[e];return a||Object.defineProperty(n,e,{value:a=Object.create(null)}),a}function getNode(n,e,a){if(n[e])return n[e];const[i,o]=createSignal(a,{equals:!1,internal:!0});return i.$=o,n[e]=i}function proxyDescriptor$1(n,e){const a=Reflect.getOwnPropertyDescriptor(n,e);return!a||a.get||!a.configurable||e===$PROXY||e===$NODE||(delete a.value,delete a.writable,a.get=()=>n[$PROXY][e]),a}function trackSelf(n){getListener()&&getNode(getNodes(n,$NODE),$SELF)()}function ownKeys(n){return trackSelf(n),Reflect.ownKeys(n)}const proxyTraps$1={get(n,e,a){if(e===$RAW)return n;if(e===$PROXY)return a;if(e===$TRACK)return trackSelf(n),a;const i=getNodes(n,$NODE),o=i[e];let f=o?o():n[e];if(e===$NODE||e===$HAS||e==="__proto__")return f;if(!o){const v=Object.getOwnPropertyDescriptor(n,e);getListener()&&(typeof f!="function"||n.hasOwnProperty(e))&&!(v&&v.get)&&(f=getNode(i,e,f)())}return isWrappable(f)?wrap$1(f):f},has(n,e){return e===$RAW||e===$PROXY||e===$TRACK||e===$NODE||e===$HAS||e==="__proto__"?!0:(getListener()&&getNode(getNodes(n,$HAS),e)(),e in n)},set(){return!0},deleteProperty(){return!0},ownKeys,getOwnPropertyDescriptor:proxyDescriptor$1};function setProperty(n,e,a,i=!1){if(!i&&n[e]===a)return;const o=n[e],f=n.length;a===void 0?(delete n[e],n[$HAS]&&n[$HAS][e]&&o!==void 0&&n[$HAS][e].$()):(n[e]=a,n[$HAS]&&n[$HAS][e]&&o===void 0&&n[$HAS][e].$());let v=getNodes(n,$NODE),d;if((d=getNode(v,e,o))&&d.$(()=>a),Array.isArray(n)&&n.length!==f){for(let P=n.length;P<f;P++)(d=v[P])&&d.$();(d=getNode(v,"length",f))&&d.$(n.length)}(d=v[$SELF])&&d.$()}function mergeStoreNode(n,e){const a=Object.keys(e);for(let i=0;i<a.length;i+=1){const o=a[i];setProperty(n,o,e[o])}}function updateArray(n,e){if(typeof e=="function"&&(e=e(n)),e=unwrap(e),Array.isArray(e)){if(n===e)return;let a=0,i=e.length;for(;a<i;a++){const o=e[a];n[a]!==o&&setProperty(n,a,o)}setProperty(n,"length",i)}else mergeStoreNode(n,e)}function updatePath(n,e,a=[]){let i,o=n;if(e.length>1){i=e.shift();const v=typeof i,d=Array.isArray(n);if(Array.isArray(i)){for(let P=0;P<i.length;P++)updatePath(n,[i[P]].concat(e),a);return}else if(d&&v==="function"){for(let P=0;P<n.length;P++)i(n[P],P)&&updatePath(n,[P].concat(e),a);return}else if(d&&v==="object"){const{from:P=0,to:r=n.length-1,by:t=1}=i;for(let l=P;l<=r;l+=t)updatePath(n,[l].concat(e),a);return}else if(e.length>1){updatePath(n[i],e,[i].concat(a));return}o=n[i],a=[i].concat(a)}let f=e[0];typeof f=="function"&&(f=f(o,a),f===o)||i===void 0&&f==null||(f=unwrap(f),i===void 0||isWrappable(o)&&isWrappable(f)&&!Array.isArray(f)?mergeStoreNode(o,f):setProperty(n,i,f))}function createStore$1(...[n,e]){const a=unwrap(n||{}),i=Array.isArray(a),o=wrap$1(a);function f(...v){batch(()=>{i&&v.length===1?updateArray(a,v[0]):updatePath(a,v)})}return[o,f]}const $ROOT=Symbol("store-root");function applyState(n,e,a,i,o){const f=e[a];if(n===f)return;const v=Array.isArray(n);if(a!==$ROOT&&(!isWrappable(n)||!isWrappable(f)||v!==Array.isArray(f)||o&&n[o]!==f[o])){setProperty(e,a,n);return}if(v){if(n.length&&f.length&&(!i||o&&n[0]&&n[0][o]!=null)){let r,t,l,p,h,s,m,_;for(l=0,p=Math.min(f.length,n.length);l<p&&(f[l]===n[l]||o&&f[l]&&n[l]&&f[l][o]===n[l][o]);l++)applyState(n[l],f,l,i,o);const u=new Array(n.length),w=new Map;for(p=f.length-1,h=n.length-1;p>=l&&h>=l&&(f[p]===n[h]||o&&f[l]&&n[l]&&f[p][o]===n[h][o]);p--,h--)u[h]=f[p];if(l>h||l>p){for(t=l;t<=h;t++)setProperty(f,t,n[t]);for(;t<n.length;t++)setProperty(f,t,u[t]),applyState(n[t],f,t,i,o);f.length>n.length&&setProperty(f,"length",n.length);return}for(m=new Array(h+1),t=h;t>=l;t--)s=n[t],_=o&&s?s[o]:s,r=w.get(_),m[t]=r===void 0?-1:r,w.set(_,t);for(r=l;r<=p;r++)s=f[r],_=o&&s?s[o]:s,t=w.get(_),t!==void 0&&t!==-1&&(u[t]=f[r],t=m[t],w.set(_,t));for(t=l;t<n.length;t++)t in u?(setProperty(f,t,u[t]),applyState(n[t],f,t,i,o)):setProperty(f,t,n[t])}else for(let r=0,t=n.length;r<t;r++)applyState(n[r],f,r,i,o);f.length>n.length&&setProperty(f,"length",n.length);return}const d=Object.keys(n);for(let r=0,t=d.length;r<t;r++)applyState(n[d[r]],f,d[r],i,o);const P=Object.keys(f);for(let r=0,t=P.length;r<t;r++)n[P[r]]===void 0&&setProperty(f,P[r],void 0)}function reconcile(n,e={}){const{merge:a,key:i="id"}=e,o=unwrap(n);return f=>{if(!isWrappable(f)||!isWrappable(o))return o;const v=applyState(o,{[$ROOT]:f},$ROOT,a,i);return v===void 0?f:v}}function getAugmentedNamespace(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var a=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};a.prototype=e.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var o=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(a,i,o.get?o:{enumerable:!0,get:function(){return n[i]}})}),a}function commonjsRequire(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,a){module.exports=e.pdfjsLib=a()})(globalThis,()=>(()=>{var __webpack_modules__=[,(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=y,e.bytesToString=$,e.createValidAbsoluteUrl=M,e.getModificationDate=ge,e.getUuid=Ie,e.getVerbosityLevel=J,e.info=G,e.isArrayBuffer=ue,e.isArrayEqual=pe,e.isNodeJS=void 0,e.normalizeUnicode=Me,e.objectFromMap=ne,e.objectSize=oe,e.setVerbosityLevel=W,e.shadow=k,e.string32=ie,e.stringToBytes=X,e.stringToPDFString=ce,e.stringToUTF8String=he,e.unreachable=E,e.utf8StringToString=de,e.warn=T;const a=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=a;const i=[1,0,0,1,0,0];e.IDENTITY_MATRIX=i;const o=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=o;const f=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=f;const v=1.35;e.LINE_FACTOR=v;const d=.35;e.LINE_DESCENT_FACTOR=d;const P=d/v;e.BASELINE_FACTOR=P;const r={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=r;const t={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=t;const l="pdfjs_internal_editor_";e.AnnotationEditorPrefix=l;const p={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=p;const h={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=h;const s={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=s;const m={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=m;const _={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=_;const u={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=u;const w={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=w;const C={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=C;const x={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=x;const c={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=c;const b={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=b;const D={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=D;const B={O:"PageOpen",C:"PageClose"};e.PageActionEventType=B;const L={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=L;const O={NONE:0,BINARY:1};e.CMapCompressionType=O;const j={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=j;const q={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=q;let ee=L.WARNINGS;function W(re){Number.isInteger(re)&&(ee=re)}function J(){return ee}function G(re){ee>=L.INFOS&&console.log(`Info: ${re}`)}function T(re){ee>=L.WARNINGS&&console.log(`Warning: ${re}`)}function E(re){throw new Error(re)}function y(re,te){re||E(te)}function g(re){switch(re?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function M(re,te=null,Z=null){if(!re)return null;try{if(Z&&typeof re=="string"&&(Z.addDefaultProtocol&&re.startsWith("www.")&&re.match(/\./g)?.length>=2&&(re=`http://${re}`),Z.tryConvertEncoding))try{re=he(re)}catch{}const le=te?new URL(re,te):new URL(re);if(g(le))return le}catch{}return null}function k(re,te,Z,le=!1){return Object.defineProperty(re,te,{value:Z,enumerable:!le,configurable:!0,writable:!1}),Z}const N=function(){function te(Z,le){this.constructor===te&&E("Cannot initialize BaseException."),this.message=Z,this.name=le}return te.prototype=new Error,te.constructor=te,te}();e.BaseException=N;class H extends N{constructor(te,Z){super(te,"PasswordException"),this.code=Z}}e.PasswordException=H;class I extends N{constructor(te,Z){super(te,"UnknownErrorException"),this.details=Z}}e.UnknownErrorException=I;class S extends N{constructor(te){super(te,"InvalidPDFException")}}e.InvalidPDFException=S;class F extends N{constructor(te){super(te,"MissingPDFException")}}e.MissingPDFException=F;class R extends N{constructor(te,Z){super(te,"UnexpectedResponseException"),this.status=Z}}e.UnexpectedResponseException=R;class U extends N{constructor(te){super(te,"FormatError")}}e.FormatError=U;class V extends N{constructor(te){super(te,"AbortException")}}e.AbortException=V;function $(re){(typeof re!="object"||re?.length===void 0)&&E("Invalid argument for bytesToString");const te=re.length,Z=8192;if(te<Z)return String.fromCharCode.apply(null,re);const le=[];for(let fe=0;fe<te;fe+=Z){const me=Math.min(fe+Z,te),_e=re.subarray(fe,me);le.push(String.fromCharCode.apply(null,_e))}return le.join("")}function X(re){typeof re!="string"&&E("Invalid argument for stringToBytes");const te=re.length,Z=new Uint8Array(te);for(let le=0;le<te;++le)Z[le]=re.charCodeAt(le)&255;return Z}function ie(re){return String.fromCharCode(re>>24&255,re>>16&255,re>>8&255,re&255)}function oe(re){return Object.keys(re).length}function ne(re){const te=Object.create(null);for(const[Z,le]of re)te[Z]=le;return te}function z(){const re=new Uint8Array(4);return re[0]=1,new Uint32Array(re.buffer,0,1)[0]===1}function K(){try{return new Function(""),!0}catch{return!1}}class Q{static get isLittleEndian(){return k(this,"isLittleEndian",z())}static get isEvalSupported(){return k(this,"isEvalSupported",K())}static get isOffscreenCanvasSupported(){return k(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?k(this,"platform",{isWin:!1,isMac:!1}):k(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return k(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}e.FeatureTest=Q;const Y=[...Array(256).keys()].map(re=>re.toString(16).padStart(2,"0"));class se{static makeHexColor(te,Z,le){return`#${Y[te]}${Y[Z]}${Y[le]}`}static scaleMinMax(te,Z){let le;te[0]?(te[0]<0&&(le=Z[0],Z[0]=Z[1],Z[1]=le),Z[0]*=te[0],Z[1]*=te[0],te[3]<0&&(le=Z[2],Z[2]=Z[3],Z[3]=le),Z[2]*=te[3],Z[3]*=te[3]):(le=Z[0],Z[0]=Z[2],Z[2]=le,le=Z[1],Z[1]=Z[3],Z[3]=le,te[1]<0&&(le=Z[2],Z[2]=Z[3],Z[3]=le),Z[2]*=te[1],Z[3]*=te[1],te[2]<0&&(le=Z[0],Z[0]=Z[1],Z[1]=le),Z[0]*=te[2],Z[1]*=te[2]),Z[0]+=te[4],Z[1]+=te[4],Z[2]+=te[5],Z[3]+=te[5]}static transform(te,Z){return[te[0]*Z[0]+te[2]*Z[1],te[1]*Z[0]+te[3]*Z[1],te[0]*Z[2]+te[2]*Z[3],te[1]*Z[2]+te[3]*Z[3],te[0]*Z[4]+te[2]*Z[5]+te[4],te[1]*Z[4]+te[3]*Z[5]+te[5]]}static applyTransform(te,Z){const le=te[0]*Z[0]+te[1]*Z[2]+Z[4],fe=te[0]*Z[1]+te[1]*Z[3]+Z[5];return[le,fe]}static applyInverseTransform(te,Z){const le=Z[0]*Z[3]-Z[1]*Z[2],fe=(te[0]*Z[3]-te[1]*Z[2]+Z[2]*Z[5]-Z[4]*Z[3])/le,me=(-te[0]*Z[1]+te[1]*Z[0]+Z[4]*Z[1]-Z[5]*Z[0])/le;return[fe,me]}static getAxialAlignedBoundingBox(te,Z){const le=this.applyTransform(te,Z),fe=this.applyTransform(te.slice(2,4),Z),me=this.applyTransform([te[0],te[3]],Z),_e=this.applyTransform([te[2],te[1]],Z);return[Math.min(le[0],fe[0],me[0],_e[0]),Math.min(le[1],fe[1],me[1],_e[1]),Math.max(le[0],fe[0],me[0],_e[0]),Math.max(le[1],fe[1],me[1],_e[1])]}static inverseTransform(te){const Z=te[0]*te[3]-te[1]*te[2];return[te[3]/Z,-te[1]/Z,-te[2]/Z,te[0]/Z,(te[2]*te[5]-te[4]*te[3])/Z,(te[4]*te[1]-te[5]*te[0])/Z]}static singularValueDecompose2dScale(te){const Z=[te[0],te[2],te[1],te[3]],le=te[0]*Z[0]+te[1]*Z[2],fe=te[0]*Z[1]+te[1]*Z[3],me=te[2]*Z[0]+te[3]*Z[2],_e=te[2]*Z[1]+te[3]*Z[3],Ce=(le+_e)/2,Ae=Math.sqrt((le+_e)**2-4*(le*_e-me*fe))/2,Te=Ce+Ae||1,ye=Ce-Ae||1;return[Math.sqrt(Te),Math.sqrt(ye)]}static normalizeRect(te){const Z=te.slice(0);return te[0]>te[2]&&(Z[0]=te[2],Z[2]=te[0]),te[1]>te[3]&&(Z[1]=te[3],Z[3]=te[1]),Z}static intersect(te,Z){const le=Math.max(Math.min(te[0],te[2]),Math.min(Z[0],Z[2])),fe=Math.min(Math.max(te[0],te[2]),Math.max(Z[0],Z[2]));if(le>fe)return null;const me=Math.max(Math.min(te[1],te[3]),Math.min(Z[1],Z[3])),_e=Math.min(Math.max(te[1],te[3]),Math.max(Z[1],Z[3]));return me>_e?null:[le,me,fe,_e]}static bezierBoundingBox(te,Z,le,fe,me,_e,Ce,Ae){const Te=[],ye=[[],[]];let xe,we,Le,be,De,ke,Ne,Be;for(let Ve=0;Ve<2;++Ve){if(Ve===0?(we=6*te-12*le+6*me,xe=-3*te+9*le-9*me+3*Ce,Le=3*le-3*te):(we=6*Z-12*fe+6*_e,xe=-3*Z+9*fe-9*_e+3*Ae,Le=3*fe-3*Z),Math.abs(xe)<1e-12){if(Math.abs(we)<1e-12)continue;be=-Le/we,0<be&&be<1&&Te.push(be);continue}Ne=we*we-4*Le*xe,Be=Math.sqrt(Ne),!(Ne<0)&&(De=(-we+Be)/(2*xe),0<De&&De<1&&Te.push(De),ke=(-we-Be)/(2*xe),0<ke&&ke<1&&Te.push(ke))}let Fe=Te.length,Pe;const Re=Fe;for(;Fe--;)be=Te[Fe],Pe=1-be,ye[0][Fe]=Pe*Pe*Pe*te+3*Pe*Pe*be*le+3*Pe*be*be*me+be*be*be*Ce,ye[1][Fe]=Pe*Pe*Pe*Z+3*Pe*Pe*be*fe+3*Pe*be*be*_e+be*be*be*Ae;return ye[0][Re]=te,ye[1][Re]=Z,ye[0][Re+1]=Ce,ye[1][Re+1]=Ae,ye[0].length=ye[1].length=Re+2,[Math.min(...ye[0]),Math.min(...ye[1]),Math.max(...ye[0]),Math.max(...ye[1])]}}e.Util=se;const ae=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ce(re){if(re[0]>="Ã¯"){let Z;if(re[0]==="Ã¾"&&re[1]==="Ã¿"?Z="utf-16be":re[0]==="Ã¿"&&re[1]==="Ã¾"?Z="utf-16le":re[0]==="Ã¯"&&re[1]==="Â»"&&re[2]==="Â¿"&&(Z="utf-8"),Z)try{const le=new TextDecoder(Z,{fatal:!0}),fe=X(re);return le.decode(fe)}catch(le){T(`stringToPDFString: "${le}".`)}}const te=[];for(let Z=0,le=re.length;Z<le;Z++){const fe=ae[re.charCodeAt(Z)];te.push(fe?String.fromCharCode(fe):re.charAt(Z))}return te.join("")}function he(re){return decodeURIComponent(escape(re))}function de(re){return unescape(encodeURIComponent(re))}function ue(re){return typeof re=="object"&&re?.byteLength!==void 0}function pe(re,te){if(re.length!==te.length)return!1;for(let Z=0,le=re.length;Z<le;Z++)if(re[Z]!==te[Z])return!1;return!0}function ge(re=new Date){return[re.getUTCFullYear().toString(),(re.getUTCMonth()+1).toString().padStart(2,"0"),re.getUTCDate().toString().padStart(2,"0"),re.getUTCHours().toString().padStart(2,"0"),re.getUTCMinutes().toString().padStart(2,"0"),re.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ee{#e=!1;constructor(){this.promise=new Promise((te,Z)=>{this.resolve=le=>{this.#e=!0,te(le)},this.reject=le=>{this.#e=!0,Z(le)}})}get settled(){return this.#e}}e.PromiseCapability=Ee;let ve=null,Se=null;function Me(re){return ve||(ve=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Se=new Map([["ï¬","Å¿t"]])),re.replaceAll(ve,(te,Z,le)=>Z?Z.normalize("NFKC"):Se.get(le))}function Ie(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const re=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(re);else for(let te=0;te<32;te++)re[te]=Math.floor(Math.random()*255);return $(re)}const Oe="pdfjs_internal_id_";e.AnnotationPrefix=Oe},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(n){if(typeof n=="string"||n instanceof URL?n={url:n}:(0,_util.isArrayBuffer)(n)&&(n={data:n}),typeof n!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!n.url&&!n.data&&!n.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const e=new PDFDocumentLoadingTask,{docId:a}=e,i=n.url?getUrlProp(n.url):null,o=n.data?getDataProp(n.data):null,f=n.httpHeaders||null,v=n.withCredentials===!0,d=n.password??null,P=n.range instanceof PDFDataRangeTransport?n.range:null,r=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let t=n.worker instanceof PDFWorker?n.worker:null;const l=n.verbosity,p=typeof n.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(n.docBaseUrl)?n.docBaseUrl:null,h=typeof n.cMapUrl=="string"?n.cMapUrl:null,s=n.cMapPacked!==!1,m=n.CMapReaderFactory||DefaultCMapReaderFactory,_=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,u=n.StandardFontDataFactory||DefaultStandardFontDataFactory,w=n.stopAtErrors!==!0,C=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,x=n.isEvalSupported!==!1,c=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!_util.isNodeJS,b=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,D=typeof n.disableFontFace=="boolean"?n.disableFontFace:_util.isNodeJS,B=n.fontExtraProperties===!0,L=n.enableXfa===!0,O=n.ownerDocument||globalThis.document,j=n.disableRange===!0,q=n.disableStream===!0,ee=n.disableAutoFetch===!0,W=n.pdfBug===!0,J=P?P.length:n.length??NaN,G=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!_util.isNodeJS&&!D,T=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:m===_display_utils.DOMCMapReaderFactory&&u===_display_utils.DOMStandardFontDataFactory&&h&&_&&(0,_display_utils.isValidFetchUrl)(h,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(_,document.baseURI),E=n.canvasFactory||new DefaultCanvasFactory({ownerDocument:O}),y=n.filterFactory||new DefaultFilterFactory({docId:a,ownerDocument:O}),g=null;(0,_util.setVerbosityLevel)(l);const M={canvasFactory:E,filterFactory:y};if(T||(M.cMapReaderFactory=new m({baseUrl:h,isCompressed:s}),M.standardFontDataFactory=new u({baseUrl:_})),!t){const H={verbosity:l,port:_worker_options.GlobalWorkerOptions.workerPort};t=H.port?PDFWorker.fromPort(H):new PDFWorker(H),e._worker=t}const k={docId:a,apiVersion:"3.11.174",data:o,password:d,disableAutoFetch:ee,rangeChunkSize:r,length:J,docBaseUrl:p,enableXfa:L,evaluatorOptions:{maxImageSize:C,disableFontFace:D,ignoreErrors:w,isEvalSupported:x,isOffscreenCanvasSupported:c,canvasMaxAreaInBytes:b,fontExtraProperties:B,useSystemFonts:G,cMapUrl:T?h:null,standardFontDataUrl:T?_:null}},N={ignoreErrors:w,isEvalSupported:x,disableFontFace:D,fontExtraProperties:B,enableXfa:L,ownerDocument:O,disableAutoFetch:ee,pdfBug:W,styleElement:g};return t.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");const H=_fetchDocument(t,k),I=new Promise(function(S){let F;P?F=new _transport_stream.PDFDataTransportStream({length:J,initialData:P.initialData,progressiveDone:P.progressiveDone,contentDispositionFilename:P.contentDispositionFilename,disableRange:j,disableStream:q},P):o||(F=(U=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(U):(0,_display_utils.isValidFetchUrl)(U.url)?new _displayFetch_stream.PDFFetchStream(U):new _displayNetwork.PDFNetworkStream(U))({url:i,length:J,httpHeaders:f,withCredentials:v,rangeChunkSize:r,disableRange:j,disableStream:q})),S(F)});return Promise.all([H,I]).then(function([S,F]){if(e.destroyed)throw new Error("Loading aborted");const R=new _message_handler.MessageHandler(a,S,t.port),U=new WorkerTransport(R,e,F,N,M);e._transport=U,R.send("Ready",null)})}).catch(e._capability.reject),e}async function _fetchDocument(n,e){if(n.destroyed)throw new Error("Worker was destroyed");const a=await n.messageHandler.sendWithPromise("GetDocRequest",e,e.data?[e.data.buffer]:null);if(n.destroyed)throw new Error("Worker was destroyed");return a}function getUrlProp(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(_util.isNodeJS&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(n){if(_util.isNodeJS&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return(0,_util.stringToBytes)(n);if(typeof n=="object"&&!isNaN(n?.length)||(0,_util.isArrayBuffer)(n))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#e=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,a,i=!1,o=null){this.length=e,this.initialData=a,this.progressiveDone=i,this.contentDispositionFilename=o,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,a){for(const i of this._rangeListeners)i(e,a)}onDataProgress(e,a){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,a)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const a of this._progressiveReadListeners)a(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,a){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,a){this._pdfInfo=e,this._transport=a,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(i=>{if(!i)return i;const o=[];for(const f in i)o.push(...i[f]);return o}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#e=null;#t=!1;constructor(e,a,i,o=!1){this._pageIndex=e,this._pageInfo=a,this._transport=i,this._stats=o?new _display_utils.StatTimer:null,this._pdfBug=o,this.commonObjs=i.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:a=this.rotate,offsetX:i=0,offsetY:o=0,dontFlip:f=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:a,offsetX:i,offsetY:o,dontFlip:f})}getAnnotations({intent:e="display"}={}){const a=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,a.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:a,intent:i="display",annotationMode:o=_util.AnnotationMode.ENABLE,transform:f=null,background:v=null,optionalContentConfigPromise:d=null,annotationCanvasMap:P=null,pageColors:r=null,printAnnotationStorage:t=null}){this._stats?.time("Overall");const l=this._transport.getRenderingIntent(i,o,t);this.#t=!1,this.#n(),d||(d=this._transport.getOptionalContentConfig());let p=this._intentStates.get(l.cacheKey);p||(p=Object.create(null),this._intentStates.set(l.cacheKey,p)),p.streamReaderCancelTimeout&&(clearTimeout(p.streamReaderCancelTimeout),p.streamReaderCancelTimeout=null);const h=!!(l.renderingIntent&_util.RenderingIntentFlag.PRINT);p.displayReadyCapability||(p.displayReadyCapability=new _util.PromiseCapability,p.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l));const s=u=>{p.renderTasks.delete(m),(this._maybeCleanupAfterRender||h)&&(this.#t=!0),this.#i(!h),u?(m.capability.reject(u),this._abortOperatorList({intentState:p,reason:u instanceof Error?u:new Error(u)})):m.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},m=new InternalRenderTask({callback:s,params:{canvasContext:e,viewport:a,transform:f,background:v},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:P,operatorList:p.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!h,pdfBug:this._pdfBug,pageColors:r});(p.renderTasks||=new Set).add(m);const _=m.task;return Promise.all([p.displayReadyCapability.promise,d]).then(([u,w])=>{if(this.destroyed){s();return}this._stats?.time("Rendering"),m.initializeGraphics({transparency:u,optionalContentConfig:w}),m.operatorListChanged()}).catch(s),_}getOperatorList({intent:e="display",annotationMode:a=_util.AnnotationMode.ENABLE,printAnnotationStorage:i=null}={}){function o(){v.operatorList.lastChunk&&(v.opListReadCapability.resolve(v.operatorList),v.renderTasks.delete(d))}const f=this._transport.getRenderingIntent(e,a,i,!0);let v=this._intentStates.get(f.cacheKey);v||(v=Object.create(null),this._intentStates.set(f.cacheKey,v));let d;return v.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,v.opListReadCapability=new _util.PromiseCapability,(v.renderTasks||=new Set).add(d),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(f)),v.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:a=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:a===!0},{highWaterMark:100,size(o){return o.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>_xfa_text.XfaText.textContent(i));const a=this.streamTextContent(e);return new Promise(function(i,o){function f(){v.read().then(function({value:P,done:r}){if(r){i(d);return}Object.assign(d.styles,P.styles),d.items.push(...P.items),f()},o)}const v=a.getReader(),d={items:[],styles:Object.create(null)};f()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const a of this._intentStates.values())if(this._abortOperatorList({intentState:a,reason:new Error("Page was destroyed."),force:!0}),!a.opListReadCapability)for(const i of a.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,this.#n(),Promise.all(e)}cleanup(e=!1){this.#t=!0;const a=this.#i(!1);return e&&a&&(this._stats&&=new _display_utils.StatTimer),a}#i(e=!1){if(this.#n(),!this.#t||this.destroyed)return!1;if(e)return this.#e=setTimeout(()=>{this.#e=null,this.#i(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:a,operatorList:i}of this._intentStates.values())if(a.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#n(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(e,a){const i=this._intentStates.get(a);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(e))}_renderPageChunk(e,a){for(let i=0,o=e.length;i<o;i++)a.operatorList.fnArray.push(e.fnArray[i]),a.operatorList.argsArray.push(e.argsArray[i]);a.operatorList.lastChunk=e.lastChunk,a.operatorList.separateAnnots=e.separateAnnots;for(const i of a.renderTasks)i.operatorListChanged();e.lastChunk&&this.#i(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:a,annotationStorageSerializable:i}){const{map:o,transfers:f}=i,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:a,annotationStorage:o},f).getReader(),P=this._intentStates.get(a);P.streamReader=d;const r=()=>{d.read().then(({value:t,done:l})=>{if(l){P.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(t,P),r())},t=>{if(P.streamReader=null,!this._transport.destroyed){if(P.operatorList){P.operatorList.lastChunk=!0;for(const l of P.renderTasks)l.operatorListChanged();this.#i(!0)}if(P.displayReadyCapability)P.displayReadyCapability.reject(t);else if(P.opListReadCapability)P.opListReadCapability.reject(t);else throw t}})};r()}_abortOperatorList({intentState:e,reason:a,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(a instanceof _display_utils.RenderingCancelledException){let o=RENDERING_CANCELLED_TIMEOUT;a.extraDelay>0&&a.extraDelay<1e3&&(o+=a.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:a,force:!0})},o);return}}if(e.streamReader.cancel(new _util.AbortException(a.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[o,f]of this._intentStates)if(f===e){this._intentStates.delete(o);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#e=new Set;#t=Promise.resolve();postMessage(e,a){const i={data:structuredClone(e,a?{transfer:a}:null)};this.#t.then(()=>{for(const o of this.#e)o.call(this,i)})}addEventListener(e,a){this.#e.add(a)}removeEventListener(e,a){this.#e.delete(a)}terminate(){this.#e.clear()}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const n=document?.currentScript?.src;n&&(PDFWorkerUtil.fallbackWorkerSrc=n.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(n,e){let a;try{if(a=new URL(n),!a.origin||a.origin==="null")return!1}catch{return!1}const i=new URL(e,a);return a.origin===i.origin},PDFWorkerUtil.createCDNWrapper=function(n){const e=`importScripts("${n}");`;return URL.createObjectURL(new Blob([e]))}}class PDFWorker{static#workerPorts;constructor({name:n=null,port:e=null,verbosity:a=(0,_util.getVerbosityLevel)()}={}){if(this.name=n,this.destroyed=!1,this.verbosity=a,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,e){if(PDFWorker.#workerPorts?.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(n){this._port=n,this._messageHandler=new _message_handler.MessageHandler("main","worker",n),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:n}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,n)||(n=PDFWorkerUtil.createCDNWrapper(new URL(n,window.location).href));const e=new Worker(n),a=new _message_handler.MessageHandler("main","worker",e),i=()=>{e.removeEventListener("error",o),a.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=()=>{this._webWorker||i()};e.addEventListener("error",o),a.on("test",v=>{if(e.removeEventListener("error",o),this.destroyed){i();return}v?(this._messageHandler=a,this._port=e,this._webWorker=e,this._readyCapability.resolve(),a.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),a.destroy(),e.terminate())}),a.on("ready",v=>{if(e.removeEventListener("error",o),this.destroyed){i();return}try{f()}catch{this._setupFakeWorker()}});const f=()=>{const v=new Uint8Array;a.send("test",v,[v.buffer])};f();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(n=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new LoopbackPort;this._port=e;const a=`fake${PDFWorkerUtil.fakeWorkerId++}`,i=new _message_handler.MessageHandler(a+"_worker",a,e);n.setup(i,e);const o=new _message_handler.MessageHandler(a,a+"_worker",e);this._messageHandler=o,this._readyCapability.resolve(),o.send("configure",{verbosity:this.verbosity})}).catch(n=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${n.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(n){if(!n?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const e=this.#workerPorts?.get(n.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new PDFWorker(n)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#e=new Map;#t=new Map;#i=new Map;#n=null;constructor(e,a,i,o,f){this.messageHandler=e,this.loadingTask=a,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:o.ownerDocument,styleElement:o.styleElement}),this._params=o,this.canvasFactory=f.canvasFactory,this.filterFactory=f.filterFactory,this.cMapReaderFactory=f.cMapReaderFactory,this.standardFontDataFactory=f.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#o(e,a=null){const i=this.#e.get(e);if(i)return i;const o=this.messageHandler.sendWithPromise(e,a);return this.#e.set(e,o),o}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(e,a=_util.AnnotationMode.ENABLE,i=null,o=!1){let f=_util.RenderingIntentFlag.DISPLAY,v=_annotation_storage.SerializableEmpty;switch(e){case"any":f=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":f=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(a){case _util.AnnotationMode.DISABLE:f+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:f+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:f+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,v=(f&_util.RenderingIntentFlag.PRINT&&i instanceof _annotation_storage.PrintAnnotationStorage?i:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${a}`)}return o&&(f+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:f,cacheKey:`${f}_${v.hash}`,annotationStorageSerializable:v}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#n?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of this.#t.values())e.push(i._destroy());this.#t.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const a=this.messageHandler.sendWithPromise("Terminate",null);return e.push(a),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:a}=this;e.on("GetReader",(i,o)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=f=>{this._lastProgress={loaded:f.loaded,total:f.total}},o.onPull=()=>{this._fullReader.read().then(function({value:f,done:v}){if(v){o.close();return}(0,_util.assert)(f instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(f),1,[f])}).catch(f=>{o.error(f)})},o.onCancel=f=>{this._fullReader.cancel(f),o.ready.catch(v=>{if(!this.destroyed)throw v})}}),e.on("ReaderHeadersReady",i=>{const o=new _util.PromiseCapability,f=this._fullReader;return f.headersReady.then(()=>{(!f.isStreamingSupported||!f.isRangeSupported)&&(this._lastProgress&&a.onProgress?.(this._lastProgress),f.onProgress=v=>{a.onProgress?.({loaded:v.loaded,total:v.total})}),o.resolve({isStreamingSupported:f.isStreamingSupported,isRangeSupported:f.isRangeSupported,contentLength:f.contentLength})},o.reject),o.promise}),e.on("GetRangeReader",(i,o)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const f=this._networkStream.getRangeReader(i.begin,i.end);if(!f){o.close();return}o.onPull=()=>{f.read().then(function({value:v,done:d}){if(d){o.close();return}(0,_util.assert)(v instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(v),1,[v])}).catch(v=>{o.error(v)})},o.onCancel=v=>{f.cancel(v),o.ready.catch(d=>{if(!this.destroyed)throw d})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,a._capability.resolve(new PDFDocumentProxy(i,this))}),e.on("DocException",function(i){let o;switch(i.name){case"PasswordException":o=new _util.PasswordException(i.message,i.code);break;case"InvalidPDFException":o=new _util.InvalidPDFException(i.message);break;case"MissingPDFException":o=new _util.MissingPDFException(i.message);break;case"UnexpectedResponseException":o=new _util.UnexpectedResponseException(i.message,i.status);break;case"UnknownErrorException":o=new _util.UnknownErrorException(i.message,i.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}a._capability.reject(o)}),e.on("PasswordRequest",i=>{if(this.#n=new _util.PromiseCapability,a.onPassword){const o=f=>{f instanceof Error?this.#n.reject(f):this.#n.resolve({password:f})};try{a.onPassword(o,i.code)}catch(f){this.#n.reject(f)}}else this.#n.reject(new _util.PasswordException(i.message,i.code));return this.#n.promise}),e.on("DataLoaded",i=>{a.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;this.#t.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,o,f])=>{if(!this.destroyed&&!this.commonObjs.has(i))switch(o){case"Font":const v=this._params;if("error"in f){const r=f.error;(0,_util.warn)(`Error during font loading: ${r}`),this.commonObjs.resolve(i,r);break}const d=v.pdfBug&&globalThis.FontInspector?.enabled?(r,t)=>globalThis.FontInspector.fontAdded(r,t):null,P=new _font_loader.FontFaceObject(f,{isEvalSupported:v.isEvalSupported,disableFontFace:v.disableFontFace,ignoreErrors:v.ignoreErrors,inspectFont:d});this.fontLoader.bind(P).catch(r=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!v.fontExtraProperties&&P.data&&(P.data=null),this.commonObjs.resolve(i,P)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,f);break;default:throw new Error(`Got unknown common object type ${o}`)}}),e.on("obj",([i,o,f,v])=>{if(this.destroyed)return;const d=this.#t.get(o);if(!d.objs.has(i))switch(f){case"Image":if(d.objs.resolve(i,v),v){let P;if(v.bitmap){const{width:r,height:t}=v;P=r*t*4}else P=v.data?.length||0;P>_util.MAX_IMAGE_SIZE_TO_CACHE&&(d._maybeCleanupAfterRender=!0)}break;case"Pattern":d.objs.resolve(i,v);break;default:throw new Error(`Got unknown object type ${f}`)}}),e.on("DocProgress",i=>{this.destroyed||a.onProgress?.({loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(i):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(i):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfers:a}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},a).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const a=e-1,i=this.#i.get(a);if(i)return i;const o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:a}).then(f=>{if(this.destroyed)throw new Error("Transport destroyed");const v=new PDFPageProxy(a,f,this,this._params.pdfBug);return this.#t.set(a,v),v});return this.#i.set(a,o),o}getPageIndex(e){return typeof e!="object"||e===null||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,a){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:a})}getFieldObjects(){return this.#o("GetFieldObjects")}hasJSActions(){return this.#o("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#o("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",a=this.#e.get(e);if(a)return a;const i=this.messageHandler.sendWithPromise(e,null).then(o=>({info:o[0],metadata:o[1]?new _metadata.Metadata(o[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const a of this.#t.values())if(!a.cleanup())throw new Error(`startCleanup: Page ${a.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:e,enableXfa:a}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e,enableXfa:a})}}class PDFObjects{#e=Object.create(null);#t(e){return this.#e[e]||={capability:new _util.PromiseCapability,data:null}}get(e,a=null){if(a){const o=this.#t(e);return o.capability.promise.then(()=>a(o.data)),null}const i=this.#e[e];if(!i?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){return this.#e[e]?.capability.settled||!1}resolve(e,a=null){const i=this.#t(e);i.data=a,i.capability.resolve()}clear(){for(const e in this.#e){const{data:a}=this.#e[e];a?.bitmap?.close()}this.#e=Object.create(null)}}class RenderTask{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:a}=this.#e;return e.form||e.canvas&&a?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#e=new WeakSet;constructor({callback:e,params:a,objs:i,commonObjs:o,annotationCanvasMap:f,operatorList:v,pageIndex:d,canvasFactory:P,filterFactory:r,useRequestAnimationFrame:t=!1,pdfBug:l=!1,pageColors:p=null}){this.callback=e,this.params=a,this.objs=i,this.commonObjs=o,this.annotationCanvasMap=f,this.operatorListIdx=null,this.operatorList=v,this._pageIndex=d,this.canvasFactory=P,this.filterFactory=r,this._pdfBug=l,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=t===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=a.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:a}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:o,transform:f,background:v}=this.params;this.gfx=new _canvas.CanvasGraphics(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:a},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:f,viewport:o,transparency:e,background:v}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,a=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,a))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback())))}}const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var i=a(1),o=a(4),f=a(8);const v=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=v;class d{#e=!1;#t=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,l){const p=this.#t.get(t);return p===void 0?l:Object.assign(l,p)}getRawValue(t){return this.#t.get(t)}remove(t){if(this.#t.delete(t),this.#t.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const l of this.#t.values())if(l instanceof o.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(t,l){const p=this.#t.get(t);let h=!1;if(p!==void 0)for(const[s,m]of Object.entries(l))p[s]!==m&&(h=!0,p[s]=m);else h=!0,this.#t.set(t,l);h&&this.#i(),l instanceof o.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(l.constructor._type)}has(t){return this.#t.has(t)}getAll(){return this.#t.size>0?(0,i.objectFromMap)(this.#t):null}setAll(t){for(const[l,p]of Object.entries(t))this.setValue(l,p)}get size(){return this.#t.size}#i(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new P(this)}get serializable(){if(this.#t.size===0)return v;const t=new Map,l=new f.MurmurHash3_64,p=[],h=Object.create(null);let s=!1;for(const[m,_]of this.#t){const u=_ instanceof o.AnnotationEditor?_.serialize(!1,h):_;u&&(t.set(m,u),l.update(`${m}:${JSON.stringify(u)}`),s||=!!u.bitmap)}if(s)for(const m of t.values())m.bitmap&&p.push(m.bitmap);return t.size>0?{map:t,hash:l.hexdigest(),transfers:p}:v}}e.AnnotationStorage=d;class P extends d{#e;constructor(t){super();const{map:l,hash:p,transfers:h}=t.serializable,s=structuredClone(l,h?{transfer:h}:null);this.#e={map:s,hash:p,transfers:h}}get print(){(0,i.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}}e.PrintAnnotationStorage=P},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var i=a(5),o=a(1),f=a(6);class v{#e="";#t=!1;#i=null;#n=null;#o=null;#r=!1;#a=null;#l=this.focusin.bind(this);#c=this.focusout.bind(this);#s=!1;#h=!1;#d=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#f=!1;#p=v._zIndex++;static _borderLineWidth=-1;static _colorManager=new i.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(r){this.constructor===v&&(0,o.unreachable)("Cannot initialize AnnotationEditor."),this.parent=r.parent,this.id=r.id,this.width=this.height=null,this.pageIndex=r.parent.pageIndex,this.name=r.name,this.div=null,this._uiManager=r.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=r.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:l,pageHeight:p,pageX:h,pageY:s}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[l,p],this.pageTranslation=[h,s];const[m,_]=this.parentDimensions;this.x=r.x/m,this.y=r.y/_,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,o.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(r){const t=new d({id:r.parent.getNextId(),parent:r.parent,uiManager:r._uiManager});t.annotationElementId=r.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(r,t=null){if(v._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(p=>[p,r.get(p)])),t?.strings)for(const p of t.strings)v._l10nPromise.set(p,r.get(p));if(v._borderLineWidth!==-1)return;const l=getComputedStyle(document.documentElement);v._borderLineWidth=parseFloat(l.getPropertyValue("--outline-width"))||0}static updateDefaultParams(r,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(r){return!1}static paste(r,t){(0,o.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#f}set _isDraggable(r){this.#f=r,this.div?.classList.toggle("draggable",r)}center(){const[r,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(r*2),this.y+=this.width*r/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(r*2),this.y-=this.width*r/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(r){this._uiManager.addCommands(r)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(r){r!==null&&(this.pageIndex=r.pageIndex,this.pageDimensions=r.pageDimensions),this.parent=r}focusin(r){this._focusEventsAllowed&&(this.#s?this.#s=!1:this.parent.setSelected(this))}focusout(r){!this._focusEventsAllowed||!this.isAttachedToDOM||r.relatedTarget?.closest(`#${this.id}`)||(r.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(r,t,l,p){const[h,s]=this.parentDimensions;[l,p]=this.screenToPageTranslation(l,p),this.x=(r+l)/h,this.y=(t+p)/s,this.fixAndSetPosition()}#g([r,t],l,p){[l,p]=this.screenToPageTranslation(l,p),this.x+=l/r,this.y+=p/t,this.fixAndSetPosition()}translate(r,t){this.#g(this.parentDimensions,r,t)}translateInPage(r,t){this.#g(this.pageDimensions,r,t),this.div.scrollIntoView({block:"nearest"})}drag(r,t){const[l,p]=this.parentDimensions;if(this.x+=r/l,this.y+=t/p,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:u,y:w}=this.div.getBoundingClientRect();this.parent.findNewParent(this,u,w)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:h,y:s}=this;const[m,_]=this.#m();h+=m,s+=_,this.div.style.left=`${(100*h).toFixed(2)}%`,this.div.style.top=`${(100*s).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#m(){const[r,t]=this.parentDimensions,{_borderLineWidth:l}=v,p=l/r,h=l/t;switch(this.rotation){case 90:return[-p,h];case 180:return[p,h];case 270:return[p,-h];default:return[-p,-h]}}fixAndSetPosition(){const[r,t]=this.pageDimensions;let{x:l,y:p,width:h,height:s}=this;switch(h*=r,s*=t,l*=r,p*=t,this.rotation){case 0:l=Math.max(0,Math.min(r-h,l)),p=Math.max(0,Math.min(t-s,p));break;case 90:l=Math.max(0,Math.min(r-s,l)),p=Math.min(t,Math.max(h,p));break;case 180:l=Math.min(r,Math.max(h,l)),p=Math.min(t,Math.max(s,p));break;case 270:l=Math.min(r,Math.max(s,l)),p=Math.max(0,Math.min(t-h,p));break}this.x=l/=r,this.y=p/=t;const[m,_]=this.#m();l+=m,p+=_;const{style:u}=this.div;u.left=`${(100*l).toFixed(2)}%`,u.top=`${(100*p).toFixed(2)}%`,this.moveInDOM()}static#_(r,t,l){switch(l){case 90:return[t,-r];case 180:return[-r,-t];case 270:return[-t,r];default:return[r,t]}}screenToPageTranslation(r,t){return v.#_(r,t,this.parentRotation)}pageTranslationToScreen(r,t){return v.#_(r,t,360-this.parentRotation)}#u(r){switch(r){case 90:{const[t,l]=this.pageDimensions;return[0,-t/l,l/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,l]=this.pageDimensions;return[0,t/l,-l/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:r,pageDimensions:[t,l]}=this,p=t*r,h=l*r;return o.FeatureTest.isCSSRoundSupported?[Math.round(p),Math.round(h)]:[p,h]}setDims(r,t){const[l,p]=this.parentDimensions;this.div.style.width=`${(100*r/l).toFixed(2)}%`,this.#r||(this.div.style.height=`${(100*t/p).toFixed(2)}%`),this.#i?.classList.toggle("small",r<v.SMALL_EDITOR_SIZE||t<v.SMALL_EDITOR_SIZE)}fixDims(){const{style:r}=this.div,{height:t,width:l}=r,p=l.endsWith("%"),h=!this.#r&&t.endsWith("%");if(p&&h)return;const[s,m]=this.parentDimensions;p||(r.width=`${(100*parseFloat(l)/s).toFixed(2)}%`),!this.#r&&!h&&(r.height=`${(100*parseFloat(t)/m).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#v(){if(this.#a)return;this.#a=document.createElement("div"),this.#a.classList.add("resizers");const r=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||r.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const t of r){const l=document.createElement("div");this.#a.append(l),l.classList.add("resizer",t),l.addEventListener("pointerdown",this.#w.bind(this,t)),l.addEventListener("contextmenu",f.noContextMenu)}this.div.prepend(this.#a)}#w(r,t){t.preventDefault();const{isMac:l}=o.FeatureTest.platform;if(t.button!==0||t.ctrlKey&&l)return;const p=this.#y.bind(this,r),h=this._isDraggable;this._isDraggable=!1;const s={passive:!0,capture:!0};window.addEventListener("pointermove",p,s);const m=this.x,_=this.y,u=this.width,w=this.height,C=this.parent.div.style.cursor,x=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{this._isDraggable=h,window.removeEventListener("pointerup",c),window.removeEventListener("blur",c),window.removeEventListener("pointermove",p,s),this.parent.div.style.cursor=C,this.div.style.cursor=x;const b=this.x,D=this.y,B=this.width,L=this.height;b===m&&D===_&&B===u&&L===w||this.addCommands({cmd:()=>{this.width=B,this.height=L,this.x=b,this.y=D;const[O,j]=this.parentDimensions;this.setDims(O*B,j*L),this.fixAndSetPosition()},undo:()=>{this.width=u,this.height=w,this.x=m,this.y=_;const[O,j]=this.parentDimensions;this.setDims(O*u,j*w),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",c),window.addEventListener("blur",c)}#y(r,t){const[l,p]=this.parentDimensions,h=this.x,s=this.y,m=this.width,_=this.height,u=v.MIN_SIZE/l,w=v.MIN_SIZE/p,C=I=>Math.round(I*1e4)/1e4,x=this.#u(this.rotation),c=(I,S)=>[x[0]*I+x[2]*S,x[1]*I+x[3]*S],b=this.#u(360-this.rotation),D=(I,S)=>[b[0]*I+b[2]*S,b[1]*I+b[3]*S];let B,L,O=!1,j=!1;switch(r){case"topLeft":O=!0,B=(I,S)=>[0,0],L=(I,S)=>[I,S];break;case"topMiddle":B=(I,S)=>[I/2,0],L=(I,S)=>[I/2,S];break;case"topRight":O=!0,B=(I,S)=>[I,0],L=(I,S)=>[0,S];break;case"middleRight":j=!0,B=(I,S)=>[I,S/2],L=(I,S)=>[0,S/2];break;case"bottomRight":O=!0,B=(I,S)=>[I,S],L=(I,S)=>[0,0];break;case"bottomMiddle":B=(I,S)=>[I/2,S],L=(I,S)=>[I/2,0];break;case"bottomLeft":O=!0,B=(I,S)=>[0,S],L=(I,S)=>[I,0];break;case"middleLeft":j=!0,B=(I,S)=>[0,S/2],L=(I,S)=>[I,S/2];break}const q=B(m,_),ee=L(m,_);let W=c(...ee);const J=C(h+W[0]),G=C(s+W[1]);let T=1,E=1,[y,g]=this.screenToPageTranslation(t.movementX,t.movementY);if([y,g]=D(y/l,g/p),O){const I=Math.hypot(m,_);T=E=Math.max(Math.min(Math.hypot(ee[0]-q[0]-y,ee[1]-q[1]-g)/I,1/m,1/_),u/m,w/_)}else j?T=Math.max(u,Math.min(1,Math.abs(ee[0]-q[0]-y)))/m:E=Math.max(w,Math.min(1,Math.abs(ee[1]-q[1]-g)))/_;const M=C(m*T),k=C(_*E);W=c(...L(M,k));const N=J-W[0],H=G-W[1];this.width=M,this.height=k,this.x=N,this.y=H,this.setDims(l*M,p*k),this.fixAndSetPosition()}async addAltTextButton(){if(this.#i)return;const r=this.#i=document.createElement("button");r.className="altText";const t=await v._l10nPromise.get("editor_alt_text_button_label");r.textContent=t,r.setAttribute("aria-label",t),r.tabIndex="0",r.addEventListener("contextmenu",f.noContextMenu),r.addEventListener("pointerdown",l=>l.stopPropagation()),r.addEventListener("click",l=>{l.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),r.addEventListener("keydown",l=>{l.target===r&&l.key==="Enter"&&(l.preventDefault(),this._uiManager.editAltText(this))}),this.#S(),this.div.append(r),v.SMALL_EDITOR_SIZE||(v.SMALL_EDITOR_SIZE=Math.min(128,Math.round(r.getBoundingClientRect().width*1.4)))}async#S(){const r=this.#i;if(!r)return;if(!this.#e&&!this.#t){r.classList.remove("done"),this.#n?.remove();return}v._l10nPromise.get("editor_alt_text_edit_button_label").then(l=>{r.setAttribute("aria-label",l)});let t=this.#n;if(!t){this.#n=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip");const l=t.id=`alt-text-tooltip-${this.id}`;r.setAttribute("aria-describedby",l);const p=100;r.addEventListener("mouseenter",()=>{this.#o=setTimeout(()=>{this.#o=null,this.#n.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},p)}),r.addEventListener("mouseleave",()=>{clearTimeout(this.#o),this.#o=null,this.#n?.classList.remove("show")})}r.classList.add("done"),t.innerText=this.#t?await v._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#e,t.parentNode||r.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#e,decorative:this.#t}}set altTextData({altText:r,decorative:t}){this.#e===r&&this.#t===t||(this.#e=r,this.#t=t,this.#S())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#l),this.div.addEventListener("focusout",this.#c);const[r,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/r).toFixed(2)}%`,this.div.style.maxHeight=`${(100*r/t).toFixed(2)}%`);const[l,p]=this.getInitialTranslation();return this.translate(l,p),(0,i.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(r){const{isMac:t}=o.FeatureTest.platform;if(r.button!==0||r.ctrlKey&&t){r.preventDefault();return}this.#s=!0,this.#P(r)}#P(r){if(!this._isDraggable)return;const t=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let l,p;t&&(l={passive:!0,capture:!0},p=s=>{const[m,_]=this.screenToPageTranslation(s.movementX,s.movementY);this._uiManager.dragSelectedEditors(m,_)},window.addEventListener("pointermove",p,l));const h=()=>{if(window.removeEventListener("pointerup",h),window.removeEventListener("blur",h),t&&window.removeEventListener("pointermove",p,l),this.#s=!1,!this._uiManager.endDragSession()){const{isMac:s}=o.FeatureTest.platform;r.ctrlKey&&!s||r.shiftKey||r.metaKey&&s?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",h),window.addEventListener("blur",h)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(r,t,l){r.changeParent(this),this.x=t,this.y=l,this.fixAndSetPosition()}getRect(r,t){const l=this.parentScale,[p,h]=this.pageDimensions,[s,m]=this.pageTranslation,_=r/l,u=t/l,w=this.x*p,C=this.y*h,x=this.width*p,c=this.height*h;switch(this.rotation){case 0:return[w+_+s,h-C-u-c+m,w+_+x+s,h-C-u+m];case 90:return[w+u+s,h-C+_+m,w+u+c+s,h-C+_+x+m];case 180:return[w-_-x+s,h-C+u+m,w-_+s,h-C+u+c+m];case 270:return[w-u-c+s,h-C-_-x+m,w-u+s,h-C-_+m];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(r,t){const[l,p,h,s]=r,m=h-l,_=s-p;switch(this.rotation){case 0:return[l,t-s,m,_];case 90:return[l,t-p,_,m];case 180:return[h,t-p,m,_];case 270:return[h,t-s,_,m];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#l),this.div?.addEventListener("focusout",this.#c)}serialize(r=!1,t=null){(0,o.unreachable)("An editor must be serializable")}static deserialize(r,t,l){const p=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:l});p.rotation=r.rotation;const[h,s]=p.pageDimensions,[m,_,u,w]=p.getRectInCurrentCoords(r.rect,s);return p.x=m/h,p.y=_/s,p.width=u/h,p.height=w/s,p}remove(){this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#c),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#i?.remove(),this.#i=null,this.#n=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#v(),this.#a.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#a?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(r,t){}disableEditing(){this.#i&&(this.#i.hidden=!0)}enableEditing(){this.#i&&(this.#i.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#h}set isEditing(r){this.#h=r,this.parent&&(r?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(r,t){this.#r=!0;const l=r/t,{style:p}=this.div;p.aspectRatio=l,p.height="auto"}static get MIN_SIZE(){return 16}}e.AnnotationEditor=v;class d extends v{constructor(r){super(r),this.annotationElementId=r.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=f,e.opacityToHex=v;var i=a(1),o=a(6);function f(h,s,m){for(const _ of m)s.addEventListener(_,h[_].bind(h))}function v(h){return Math.round(Math.min(255,Math.max(1,255*h))).toString(16).padStart(2,"0")}class d{#e=0;getId(){return`${i.AnnotationEditorPrefix}${this.#e++}`}}class P{#e=(0,i.getUuid)();#t=0;#i=null;static get _isSVGFittingCanvas(){const s='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',_=new OffscreenCanvas(1,3).getContext("2d"),u=new Image;u.src=s;const w=u.decode().then(()=>(_.drawImage(u,0,0,1,1,0,0,1,3),new Uint32Array(_.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,i.shadow)(this,"_isSVGFittingCanvas",w)}async#n(s,m){this.#i||=new Map;let _=this.#i.get(s);if(_===null)return null;if(_?.bitmap)return _.refCounter+=1,_;try{_||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let u;if(typeof m=="string"){_.url=m;const w=await fetch(m);if(!w.ok)throw new Error(w.statusText);u=await w.blob()}else u=_.file=m;if(u.type==="image/svg+xml"){const w=P._isSVGFittingCanvas,C=new FileReader,x=new Image,c=new Promise((b,D)=>{x.onload=()=>{_.bitmap=x,_.isSvg=!0,b()},C.onload=async()=>{const B=_.svgUrl=C.result;x.src=await w?`${B}#svgView(preserveAspectRatio(none))`:B},x.onerror=C.onerror=D});C.readAsDataURL(u),await c}else _.bitmap=await createImageBitmap(u);_.refCounter=1}catch(u){console.error(u),_=null}return this.#i.set(s,_),_&&this.#i.set(_.id,_),_}async getFromFile(s){const{lastModified:m,name:_,size:u,type:w}=s;return this.#n(`${m}_${_}_${u}_${w}`,s)}async getFromUrl(s){return this.#n(s,s)}async getFromId(s){this.#i||=new Map;const m=this.#i.get(s);return m?m.bitmap?(m.refCounter+=1,m):m.file?this.getFromFile(m.file):this.getFromUrl(m.url):null}getSvgUrl(s){const m=this.#i.get(s);return m?.isSvg?m.svgUrl:null}deleteId(s){this.#i||=new Map;const m=this.#i.get(s);m&&(m.refCounter-=1,m.refCounter===0&&(m.bitmap=null))}isValidId(s){return s.startsWith(`image_${this.#e}_`)}}class r{#e=[];#t=!1;#i;#n=-1;constructor(s=128){this.#i=s}add({cmd:s,undo:m,mustExec:_,type:u=NaN,overwriteIfSameType:w=!1,keepUndo:C=!1}){if(_&&s(),this.#t)return;const x={cmd:s,undo:m,type:u};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(x);return}if(w&&this.#e[this.#n].type===u){C&&(x.undo=this.#e[this.#n].undo),this.#e[this.#n]=x;return}const c=this.#n+1;c===this.#i?this.#e.splice(0,1):(this.#n=c,c<this.#e.length&&this.#e.splice(c)),this.#e.push(x)}undo(){this.#n!==-1&&(this.#t=!0,this.#e[this.#n].undo(),this.#t=!1,this.#n-=1)}redo(){this.#n<this.#e.length-1&&(this.#n+=1,this.#t=!0,this.#e[this.#n].cmd(),this.#t=!1)}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}destroy(){this.#e=null}}e.CommandManager=r;class t{constructor(s){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:m}=i.FeatureTest.platform;for(const[_,u,w={}]of s)for(const C of _){const x=C.startsWith("mac+");m&&x?(this.callbacks.set(C.slice(4),{callback:u,options:w}),this.allKeys.add(C.split("+").at(-1))):!m&&!x&&(this.callbacks.set(C,{callback:u,options:w}),this.allKeys.add(C.split("+").at(-1)))}}#e(s){s.altKey&&this.buffer.push("alt"),s.ctrlKey&&this.buffer.push("ctrl"),s.metaKey&&this.buffer.push("meta"),s.shiftKey&&this.buffer.push("shift"),this.buffer.push(s.key);const m=this.buffer.join("+");return this.buffer.length=0,m}exec(s,m){if(!this.allKeys.has(m.key))return;const _=this.callbacks.get(this.#e(m));if(!_)return;const{callback:u,options:{bubbles:w=!1,args:C=[],checker:x=null}}=_;x&&!x(s,m)||(u.bind(s,...C)(),w||(m.stopPropagation(),m.preventDefault()))}}e.KeyboardManager=t;class l{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const s=new Map([["CanvasText",null],["Canvas",null]]);return(0,o.getColorValues)(s),(0,i.shadow)(this,"_colors",s)}convert(s){const m=(0,o.getRGB)(s);if(!window.matchMedia("(forced-colors: active)").matches)return m;for(const[_,u]of this._colors)if(u.every((w,C)=>w===m[C]))return l._colorsMapping.get(_);return m}getHexCode(s){const m=this._colors.get(s);return m?i.Util.makeHexColor(...m):s}}e.ColorManager=l;class p{#e=null;#t=new Map;#i=new Map;#n=null;#o=null;#r=new r;#a=0;#l=new Set;#c=null;#s=null;#h=new Set;#d=null;#f=new d;#p=!1;#g=!1;#m=null;#_=i.AnnotationEditorType.NONE;#u=new Set;#v=null;#w=this.blur.bind(this);#y=this.focus.bind(this);#S=this.copy.bind(this);#P=this.cut.bind(this);#D=this.paste.bind(this);#R=this.keydown.bind(this);#k=this.onEditingAction.bind(this);#b=this.onPageChanging.bind(this);#T=this.onScaleChanging.bind(this);#x=this.onRotationChanging.bind(this);#M={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#A=[0,0];#C=null;#L=null;#N=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const s=p.prototype,m=w=>{const{activeElement:C}=document;return C&&w.#L.contains(C)&&w.hasSomethingToControl()},_=this.TRANSLATE_SMALL,u=this.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new t([[["ctrl+a","mac+meta+a"],s.selectAll],[["ctrl+z","mac+meta+z"],s.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],s.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],s.delete],[["Escape","mac+Escape"],s.unselectAll],[["ArrowLeft","mac+ArrowLeft"],s.translateSelectedEditors,{args:[-_,0],checker:m}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],s.translateSelectedEditors,{args:[-u,0],checker:m}],[["ArrowRight","mac+ArrowRight"],s.translateSelectedEditors,{args:[_,0],checker:m}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],s.translateSelectedEditors,{args:[u,0],checker:m}],[["ArrowUp","mac+ArrowUp"],s.translateSelectedEditors,{args:[0,-_],checker:m}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],s.translateSelectedEditors,{args:[0,-u],checker:m}],[["ArrowDown","mac+ArrowDown"],s.translateSelectedEditors,{args:[0,_],checker:m}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],s.translateSelectedEditors,{args:[0,u],checker:m}]]))}constructor(s,m,_,u,w,C){this.#L=s,this.#N=m,this.#n=_,this._eventBus=u,this._eventBus._on("editingaction",this.#k),this._eventBus._on("pagechanging",this.#b),this._eventBus._on("scalechanging",this.#T),this._eventBus._on("rotationchanging",this.#x),this.#o=w.annotationStorage,this.#d=w.filterFactory,this.#v=C,this.viewParameters={realScale:o.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#I(),this.#V(),this._eventBus._off("editingaction",this.#k),this._eventBus._off("pagechanging",this.#b),this._eventBus._off("scalechanging",this.#T),this._eventBus._off("rotationchanging",this.#x);for(const s of this.#i.values())s.destroy();this.#i.clear(),this.#t.clear(),this.#h.clear(),this.#e=null,this.#u.clear(),this.#r.destroy(),this.#n.destroy()}get hcmFilter(){return(0,i.shadow)(this,"hcmFilter",this.#v?this.#d.addHCMFilter(this.#v.foreground,this.#v.background):"none")}get direction(){return(0,i.shadow)(this,"direction",getComputedStyle(this.#L).direction)}editAltText(s){this.#n?.editAltText(this,s)}onPageChanging({pageNumber:s}){this.#a=s-1}focusMainContainer(){this.#L.focus()}findParent(s,m){for(const _ of this.#i.values()){const{x:u,y:w,width:C,height:x}=_.div.getBoundingClientRect();if(s>=u&&s<=u+C&&m>=w&&m<=w+x)return _}return null}disableUserSelect(s=!1){this.#N.classList.toggle("noUserSelect",s)}addShouldRescale(s){this.#h.add(s)}removeShouldRescale(s){this.#h.delete(s)}onScaleChanging({scale:s}){this.commitOrRemove(),this.viewParameters.realScale=s*o.PixelsPerInch.PDF_TO_CSS_UNITS;for(const m of this.#h)m.onScaleChanging()}onRotationChanging({pagesRotation:s}){this.commitOrRemove(),this.viewParameters.rotation=s}addToAnnotationStorage(s){!s.isEmpty()&&this.#o&&!this.#o.has(s.id)&&this.#o.setValue(s.id,s)}#B(){window.addEventListener("focus",this.#y),window.addEventListener("blur",this.#w)}#V(){window.removeEventListener("focus",this.#y),window.removeEventListener("blur",this.#w)}blur(){if(!this.hasSelection)return;const{activeElement:s}=document;for(const m of this.#u)if(m.div.contains(s)){this.#m=[m,s],m._focusEventsAllowed=!1;break}}focus(){if(!this.#m)return;const[s,m]=this.#m;this.#m=null,m.addEventListener("focusin",()=>{s._focusEventsAllowed=!0},{once:!0}),m.focus()}#U(){window.addEventListener("keydown",this.#R,{capture:!0})}#I(){window.removeEventListener("keydown",this.#R,{capture:!0})}#O(){document.addEventListener("copy",this.#S),document.addEventListener("cut",this.#P),document.addEventListener("paste",this.#D)}#F(){document.removeEventListener("copy",this.#S),document.removeEventListener("cut",this.#P),document.removeEventListener("paste",this.#D)}addEditListeners(){this.#U(),this.#O()}removeEditListeners(){this.#I(),this.#F()}copy(s){if(s.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const m=[];for(const _ of this.#u){const u=_.serialize(!0);u&&m.push(u)}m.length!==0&&s.clipboardData.setData("application/pdfjs",JSON.stringify(m))}cut(s){this.copy(s),this.delete()}paste(s){s.preventDefault();const{clipboardData:m}=s;for(const w of m.items)for(const C of this.#s)if(C.isHandlingMimeForPasting(w.type)){C.paste(w,this.currentLayer);return}let _=m.getData("application/pdfjs");if(!_)return;try{_=JSON.parse(_)}catch(w){(0,i.warn)(`paste: "${w.message}".`);return}if(!Array.isArray(_))return;this.unselectAll();const u=this.currentLayer;try{const w=[];for(const c of _){const b=u.deserialize(c);if(!b)return;w.push(b)}const C=()=>{for(const c of w)this.#$(c);this.#W(w)},x=()=>{for(const c of w)c.remove()};this.addCommands({cmd:C,undo:x,mustExec:!0})}catch(w){(0,i.warn)(`paste: "${w.message}".`)}}keydown(s){this.getActive()?.shouldGetKeyboardEvents()||p._keyboardManager.exec(this,s)}onEditingAction(s){["undo","redo","delete","selectAll"].includes(s.name)&&this[s.name]()}#E(s){Object.entries(s).some(([_,u])=>this.#M[_]!==u)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#M,s)})}#H(s){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:s})}setEditingState(s){s?(this.#B(),this.#U(),this.#O(),this.#E({isEditing:this.#_!==i.AnnotationEditorType.NONE,isEmpty:this.#j(),hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:this.#r.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#V(),this.#I(),this.#F(),this.#E({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(s){if(!this.#s){this.#s=s;for(const m of this.#s)this.#H(m.defaultPropertiesToUpdate)}}getId(){return this.#f.getId()}get currentLayer(){return this.#i.get(this.#a)}getLayer(s){return this.#i.get(s)}get currentPageIndex(){return this.#a}addLayer(s){this.#i.set(s.pageIndex,s),this.#p?s.enable():s.disable()}removeLayer(s){this.#i.delete(s.pageIndex)}updateMode(s,m=null){if(this.#_!==s){if(this.#_=s,s===i.AnnotationEditorType.NONE){this.setEditingState(!1),this.#G();return}this.setEditingState(!0),this.#z(),this.unselectAll();for(const _ of this.#i.values())_.updateMode(s);if(m){for(const _ of this.#t.values())if(_.annotationElementId===m){this.setSelected(_),_.enterInEditMode();break}}}}updateToolbar(s){s!==this.#_&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:s})}updateParams(s,m){if(this.#s){if(s===i.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(s);return}for(const _ of this.#u)_.updateParams(s,m);for(const _ of this.#s)_.updateDefaultParams(s,m)}}enableWaiting(s=!1){if(this.#g!==s){this.#g=s;for(const m of this.#i.values())s?m.disableClick():m.enableClick(),m.div.classList.toggle("waiting",s)}}#z(){if(!this.#p){this.#p=!0;for(const s of this.#i.values())s.enable()}}#G(){if(this.unselectAll(),this.#p){this.#p=!1;for(const s of this.#i.values())s.disable()}}getEditors(s){const m=[];for(const _ of this.#t.values())_.pageIndex===s&&m.push(_);return m}getEditor(s){return this.#t.get(s)}addEditor(s){this.#t.set(s.id,s)}removeEditor(s){this.#t.delete(s.id),this.unselect(s),(!s.annotationElementId||!this.#l.has(s.annotationElementId))&&this.#o?.remove(s.id)}addDeletedAnnotationElement(s){this.#l.add(s.annotationElementId),s.deleted=!0}isDeletedAnnotationElement(s){return this.#l.has(s)}removeDeletedAnnotationElement(s){this.#l.delete(s.annotationElementId),s.deleted=!1}#$(s){const m=this.#i.get(s.pageIndex);m?m.addOrRebuild(s):this.addEditor(s)}setActiveEditor(s){this.#e!==s&&(this.#e=s,s&&this.#H(s.propertiesToUpdate))}toggleSelected(s){if(this.#u.has(s)){this.#u.delete(s),s.unselect(),this.#E({hasSelectedEditor:this.hasSelection});return}this.#u.add(s),s.select(),this.#H(s.propertiesToUpdate),this.#E({hasSelectedEditor:!0})}setSelected(s){for(const m of this.#u)m!==s&&m.unselect();this.#u.clear(),this.#u.add(s),s.select(),this.#H(s.propertiesToUpdate),this.#E({hasSelectedEditor:!0})}isSelected(s){return this.#u.has(s)}unselect(s){s.unselect(),this.#u.delete(s),this.#E({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#u.size!==0}undo(){this.#r.undo(),this.#E({hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#j()})}redo(){this.#r.redo(),this.#E({hasSomethingToUndo:!0,hasSomethingToRedo:this.#r.hasSomethingToRedo(),isEmpty:this.#j()})}addCommands(s){this.#r.add(s),this.#E({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#j()})}#j(){if(this.#t.size===0)return!0;if(this.#t.size===1)for(const s of this.#t.values())return s.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const s=[...this.#u],m=()=>{for(const u of s)u.remove()},_=()=>{for(const u of s)this.#$(u)};this.addCommands({cmd:m,undo:_,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#W(s){this.#u.clear();for(const m of s)m.isEmpty()||(this.#u.add(m),m.select());this.#E({hasSelectedEditor:!0})}selectAll(){for(const s of this.#u)s.commit();this.#W(this.#t.values())}unselectAll(){if(this.#e){this.#e.commitOrRemove();return}if(this.hasSelection){for(const s of this.#u)s.unselect();this.#u.clear(),this.#E({hasSelectedEditor:!1})}}translateSelectedEditors(s,m,_=!1){if(_||this.commitOrRemove(),!this.hasSelection)return;this.#A[0]+=s,this.#A[1]+=m;const[u,w]=this.#A,C=[...this.#u],x=1e3;this.#C&&clearTimeout(this.#C),this.#C=setTimeout(()=>{this.#C=null,this.#A[0]=this.#A[1]=0,this.addCommands({cmd:()=>{for(const c of C)this.#t.has(c.id)&&c.translateInPage(u,w)},undo:()=>{for(const c of C)this.#t.has(c.id)&&c.translateInPage(-u,-w)},mustExec:!1})},x);for(const c of C)c.translateInPage(s,m)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#c=new Map;for(const s of this.#u)this.#c.set(s,{savedX:s.x,savedY:s.y,savedPageIndex:s.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#c)return!1;this.disableUserSelect(!1);const s=this.#c;this.#c=null;let m=!1;for(const[{x:u,y:w,pageIndex:C},x]of s)x.newX=u,x.newY=w,x.newPageIndex=C,m||=u!==x.savedX||w!==x.savedY||C!==x.savedPageIndex;if(!m)return!1;const _=(u,w,C,x)=>{if(this.#t.has(u.id)){const c=this.#i.get(x);c?u._setParentAndPosition(c,w,C):(u.pageIndex=x,u.x=w,u.y=C)}};return this.addCommands({cmd:()=>{for(const[u,{newX:w,newY:C,newPageIndex:x}]of s)_(u,w,C,x)},undo:()=>{for(const[u,{savedX:w,savedY:C,savedPageIndex:x}]of s)_(u,w,C,x)},mustExec:!0}),!0}dragSelectedEditors(s,m){if(this.#c)for(const _ of this.#c.keys())_.drag(s,m)}rebuild(s){if(s.parent===null){const m=this.getLayer(s.pageIndex);m?(m.changeParent(s),m.addOrRebuild(s)):(this.addEditor(s),this.addToAnnotationStorage(s),s.rebuild())}else s.parent.addOrRebuild(s)}isActive(s){return this.#e===s}getActive(){return this.#e}getMode(){return this.#_}get imageManager(){return(0,i.shadow)(this,"imageManager",new P)}}e.AnnotationEditorUIManager=p},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=D,e.getColorValues=q,e.getCurrentTransform=ee,e.getCurrentTransformInverse=W,e.getFilenameFromUrl=u,e.getPdfFilenameFromUrl=w,e.getRGB=j,e.getXfaPageViewport=O,e.isDataScheme=m,e.isPdfFile=_,e.isValidFetchUrl=x,e.loadScript=b,e.noContextMenu=c,e.setLayerDimensions=J;var i=a(7),o=a(1);const f="http://www.w3.org/2000/svg";class v{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}e.PixelsPerInch=v;class d extends i.BaseFilterFactory{#e;#t;#i;#n;#o;#r;#a;#l;#c;#s;#h=0;constructor({docId:T,ownerDocument:E=globalThis.document}={}){super(),this.#i=T,this.#n=E}get#d(){return this.#e||=new Map}get#f(){if(!this.#t){const T=this.#n.createElement("div"),{style:E}=T;E.visibility="hidden",E.contain="strict",E.width=E.height=0,E.position="absolute",E.top=E.left=0,E.zIndex=-1;const y=this.#n.createElementNS(f,"svg");y.setAttribute("width",0),y.setAttribute("height",0),this.#t=this.#n.createElementNS(f,"defs"),T.append(y),y.append(this.#t),this.#n.body.append(T)}return this.#t}addFilter(T){if(!T)return"none";let E=this.#d.get(T);if(E)return E;let y,g,M,k;if(T.length===1){const S=T[0],F=new Array(256);for(let R=0;R<256;R++)F[R]=S[R]/255;k=y=g=M=F.join(",")}else{const[S,F,R]=T,U=new Array(256),V=new Array(256),$=new Array(256);for(let X=0;X<256;X++)U[X]=S[X]/255,V[X]=F[X]/255,$[X]=R[X]/255;y=U.join(","),g=V.join(","),M=$.join(","),k=`${y}${g}${M}`}if(E=this.#d.get(k),E)return this.#d.set(T,E),E;const N=`g_${this.#i}_transfer_map_${this.#h++}`,H=`url(#${N})`;this.#d.set(T,H),this.#d.set(k,H);const I=this.#g(N);return this.#_(y,g,M,I),H}addHCMFilter(T,E){const y=`${T}-${E}`;if(this.#r===y)return this.#a;if(this.#r=y,this.#a="none",this.#o?.remove(),!T||!E)return this.#a;const g=this.#u(T);T=o.Util.makeHexColor(...g);const M=this.#u(E);if(E=o.Util.makeHexColor(...M),this.#f.style.color="",T==="#000000"&&E==="#ffffff"||T===E)return this.#a;const k=new Array(256);for(let F=0;F<=255;F++){const R=F/255;k[F]=R<=.03928?R/12.92:((R+.055)/1.055)**2.4}const N=k.join(","),H=`g_${this.#i}_hcm_filter`,I=this.#l=this.#g(H);this.#_(N,N,N,I),this.#p(I);const S=(F,R)=>{const U=g[F]/255,V=M[F]/255,$=new Array(R+1);for(let X=0;X<=R;X++)$[X]=U+X/R*(V-U);return $.join(",")};return this.#_(S(0,5),S(1,5),S(2,5),I),this.#a=`url(#${H})`,this.#a}addHighlightHCMFilter(T,E,y,g){const M=`${T}-${E}-${y}-${g}`;if(this.#c===M)return this.#s;if(this.#c=M,this.#s="none",this.#l?.remove(),!T||!E)return this.#s;const[k,N]=[T,E].map(this.#u.bind(this));let H=Math.round(.2126*k[0]+.7152*k[1]+.0722*k[2]),I=Math.round(.2126*N[0]+.7152*N[1]+.0722*N[2]),[S,F]=[y,g].map(this.#u.bind(this));I<H&&([H,I,S,F]=[I,H,F,S]),this.#f.style.color="";const R=($,X,ie)=>{const oe=new Array(256),ne=(I-H)/ie,z=$/255,K=(X-$)/(255*ie);let Q=0;for(let Y=0;Y<=ie;Y++){const se=Math.round(H+Y*ne),ae=z+Y*K;for(let ce=Q;ce<=se;ce++)oe[ce]=ae;Q=se+1}for(let Y=Q;Y<256;Y++)oe[Y]=oe[Q-1];return oe.join(",")},U=`g_${this.#i}_hcm_highlight_filter`,V=this.#l=this.#g(U);return this.#p(V),this.#_(R(S[0],F[0],5),R(S[1],F[1],5),R(S[2],F[2],5),V),this.#s=`url(#${U})`,this.#s}destroy(T=!1){T&&(this.#a||this.#s)||(this.#t&&(this.#t.parentNode.parentNode.remove(),this.#t=null),this.#e&&(this.#e.clear(),this.#e=null),this.#h=0)}#p(T){const E=this.#n.createElementNS(f,"feColorMatrix");E.setAttribute("type","matrix"),E.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),T.append(E)}#g(T){const E=this.#n.createElementNS(f,"filter");return E.setAttribute("color-interpolation-filters","sRGB"),E.setAttribute("id",T),this.#f.append(E),E}#m(T,E,y){const g=this.#n.createElementNS(f,E);g.setAttribute("type","discrete"),g.setAttribute("tableValues",y),T.append(g)}#_(T,E,y,g){const M=this.#n.createElementNS(f,"feComponentTransfer");g.append(M),this.#m(M,"feFuncR",T),this.#m(M,"feFuncG",E),this.#m(M,"feFuncB",y)}#u(T){return this.#f.style.color=T,j(getComputedStyle(this.#f).getPropertyValue("color"))}}e.DOMFilterFactory=d;class P extends i.BaseCanvasFactory{constructor({ownerDocument:T=globalThis.document}={}){super(),this._document=T}_createCanvas(T,E){const y=this._document.createElement("canvas");return y.width=T,y.height=E,y}}e.DOMCanvasFactory=P;async function r(G,T=!1){if(x(G,document.baseURI)){const E=await fetch(G);if(!E.ok)throw new Error(E.statusText);return T?new Uint8Array(await E.arrayBuffer()):(0,o.stringToBytes)(await E.text())}return new Promise((E,y)=>{const g=new XMLHttpRequest;g.open("GET",G,!0),T&&(g.responseType="arraybuffer"),g.onreadystatechange=()=>{if(g.readyState===XMLHttpRequest.DONE){if(g.status===200||g.status===0){let M;if(T&&g.response?M=new Uint8Array(g.response):!T&&g.responseText&&(M=(0,o.stringToBytes)(g.responseText)),M){E(M);return}}y(new Error(g.statusText))}},g.send(null)})}class t extends i.BaseCMapReaderFactory{_fetchData(T,E){return r(T,this.isCompressed).then(y=>({cMapData:y,compressionType:E}))}}e.DOMCMapReaderFactory=t;class l extends i.BaseStandardFontDataFactory{_fetchData(T){return r(T,!0)}}e.DOMStandardFontDataFactory=l;class p extends i.BaseSVGFactory{_createSVG(T){return document.createElementNS(f,T)}}e.DOMSVGFactory=p;class h{constructor({viewBox:T,scale:E,rotation:y,offsetX:g=0,offsetY:M=0,dontFlip:k=!1}){this.viewBox=T,this.scale=E,this.rotation=y,this.offsetX=g,this.offsetY=M;const N=(T[2]+T[0])/2,H=(T[3]+T[1])/2;let I,S,F,R;switch(y%=360,y<0&&(y+=360),y){case 180:I=-1,S=0,F=0,R=1;break;case 90:I=0,S=1,F=1,R=0;break;case 270:I=0,S=-1,F=-1,R=0;break;case 0:I=1,S=0,F=0,R=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}k&&(F=-F,R=-R);let U,V,$,X;I===0?(U=Math.abs(H-T[1])*E+g,V=Math.abs(N-T[0])*E+M,$=(T[3]-T[1])*E,X=(T[2]-T[0])*E):(U=Math.abs(N-T[0])*E+g,V=Math.abs(H-T[1])*E+M,$=(T[2]-T[0])*E,X=(T[3]-T[1])*E),this.transform=[I*E,S*E,F*E,R*E,U-I*E*N-F*E*H,V-S*E*N-R*E*H],this.width=$,this.height=X}get rawDims(){const{viewBox:T}=this;return(0,o.shadow)(this,"rawDims",{pageWidth:T[2]-T[0],pageHeight:T[3]-T[1],pageX:T[0],pageY:T[1]})}clone({scale:T=this.scale,rotation:E=this.rotation,offsetX:y=this.offsetX,offsetY:g=this.offsetY,dontFlip:M=!1}={}){return new h({viewBox:this.viewBox.slice(),scale:T,rotation:E,offsetX:y,offsetY:g,dontFlip:M})}convertToViewportPoint(T,E){return o.Util.applyTransform([T,E],this.transform)}convertToViewportRectangle(T){const E=o.Util.applyTransform([T[0],T[1]],this.transform),y=o.Util.applyTransform([T[2],T[3]],this.transform);return[E[0],E[1],y[0],y[1]]}convertToPdfPoint(T,E){return o.Util.applyInverseTransform([T,E],this.transform)}}e.PageViewport=h;class s extends o.BaseException{constructor(T,E=0){super(T,"RenderingCancelledException"),this.extraDelay=E}}e.RenderingCancelledException=s;function m(G){const T=G.length;let E=0;for(;E<T&&G[E].trim()==="";)E++;return G.substring(E,E+5).toLowerCase()==="data:"}function _(G){return typeof G=="string"&&/\.pdf$/i.test(G)}function u(G,T=!1){return T||([G]=G.split(/[#?]/,1)),G.substring(G.lastIndexOf("/")+1)}function w(G,T="document.pdf"){if(typeof G!="string")return T;if(m(G))return(0,o.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),T;const E=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,y=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,g=E.exec(G);let M=y.exec(g[1])||y.exec(g[2])||y.exec(g[3]);if(M&&(M=M[0],M.includes("%")))try{M=y.exec(decodeURIComponent(M))[0]}catch{}return M||T}class C{started=Object.create(null);times=[];time(T){T in this.started&&(0,o.warn)(`Timer is already running for ${T}`),this.started[T]=Date.now()}timeEnd(T){T in this.started||(0,o.warn)(`Timer has not been started for ${T}`),this.times.push({name:T,start:this.started[T],end:Date.now()}),delete this.started[T]}toString(){const T=[];let E=0;for(const{name:y}of this.times)E=Math.max(y.length,E);for(const{name:y,start:g,end:M}of this.times)T.push(`${y.padEnd(E)} ${M-g}ms
`);return T.join("")}}e.StatTimer=C;function x(G,T){try{const{protocol:E}=T?new URL(G,T):new URL(G);return E==="http:"||E==="https:"}catch{return!1}}function c(G){G.preventDefault()}function b(G,T=!1){return new Promise((E,y)=>{const g=document.createElement("script");g.src=G,g.onload=function(M){T&&g.remove(),E(M)},g.onerror=function(){y(new Error(`Cannot load script at: ${g.src}`))},(document.head||document.documentElement).append(g)})}function D(G){console.log("Deprecated API usage: "+G)}let B;class L{static toDateObject(T){if(!T||typeof T!="string")return null;B||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const E=B.exec(T);if(!E)return null;const y=parseInt(E[1],10);let g=parseInt(E[2],10);g=g>=1&&g<=12?g-1:0;let M=parseInt(E[3],10);M=M>=1&&M<=31?M:1;let k=parseInt(E[4],10);k=k>=0&&k<=23?k:0;let N=parseInt(E[5],10);N=N>=0&&N<=59?N:0;let H=parseInt(E[6],10);H=H>=0&&H<=59?H:0;const I=E[7]||"Z";let S=parseInt(E[8],10);S=S>=0&&S<=23?S:0;let F=parseInt(E[9],10)||0;return F=F>=0&&F<=59?F:0,I==="-"?(k+=S,N+=F):I==="+"&&(k-=S,N-=F),new Date(Date.UTC(y,g,M,k,N,H))}}e.PDFDateString=L;function O(G,{scale:T=1,rotation:E=0}){const{width:y,height:g}=G.attributes.style,M=[0,0,parseInt(y),parseInt(g)];return new h({viewBox:M,scale:T,rotation:E})}function j(G){if(G.startsWith("#")){const T=parseInt(G.slice(1),16);return[(T&16711680)>>16,(T&65280)>>8,T&255]}return G.startsWith("rgb(")?G.slice(4,-1).split(",").map(T=>parseInt(T)):G.startsWith("rgba(")?G.slice(5,-1).split(",").map(T=>parseInt(T)).slice(0,3):((0,o.warn)(`Not a valid color format: "${G}"`),[0,0,0])}function q(G){const T=document.createElement("span");T.style.visibility="hidden",document.body.append(T);for(const E of G.keys()){T.style.color=E;const y=window.getComputedStyle(T).color;G.set(E,j(y))}T.remove()}function ee(G){const{a:T,b:E,c:y,d:g,e:M,f:k}=G.getTransform();return[T,E,y,g,M,k]}function W(G){const{a:T,b:E,c:y,d:g,e:M,f:k}=G.getTransform().invertSelf();return[T,E,y,g,M,k]}function J(G,T,E=!1,y=!0){if(T instanceof h){const{pageWidth:g,pageHeight:M}=T.rawDims,{style:k}=G,N=o.FeatureTest.isCSSRoundSupported,H=`var(--scale-factor) * ${g}px`,I=`var(--scale-factor) * ${M}px`,S=N?`round(${H}, 1px)`:`calc(${H})`,F=N?`round(${I}, 1px)`:`calc(${I})`;!E||T.rotation%180===0?(k.width=S,k.height=F):(k.width=F,k.height=S)}y&&G.setAttribute("data-main-rotation",T.rotation)}},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var i=a(1);class o{constructor(){this.constructor===o&&(0,i.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,l){return"none"}addHighlightHCMFilter(t,l,p,h){return"none"}destroy(t=!1){}}e.BaseFilterFactory=o;class f{constructor(){this.constructor===f&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(t,l){if(t<=0||l<=0)throw new Error("Invalid canvas size");const p=this._createCanvas(t,l);return{canvas:p,context:p.getContext("2d")}}reset(t,l,p){if(!t.canvas)throw new Error("Canvas is not specified");if(l<=0||p<=0)throw new Error("Invalid canvas size");t.canvas.width=l,t.canvas.height=p}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,l){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=f;class v{constructor({baseUrl:t=null,isCompressed:l=!0}){this.constructor===v&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=l}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const l=this.baseUrl+t+(this.isCompressed?".bcmap":""),p=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE;return this._fetchData(l,p).catch(h=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${l}`)})}_fetchData(t,l){(0,i.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=v;class d{constructor({baseUrl:t=null}){this.constructor===d&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const l=`${this.baseUrl}${t}`;return this._fetchData(l).catch(p=>{throw new Error(`Unable to load font data at: ${l}`)})}_fetchData(t){(0,i.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=d;class P{constructor(){this.constructor===P&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(t,l,p=!1){if(t<=0||l<=0)throw new Error("Invalid SVG dimensions");const h=this._createSVG("svg:svg");return h.setAttribute("version","1.1"),p||(h.setAttribute("width",`${t}px`),h.setAttribute("height",`${l}px`)),h.setAttribute("preserveAspectRatio","none"),h.setAttribute("viewBox",`0 0 ${t} ${l}`),h}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){(0,i.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=P},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var i=a(1);const o=3285377520,f=4294901760,v=65535;class d{constructor(r){this.h1=r?r&4294967295:o,this.h2=r?r&4294967295:o}update(r){let t,l;if(typeof r=="string"){t=new Uint8Array(r.length*2),l=0;for(let D=0,B=r.length;D<B;D++){const L=r.charCodeAt(D);L<=255?t[l++]=L:(t[l++]=L>>>8,t[l++]=L&255)}}else if((0,i.isArrayBuffer)(r))t=r.slice(),l=t.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const p=l>>2,h=l-p*4,s=new Uint32Array(t.buffer,0,p);let m=0,_=0,u=this.h1,w=this.h2;const C=3432918353,x=461845907,c=C&v,b=x&v;for(let D=0;D<p;D++)D&1?(m=s[D],m=m*C&f|m*c&v,m=m<<15|m>>>17,m=m*x&f|m*b&v,u^=m,u=u<<13|u>>>19,u=u*5+3864292196):(_=s[D],_=_*C&f|_*c&v,_=_<<15|_>>>17,_=_*x&f|_*b&v,w^=_,w=w<<13|w>>>19,w=w*5+3864292196);switch(m=0,h){case 3:m^=t[p*4+2]<<16;case 2:m^=t[p*4+1]<<8;case 1:m^=t[p*4],m=m*C&f|m*c&v,m=m<<15|m>>>17,m=m*x&f|m*b&v,p&1?u^=m:w^=m}this.h1=u,this.h2=w}hexdigest(){let r=this.h1,t=this.h2;return r^=t>>>1,r=r*3981806797&f|r*36045&v,t=t*4283543511&f|((t<<16|r>>>16)*2950163797&f)>>>16,r^=t>>>1,r=r*444984403&f|r*60499&v,t=t*3301882366&f|((t<<16|r>>>16)*3120437893&f)>>>16,r^=t>>>1,(r>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=d},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var i=a(1);class o{#e=new Set;constructor({ownerDocument:d=globalThis.document,styleElement:P=null}){this._document=d,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(d){this.nativeFontFaces.add(d),this._document.fonts.add(d)}removeNativeFontFace(d){this.nativeFontFaces.delete(d),this._document.fonts.delete(d)}insertRule(d){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const P=this.styleElement.sheet;P.insertRule(d,P.cssRules.length)}clear(){for(const d of this.nativeFontFaces)this._document.fonts.delete(d);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(d){if(!(!d||this.#e.has(d.loadedName))){if((0,i.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:P,src:r,style:t}=d,l=new FontFace(P,r,t);this.addNativeFontFace(l);try{await l.load(),this.#e.add(P)}catch{(0,i.warn)(`Cannot load system font: ${d.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}(0,i.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(d){if(d.attached||d.missingFile&&!d.systemFontInfo)return;if(d.attached=!0,d.systemFontInfo){await this.loadSystemFont(d.systemFontInfo);return}if(this.isFontLoadingAPISupported){const r=d.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(t){throw(0,i.warn)(`Failed to load font '${r.family}': '${t}'.`),d.disableFontFace=!0,t}}return}const P=d.createFontFaceRule();if(P){if(this.insertRule(P),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const t=this._queueLoadingCallback(r);this._prepareFontLoadEvent(d,t)})}}get isFontLoadingAPISupported(){const d=!!this._document?.fonts;return(0,i.shadow)(this,"isFontLoadingAPISupported",d)}get isSyncFontLoadingSupported(){let d=!1;return(i.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(d=!0),(0,i.shadow)(this,"isSyncFontLoadingSupported",d)}_queueLoadingCallback(d){function P(){for((0,i.assert)(!t.done,"completeRequest() cannot be called twice."),t.done=!0;r.length>0&&r[0].done;){const l=r.shift();setTimeout(l.callback,0)}}const{loadingRequests:r}=this,t={done:!1,complete:P,callback:d};return r.push(t),t}get _loadTestFont(){const d=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,i.shadow)(this,"_loadTestFont",d)}_prepareFontLoadEvent(d,P){function r(O,j){return O.charCodeAt(j)<<24|O.charCodeAt(j+1)<<16|O.charCodeAt(j+2)<<8|O.charCodeAt(j+3)&255}function t(O,j,q,ee){const W=O.substring(0,j),J=O.substring(j+q);return W+ee+J}let l,p;const h=this._document.createElement("canvas");h.width=1,h.height=1;const s=h.getContext("2d");let m=0;function _(O,j){if(++m>30){(0,i.warn)("Load test font never loaded."),j();return}if(s.font="30px "+O,s.fillText(".",0,20),s.getImageData(0,0,1,1).data[3]>0){j();return}setTimeout(_.bind(null,O,j))}const u=`lt${Date.now()}${this.loadTestFontId++}`;let w=this._loadTestFont;w=t(w,976,u.length,u);const x=16,c=1482184792;let b=r(w,x);for(l=0,p=u.length-3;l<p;l+=4)b=b-c+r(u,l)|0;l<u.length&&(b=b-c+r(u+"XXX",l)|0),w=t(w,x,4,(0,i.string32)(b));const D=`url(data:font/opentype;base64,${btoa(w)});`,B=`@font-face {font-family:"${u}";src:${D}}`;this.insertRule(B);const L=this._document.createElement("div");L.style.visibility="hidden",L.style.width=L.style.height="10px",L.style.position="absolute",L.style.top=L.style.left="0px";for(const O of[d.loadedName,u]){const j=this._document.createElement("span");j.textContent="Hi",j.style.fontFamily=O,L.append(j)}this._document.body.append(L),_(u,()=>{L.remove(),P.complete()})}}e.FontLoader=o;class f{constructor(d,{isEvalSupported:P=!0,disableFontFace:r=!1,ignoreErrors:t=!1,inspectFont:l=null}){this.compiledGlyphs=Object.create(null);for(const p in d)this[p]=d[p];this.isEvalSupported=P!==!1,this.disableFontFace=r===!0,this.ignoreErrors=t===!0,this._inspectFont=l}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let d;if(!this.cssFontInfo)d=new FontFace(this.loadedName,this.data,{});else{const P={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(P.style=`oblique ${this.cssFontInfo.italicAngle}deg`),d=new FontFace(this.cssFontInfo.fontFamily,this.data,P)}return this._inspectFont?.(this),d}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const d=(0,i.bytesToString)(this.data),P=`url(data:${this.mimetype};base64,${btoa(d)});`;let r;if(!this.cssFontInfo)r=`@font-face {font-family:"${this.loadedName}";src:${P}}`;else{let t=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(t+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),r=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${t}src:${P}}`}return this._inspectFont?.(this,P),r}getPathGenerator(d,P){if(this.compiledGlyphs[P]!==void 0)return this.compiledGlyphs[P];let r;try{r=d.get(this.loadedName+"_path_"+P)}catch(t){if(!this.ignoreErrors)throw t;return(0,i.warn)(`getPathGenerator - ignoring character: "${t}".`),this.compiledGlyphs[P]=function(l,p){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){const t=[];for(const l of r){const p=l.args!==void 0?l.args.join(","):"";t.push("c.",l.cmd,"(",p,`);
`)}return this.compiledGlyphs[P]=new Function("c","size",t.join(""))}return this.compiledGlyphs[P]=function(t,l){for(const p of r)p.cmd==="scale"&&(p.args=[l,-l]),t[p.cmd].apply(t,p.args)}}}e.FontFaceObject=f},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var i=a(7);a(1);const o=function(r){return new Promise((t,l)=>{require$$5.readFile(r,(h,s)=>{if(h||!s){l(new Error(h));return}t(new Uint8Array(s))})})};class f extends i.BaseFilterFactory{}e.NodeFilterFactory=f;class v extends i.BaseCanvasFactory{_createCanvas(t,l){return require$$5.createCanvas(t,l)}}e.NodeCanvasFactory=v;class d extends i.BaseCMapReaderFactory{_fetchData(t,l){return o(t).then(p=>({cMapData:p,compressionType:l}))}}e.NodeCMapReaderFactory=d;class P extends i.BaseStandardFontDataFactory{_fetchData(t){return o(t)}}e.NodeStandardFontDataFactory=P},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var i=a(1),o=a(6),f=a(12),v=a(13);const d=16,P=100,r=4096,t=15,l=10,p=1e3,h=16;function s(E,y){if(E._removeMirroring)throw new Error("Context is already forwarding operations.");E.__originalSave=E.save,E.__originalRestore=E.restore,E.__originalRotate=E.rotate,E.__originalScale=E.scale,E.__originalTranslate=E.translate,E.__originalTransform=E.transform,E.__originalSetTransform=E.setTransform,E.__originalResetTransform=E.resetTransform,E.__originalClip=E.clip,E.__originalMoveTo=E.moveTo,E.__originalLineTo=E.lineTo,E.__originalBezierCurveTo=E.bezierCurveTo,E.__originalRect=E.rect,E.__originalClosePath=E.closePath,E.__originalBeginPath=E.beginPath,E._removeMirroring=()=>{E.save=E.__originalSave,E.restore=E.__originalRestore,E.rotate=E.__originalRotate,E.scale=E.__originalScale,E.translate=E.__originalTranslate,E.transform=E.__originalTransform,E.setTransform=E.__originalSetTransform,E.resetTransform=E.__originalResetTransform,E.clip=E.__originalClip,E.moveTo=E.__originalMoveTo,E.lineTo=E.__originalLineTo,E.bezierCurveTo=E.__originalBezierCurveTo,E.rect=E.__originalRect,E.closePath=E.__originalClosePath,E.beginPath=E.__originalBeginPath,delete E._removeMirroring},E.save=function(){y.save(),this.__originalSave()},E.restore=function(){y.restore(),this.__originalRestore()},E.translate=function(M,k){y.translate(M,k),this.__originalTranslate(M,k)},E.scale=function(M,k){y.scale(M,k),this.__originalScale(M,k)},E.transform=function(M,k,N,H,I,S){y.transform(M,k,N,H,I,S),this.__originalTransform(M,k,N,H,I,S)},E.setTransform=function(M,k,N,H,I,S){y.setTransform(M,k,N,H,I,S),this.__originalSetTransform(M,k,N,H,I,S)},E.resetTransform=function(){y.resetTransform(),this.__originalResetTransform()},E.rotate=function(M){y.rotate(M),this.__originalRotate(M)},E.clip=function(M){y.clip(M),this.__originalClip(M)},E.moveTo=function(g,M){y.moveTo(g,M),this.__originalMoveTo(g,M)},E.lineTo=function(g,M){y.lineTo(g,M),this.__originalLineTo(g,M)},E.bezierCurveTo=function(g,M,k,N,H,I){y.bezierCurveTo(g,M,k,N,H,I),this.__originalBezierCurveTo(g,M,k,N,H,I)},E.rect=function(g,M,k,N){y.rect(g,M,k,N),this.__originalRect(g,M,k,N)},E.closePath=function(){y.closePath(),this.__originalClosePath()},E.beginPath=function(){y.beginPath(),this.__originalBeginPath()}}class m{constructor(y){this.canvasFactory=y,this.cache=Object.create(null)}getCanvas(y,g,M){let k;return this.cache[y]!==void 0?(k=this.cache[y],this.canvasFactory.reset(k,g,M)):(k=this.canvasFactory.create(g,M),this.cache[y]=k),k}delete(y){delete this.cache[y]}clear(){for(const y in this.cache){const g=this.cache[y];this.canvasFactory.destroy(g),delete this.cache[y]}}}function _(E,y,g,M,k,N,H,I,S,F){const[R,U,V,$,X,ie]=(0,o.getCurrentTransform)(E);if(U===0&&V===0){const z=H*R+X,K=Math.round(z),Q=I*$+ie,Y=Math.round(Q),se=(H+S)*R+X,ae=Math.abs(Math.round(se)-K)||1,ce=(I+F)*$+ie,he=Math.abs(Math.round(ce)-Y)||1;return E.setTransform(Math.sign(R),0,0,Math.sign($),K,Y),E.drawImage(y,g,M,k,N,0,0,ae,he),E.setTransform(R,U,V,$,X,ie),[ae,he]}if(R===0&&$===0){const z=I*V+X,K=Math.round(z),Q=H*U+ie,Y=Math.round(Q),se=(I+F)*V+X,ae=Math.abs(Math.round(se)-K)||1,ce=(H+S)*U+ie,he=Math.abs(Math.round(ce)-Y)||1;return E.setTransform(0,Math.sign(U),Math.sign(V),0,K,Y),E.drawImage(y,g,M,k,N,0,0,he,ae),E.setTransform(R,U,V,$,X,ie),[he,ae]}E.drawImage(y,g,M,k,N,H,I,S,F);const oe=Math.hypot(R,U),ne=Math.hypot(V,$);return[oe*S,ne*F]}function u(E){const{width:y,height:g}=E;if(y>p||g>p)return null;const M=1e3,k=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),N=y+1;let H=new Uint8Array(N*(g+1)),I,S,F;const R=y+7&-8;let U=new Uint8Array(R*g),V=0;for(const ne of E.data){let z=128;for(;z>0;)U[V++]=ne&z?0:255,z>>=1}let $=0;for(V=0,U[V]!==0&&(H[0]=1,++$),S=1;S<y;S++)U[V]!==U[V+1]&&(H[S]=U[V]?2:1,++$),V++;for(U[V]!==0&&(H[S]=2,++$),I=1;I<g;I++){V=I*R,F=I*N,U[V-R]!==U[V]&&(H[F]=U[V]?1:8,++$);let ne=(U[V]?4:0)+(U[V-R]?8:0);for(S=1;S<y;S++)ne=(ne>>2)+(U[V+1]?4:0)+(U[V-R+1]?8:0),k[ne]&&(H[F+S]=k[ne],++$),V++;if(U[V-R]!==U[V]&&(H[F+S]=U[V]?2:4,++$),$>M)return null}for(V=R*(g-1),F=I*N,U[V]!==0&&(H[F]=8,++$),S=1;S<y;S++)U[V]!==U[V+1]&&(H[F+S]=U[V]?4:8,++$),V++;if(U[V]!==0&&(H[F+S]=4,++$),$>M)return null;const X=new Int32Array([0,N,-1,0,-N,0,0,0,1]),ie=new Path2D;for(I=0;$&&I<=g;I++){let ne=I*N;const z=ne+y;for(;ne<z&&!H[ne];)ne++;if(ne===z)continue;ie.moveTo(ne%N,I);const K=ne;let Q=H[ne];do{const Y=X[Q];do ne+=Y;while(!H[ne]);const se=H[ne];se!==5&&se!==10?(Q=se,H[ne]=0):(Q=se&51*Q>>4,H[ne]&=Q>>2|Q<<2),ie.lineTo(ne%N,ne/N|0),H[ne]||--$}while(K!==ne);--I}return U=null,H=null,function(ne){ne.save(),ne.scale(1/y,-1/g),ne.translate(0,-g),ne.fill(ie),ne.beginPath(),ne.restore()}}class w{constructor(y,g){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,y,g])}clone(){const y=Object.create(this);return y.clipBox=this.clipBox.slice(),y}setCurrentPoint(y,g){this.x=y,this.y=g}updatePathMinMax(y,g,M){[g,M]=i.Util.applyTransform([g,M],y),this.minX=Math.min(this.minX,g),this.minY=Math.min(this.minY,M),this.maxX=Math.max(this.maxX,g),this.maxY=Math.max(this.maxY,M)}updateRectMinMax(y,g){const M=i.Util.applyTransform(g,y),k=i.Util.applyTransform(g.slice(2),y);this.minX=Math.min(this.minX,M[0],k[0]),this.minY=Math.min(this.minY,M[1],k[1]),this.maxX=Math.max(this.maxX,M[0],k[0]),this.maxY=Math.max(this.maxY,M[1],k[1])}updateScalingPathMinMax(y,g){i.Util.scaleMinMax(y,g),this.minX=Math.min(this.minX,g[0]),this.maxX=Math.max(this.maxX,g[1]),this.minY=Math.min(this.minY,g[2]),this.maxY=Math.max(this.maxY,g[3])}updateCurvePathMinMax(y,g,M,k,N,H,I,S,F,R){const U=i.Util.bezierBoundingBox(g,M,k,N,H,I,S,F);if(R){R[0]=Math.min(R[0],U[0],U[2]),R[1]=Math.max(R[1],U[0],U[2]),R[2]=Math.min(R[2],U[1],U[3]),R[3]=Math.max(R[3],U[1],U[3]);return}this.updateRectMinMax(y,U)}getPathBoundingBox(y=f.PathType.FILL,g=null){const M=[this.minX,this.minY,this.maxX,this.maxY];if(y===f.PathType.STROKE){g||(0,i.unreachable)("Stroke bounding box must include transform.");const k=i.Util.singularValueDecompose2dScale(g),N=k[0]*this.lineWidth/2,H=k[1]*this.lineWidth/2;M[0]-=N,M[1]-=H,M[2]+=N,M[3]+=H}return M}updateClipFromPath(){const y=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(y||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(y){this.clipBox=y,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(y=f.PathType.FILL,g=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(y,g))}}function C(E,y){if(typeof ImageData<"u"&&y instanceof ImageData){E.putImageData(y,0,0);return}const g=y.height,M=y.width,k=g%h,N=(g-k)/h,H=k===0?N:N+1,I=E.createImageData(M,h);let S=0,F;const R=y.data,U=I.data;let V,$,X,ie;if(y.kind===i.ImageKind.GRAYSCALE_1BPP){const oe=R.byteLength,ne=new Uint32Array(U.buffer,0,U.byteLength>>2),z=ne.length,K=M+7>>3,Q=4294967295,Y=i.FeatureTest.isLittleEndian?4278190080:255;for(V=0;V<H;V++){for(X=V<N?h:k,F=0,$=0;$<X;$++){const se=oe-S;let ae=0;const ce=se>K?M:se*8-7,he=ce&-8;let de=0,ue=0;for(;ae<he;ae+=8)ue=R[S++],ne[F++]=ue&128?Q:Y,ne[F++]=ue&64?Q:Y,ne[F++]=ue&32?Q:Y,ne[F++]=ue&16?Q:Y,ne[F++]=ue&8?Q:Y,ne[F++]=ue&4?Q:Y,ne[F++]=ue&2?Q:Y,ne[F++]=ue&1?Q:Y;for(;ae<ce;ae++)de===0&&(ue=R[S++],de=128),ne[F++]=ue&de?Q:Y,de>>=1}for(;F<z;)ne[F++]=0;E.putImageData(I,0,V*h)}}else if(y.kind===i.ImageKind.RGBA_32BPP){for($=0,ie=M*h*4,V=0;V<N;V++)U.set(R.subarray(S,S+ie)),S+=ie,E.putImageData(I,0,$),$+=h;V<H&&(ie=M*k*4,U.set(R.subarray(S,S+ie)),E.putImageData(I,0,$))}else if(y.kind===i.ImageKind.RGB_24BPP)for(X=h,ie=M*X,V=0;V<H;V++){for(V>=N&&(X=k,ie=M*X),F=0,$=ie;$--;)U[F++]=R[S++],U[F++]=R[S++],U[F++]=R[S++],U[F++]=255;E.putImageData(I,0,V*h)}else throw new Error(`bad image kind: ${y.kind}`)}function x(E,y){if(y.bitmap){E.drawImage(y.bitmap,0,0);return}const g=y.height,M=y.width,k=g%h,N=(g-k)/h,H=k===0?N:N+1,I=E.createImageData(M,h);let S=0;const F=y.data,R=I.data;for(let U=0;U<H;U++){const V=U<N?h:k;({srcPos:S}=(0,v.convertBlackAndWhiteToRGBA)({src:F,srcPos:S,dest:R,width:M,height:V,nonBlackColor:0})),E.putImageData(I,0,U*h)}}function c(E,y){const g=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const M of g)E[M]!==void 0&&(y[M]=E[M]);E.setLineDash!==void 0&&(y.setLineDash(E.getLineDash()),y.lineDashOffset=E.lineDashOffset)}function b(E){if(E.strokeStyle=E.fillStyle="#000000",E.fillRule="nonzero",E.globalAlpha=1,E.lineWidth=1,E.lineCap="butt",E.lineJoin="miter",E.miterLimit=10,E.globalCompositeOperation="source-over",E.font="10px sans-serif",E.setLineDash!==void 0&&(E.setLineDash([]),E.lineDashOffset=0),!i.isNodeJS){const{filter:y}=E;y!=="none"&&y!==""&&(E.filter="none")}}function D(E,y,g,M){const k=E.length;for(let N=3;N<k;N+=4){const H=E[N];if(H===0)E[N-3]=y,E[N-2]=g,E[N-1]=M;else if(H<255){const I=255-H;E[N-3]=E[N-3]*H+y*I>>8,E[N-2]=E[N-2]*H+g*I>>8,E[N-1]=E[N-1]*H+M*I>>8}}}function B(E,y,g){const M=E.length,k=1/255;for(let N=3;N<M;N+=4){const H=g?g[E[N]]:E[N];y[N]=y[N]*H*k|0}}function L(E,y,g){const M=E.length;for(let k=3;k<M;k+=4){const N=E[k-3]*77+E[k-2]*152+E[k-1]*28;y[k]=g?y[k]*g[N>>8]>>8:y[k]*N>>16}}function O(E,y,g,M,k,N,H,I,S,F,R){const U=!!N,V=U?N[0]:0,$=U?N[1]:0,X=U?N[2]:0,ie=k==="Luminosity"?L:B,ne=Math.min(M,Math.ceil(1048576/g));for(let z=0;z<M;z+=ne){const K=Math.min(ne,M-z),Q=E.getImageData(I-F,z+(S-R),g,K),Y=y.getImageData(I,z+S,g,K);U&&D(Q.data,V,$,X),ie(Q.data,Y.data,H),y.putImageData(Y,I,z+S)}}function j(E,y,g,M){const k=M[0],N=M[1],H=M[2]-k,I=M[3]-N;H===0||I===0||(O(y.context,g,H,I,y.subtype,y.backdrop,y.transferMap,k,N,y.offsetX,y.offsetY),E.save(),E.globalAlpha=1,E.globalCompositeOperation="source-over",E.setTransform(1,0,0,1,0,0),E.drawImage(g.canvas,0,0),E.restore())}function q(E,y){const g=i.Util.singularValueDecompose2dScale(E);g[0]=Math.fround(g[0]),g[1]=Math.fround(g[1]);const M=Math.fround((globalThis.devicePixelRatio||1)*o.PixelsPerInch.PDF_TO_CSS_UNITS);return y!==void 0?y:g[0]<=M||g[1]<=M}const ee=["butt","round","square"],W=["miter","round","bevel"],J={},G={};class T{constructor(y,g,M,k,N,{optionalContentConfig:H,markedContentStack:I=null},S,F){this.ctx=y,this.current=new w(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=g,this.objs=M,this.canvasFactory=k,this.filterFactory=N,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=I||[],this.optionalContentConfig=H,this.cachedCanvases=new m(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=S,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=F,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(y,g=null){return typeof y=="string"?y.startsWith("g_")?this.commonObjs.get(y):this.objs.get(y):g}beginDrawing({transform:y,viewport:g,transparency:M=!1,background:k=null}){const N=this.ctx.canvas.width,H=this.ctx.canvas.height,I=this.ctx.fillStyle;if(this.ctx.fillStyle=k||"#ffffff",this.ctx.fillRect(0,0,N,H),this.ctx.fillStyle=I,M){const S=this.cachedCanvases.getCanvas("transparent",N,H);this.compositeCtx=this.ctx,this.transparentCanvas=S.canvas,this.ctx=S.context,this.ctx.save(),this.ctx.transform(...(0,o.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),b(this.ctx),y&&(this.ctx.transform(...y),this.outputScaleX=y[0],this.outputScaleY=y[0]),this.ctx.transform(...g.transform),this.viewportScale=g.scale,this.baseTransform=(0,o.getCurrentTransform)(this.ctx)}executeOperatorList(y,g,M,k){const N=y.argsArray,H=y.fnArray;let I=g||0;const S=N.length;if(S===I)return I;const F=S-I>l&&typeof M=="function",R=F?Date.now()+t:0;let U=0;const V=this.commonObjs,$=this.objs;let X;for(;;){if(k!==void 0&&I===k.nextBreakPoint)return k.breakIt(I,M),I;if(X=H[I],X!==i.OPS.dependency)this[X].apply(this,N[I]);else for(const ie of N[I]){const oe=ie.startsWith("g_")?V:$;if(!oe.has(ie))return oe.get(ie,M),I}if(I++,I===S)return I;if(F&&++U>l){if(Date.now()>R)return M(),I;U=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const y of this._cachedBitmapsMap.values()){for(const g of y.values())typeof HTMLCanvasElement<"u"&&g instanceof HTMLCanvasElement&&(g.width=g.height=0);y.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const y=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(y!=="none"){const g=this.ctx.filter;this.ctx.filter=y,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=g}}}_scaleImage(y,g){const M=y.width,k=y.height;let N=Math.max(Math.hypot(g[0],g[1]),1),H=Math.max(Math.hypot(g[2],g[3]),1),I=M,S=k,F="prescale1",R,U;for(;N>2&&I>1||H>2&&S>1;){let V=I,$=S;N>2&&I>1&&(V=I>=16384?Math.floor(I/2)-1||1:Math.ceil(I/2),N/=I/V),H>2&&S>1&&($=S>=16384?Math.floor(S/2)-1||1:Math.ceil(S)/2,H/=S/$),R=this.cachedCanvases.getCanvas(F,V,$),U=R.context,U.clearRect(0,0,V,$),U.drawImage(y,0,0,I,S,0,0,V,$),y=R.canvas,I=V,S=$,F=F==="prescale1"?"prescale2":"prescale1"}return{img:y,paintWidth:I,paintHeight:S}}_createMaskCanvas(y){const g=this.ctx,{width:M,height:k}=y,N=this.current.fillColor,H=this.current.patternFill,I=(0,o.getCurrentTransform)(g);let S,F,R,U;if((y.bitmap||y.data)&&y.count>1){const ae=y.bitmap||y.data.buffer;F=JSON.stringify(H?I:[I.slice(0,4),N]),S=this._cachedBitmapsMap.get(ae),S||(S=new Map,this._cachedBitmapsMap.set(ae,S));const ce=S.get(F);if(ce&&!H){const he=Math.round(Math.min(I[0],I[2])+I[4]),de=Math.round(Math.min(I[1],I[3])+I[5]);return{canvas:ce,offsetX:he,offsetY:de}}R=ce}R||(U=this.cachedCanvases.getCanvas("maskCanvas",M,k),x(U.context,y));let V=i.Util.transform(I,[1/M,0,0,-1/k,0,0]);V=i.Util.transform(V,[1,0,0,1,0,-k]);const $=i.Util.applyTransform([0,0],V),X=i.Util.applyTransform([M,k],V),ie=i.Util.normalizeRect([$[0],$[1],X[0],X[1]]),oe=Math.round(ie[2]-ie[0])||1,ne=Math.round(ie[3]-ie[1])||1,z=this.cachedCanvases.getCanvas("fillCanvas",oe,ne),K=z.context,Q=Math.min($[0],X[0]),Y=Math.min($[1],X[1]);K.translate(-Q,-Y),K.transform(...V),R||(R=this._scaleImage(U.canvas,(0,o.getCurrentTransformInverse)(K)),R=R.img,S&&H&&S.set(F,R)),K.imageSmoothingEnabled=q((0,o.getCurrentTransform)(K),y.interpolate),_(K,R,0,0,R.width,R.height,0,0,M,k),K.globalCompositeOperation="source-in";const se=i.Util.transform((0,o.getCurrentTransformInverse)(K),[1,0,0,1,-Q,-Y]);return K.fillStyle=H?N.getPattern(g,this,se,f.PathType.FILL):N,K.fillRect(0,0,M,k),S&&!H&&(this.cachedCanvases.delete("fillCanvas"),S.set(F,z.canvas)),{canvas:z.canvas,offsetX:Math.round(Q),offsetY:Math.round(Y)}}setLineWidth(y){y!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=y,this.ctx.lineWidth=y}setLineCap(y){this.ctx.lineCap=ee[y]}setLineJoin(y){this.ctx.lineJoin=W[y]}setMiterLimit(y){this.ctx.miterLimit=y}setDash(y,g){const M=this.ctx;M.setLineDash!==void 0&&(M.setLineDash(y),M.lineDashOffset=g)}setRenderingIntent(y){}setFlatness(y){}setGState(y){for(const[g,M]of y)switch(g){case"LW":this.setLineWidth(M);break;case"LC":this.setLineCap(M);break;case"LJ":this.setLineJoin(M);break;case"ML":this.setMiterLimit(M);break;case"D":this.setDash(M[0],M[1]);break;case"RI":this.setRenderingIntent(M);break;case"FL":this.setFlatness(M);break;case"Font":this.setFont(M[0],M[1]);break;case"CA":this.current.strokeAlpha=M;break;case"ca":this.current.fillAlpha=M,this.ctx.globalAlpha=M;break;case"BM":this.ctx.globalCompositeOperation=M;break;case"SMask":this.current.activeSMask=M?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(M);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const y=this.inSMaskMode;this.current.activeSMask&&!y?this.beginSMaskMode():!this.current.activeSMask&&y&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const y=this.ctx.canvas.width,g=this.ctx.canvas.height,M="smaskGroupAt"+this.groupLevel,k=this.cachedCanvases.getCanvas(M,y,g);this.suspendedCtx=this.ctx,this.ctx=k.context;const N=this.ctx;N.setTransform(...(0,o.getCurrentTransform)(this.suspendedCtx)),c(this.suspendedCtx,N),s(N,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),c(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(y){if(!this.current.activeSMask)return;y?(y[0]=Math.floor(y[0]),y[1]=Math.floor(y[1]),y[2]=Math.ceil(y[2]),y[3]=Math.ceil(y[3])):y=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const g=this.current.activeSMask,M=this.suspendedCtx;j(M,g,this.ctx,y),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(c(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const y=this.current;this.stateStack.push(y),this.current=y.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),c(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(y,g,M,k,N,H){this.ctx.transform(y,g,M,k,N,H),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(y,g,M){const k=this.ctx,N=this.current;let H=N.x,I=N.y,S,F;const R=(0,o.getCurrentTransform)(k),U=R[0]===0&&R[3]===0||R[1]===0&&R[2]===0,V=U?M.slice(0):null;for(let $=0,X=0,ie=y.length;$<ie;$++)switch(y[$]|0){case i.OPS.rectangle:H=g[X++],I=g[X++];const oe=g[X++],ne=g[X++],z=H+oe,K=I+ne;k.moveTo(H,I),oe===0||ne===0?k.lineTo(z,K):(k.lineTo(z,I),k.lineTo(z,K),k.lineTo(H,K)),U||N.updateRectMinMax(R,[H,I,z,K]),k.closePath();break;case i.OPS.moveTo:H=g[X++],I=g[X++],k.moveTo(H,I),U||N.updatePathMinMax(R,H,I);break;case i.OPS.lineTo:H=g[X++],I=g[X++],k.lineTo(H,I),U||N.updatePathMinMax(R,H,I);break;case i.OPS.curveTo:S=H,F=I,H=g[X+4],I=g[X+5],k.bezierCurveTo(g[X],g[X+1],g[X+2],g[X+3],H,I),N.updateCurvePathMinMax(R,S,F,g[X],g[X+1],g[X+2],g[X+3],H,I,V),X+=6;break;case i.OPS.curveTo2:S=H,F=I,k.bezierCurveTo(H,I,g[X],g[X+1],g[X+2],g[X+3]),N.updateCurvePathMinMax(R,S,F,H,I,g[X],g[X+1],g[X+2],g[X+3],V),H=g[X+2],I=g[X+3],X+=4;break;case i.OPS.curveTo3:S=H,F=I,H=g[X+2],I=g[X+3],k.bezierCurveTo(g[X],g[X+1],H,I,H,I),N.updateCurvePathMinMax(R,S,F,g[X],g[X+1],H,I,H,I,V),X+=4;break;case i.OPS.closePath:k.closePath();break}U&&N.updateScalingPathMinMax(R,V),N.setCurrentPoint(H,I)}closePath(){this.ctx.closePath()}stroke(y=!0){const g=this.ctx,M=this.current.strokeColor;g.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof M=="object"&&M?.getPattern?(g.save(),g.strokeStyle=M.getPattern(g,this,(0,o.getCurrentTransformInverse)(g),f.PathType.STROKE),this.rescaleAndStroke(!1),g.restore()):this.rescaleAndStroke(!0)),y&&this.consumePath(this.current.getClippedPathBoundingBox()),g.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(y=!0){const g=this.ctx,M=this.current.fillColor,k=this.current.patternFill;let N=!1;k&&(g.save(),g.fillStyle=M.getPattern(g,this,(0,o.getCurrentTransformInverse)(g),f.PathType.FILL),N=!0);const H=this.current.getClippedPathBoundingBox();this.contentVisible&&H!==null&&(this.pendingEOFill?(g.fill("evenodd"),this.pendingEOFill=!1):g.fill()),N&&g.restore(),y&&this.consumePath(H)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=J}eoClip(){this.pendingClip=G}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const y=this.pendingTextPaths,g=this.ctx;if(y===void 0){g.beginPath();return}g.save(),g.beginPath();for(const M of y)g.setTransform(...M.transform),g.translate(M.x,M.y),M.addToPath(g,M.fontSize);g.restore(),g.clip(),g.beginPath(),delete this.pendingTextPaths}setCharSpacing(y){this.current.charSpacing=y}setWordSpacing(y){this.current.wordSpacing=y}setHScale(y){this.current.textHScale=y/100}setLeading(y){this.current.leading=-y}setFont(y,g){const M=this.commonObjs.get(y),k=this.current;if(!M)throw new Error(`Can't find font for ${y}`);if(k.fontMatrix=M.fontMatrix||i.FONT_IDENTITY_MATRIX,(k.fontMatrix[0]===0||k.fontMatrix[3]===0)&&(0,i.warn)("Invalid font matrix for font "+y),g<0?(g=-g,k.fontDirection=-1):k.fontDirection=1,this.current.font=M,this.current.fontSize=g,M.isType3Font)return;const N=M.loadedName||"sans-serif",H=M.systemFontInfo?.css||`"${N}", ${M.fallbackName}`;let I="normal";M.black?I="900":M.bold&&(I="bold");const S=M.italic?"italic":"normal";let F=g;g<d?F=d:g>P&&(F=P),this.current.fontSizeScale=g/F,this.ctx.font=`${S} ${I} ${F}px ${H}`}setTextRenderingMode(y){this.current.textRenderingMode=y}setTextRise(y){this.current.textRise=y}moveText(y,g){this.current.x=this.current.lineX+=y,this.current.y=this.current.lineY+=g}setLeadingMoveText(y,g){this.setLeading(-g),this.moveText(y,g)}setTextMatrix(y,g,M,k,N,H){this.current.textMatrix=[y,g,M,k,N,H],this.current.textMatrixScale=Math.hypot(y,g),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(y,g,M,k){const N=this.ctx,H=this.current,I=H.font,S=H.textRenderingMode,F=H.fontSize/H.fontSizeScale,R=S&i.TextRenderingMode.FILL_STROKE_MASK,U=!!(S&i.TextRenderingMode.ADD_TO_PATH_FLAG),V=H.patternFill&&!I.missingFile;let $;(I.disableFontFace||U||V)&&($=I.getPathGenerator(this.commonObjs,y)),I.disableFontFace||V?(N.save(),N.translate(g,M),N.beginPath(),$(N,F),k&&N.setTransform(...k),(R===i.TextRenderingMode.FILL||R===i.TextRenderingMode.FILL_STROKE)&&N.fill(),(R===i.TextRenderingMode.STROKE||R===i.TextRenderingMode.FILL_STROKE)&&N.stroke(),N.restore()):((R===i.TextRenderingMode.FILL||R===i.TextRenderingMode.FILL_STROKE)&&N.fillText(y,g,M),(R===i.TextRenderingMode.STROKE||R===i.TextRenderingMode.FILL_STROKE)&&N.strokeText(y,g,M)),U&&(this.pendingTextPaths||=[]).push({transform:(0,o.getCurrentTransform)(N),x:g,y:M,fontSize:F,addToPath:$})}get isFontSubpixelAAEnabled(){const{context:y}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);y.scale(1.5,1),y.fillText("I",0,10);const g=y.getImageData(0,0,10,10).data;let M=!1;for(let k=3;k<g.length;k+=4)if(g[k]>0&&g[k]<255){M=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",M)}showText(y){const g=this.current,M=g.font;if(M.isType3Font)return this.showType3Text(y);const k=g.fontSize;if(k===0)return;const N=this.ctx,H=g.fontSizeScale,I=g.charSpacing,S=g.wordSpacing,F=g.fontDirection,R=g.textHScale*F,U=y.length,V=M.vertical,$=V?1:-1,X=M.defaultVMetrics,ie=k*g.fontMatrix[0],oe=g.textRenderingMode===i.TextRenderingMode.FILL&&!M.disableFontFace&&!g.patternFill;N.save(),N.transform(...g.textMatrix),N.translate(g.x,g.y+g.textRise),F>0?N.scale(R,-1):N.scale(R,1);let ne;if(g.patternFill){N.save();const se=g.fillColor.getPattern(N,this,(0,o.getCurrentTransformInverse)(N),f.PathType.FILL);ne=(0,o.getCurrentTransform)(N),N.restore(),N.fillStyle=se}let z=g.lineWidth;const K=g.textMatrixScale;if(K===0||z===0){const se=g.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(se===i.TextRenderingMode.STROKE||se===i.TextRenderingMode.FILL_STROKE)&&(z=this.getSinglePixelWidth())}else z/=K;if(H!==1&&(N.scale(H,H),z/=H),N.lineWidth=z,M.isInvalidPDFjsFont){const se=[];let ae=0;for(const ce of y)se.push(ce.unicode),ae+=ce.width;N.fillText(se.join(""),0,0),g.x+=ae*ie*R,N.restore(),this.compose();return}let Q=0,Y;for(Y=0;Y<U;++Y){const se=y[Y];if(typeof se=="number"){Q+=$*se*k/1e3;continue}let ae=!1;const ce=(se.isSpace?S:0)+I,he=se.fontChar,de=se.accent;let ue,pe,ge=se.width;if(V){const ve=se.vmetric||X,Se=-(se.vmetric?ve[1]:ge*.5)*ie,Me=ve[2]*ie;ge=ve?-ve[0]:ge,ue=Se/H,pe=(Q+Me)/H}else ue=Q/H,pe=0;if(M.remeasure&&ge>0){const ve=N.measureText(he).width*1e3/k*H;if(ge<ve&&this.isFontSubpixelAAEnabled){const Se=ge/ve;ae=!0,N.save(),N.scale(Se,1),ue/=Se}else ge!==ve&&(ue+=(ge-ve)/2e3*k/H)}if(this.contentVisible&&(se.isInFont||M.missingFile)){if(oe&&!de)N.fillText(he,ue,pe);else if(this.paintChar(he,ue,pe,ne),de){const ve=ue+k*de.offset.x/H,Se=pe-k*de.offset.y/H;this.paintChar(de.fontChar,ve,Se,ne)}}const Ee=V?ge*ie-ce*F:ge*ie+ce*F;Q+=Ee,ae&&N.restore()}V?g.y-=Q:g.x+=Q*R,N.restore(),this.compose()}showType3Text(y){const g=this.ctx,M=this.current,k=M.font,N=M.fontSize,H=M.fontDirection,I=k.vertical?1:-1,S=M.charSpacing,F=M.wordSpacing,R=M.textHScale*H,U=M.fontMatrix||i.FONT_IDENTITY_MATRIX,V=y.length,$=M.textRenderingMode===i.TextRenderingMode.INVISIBLE;let X,ie,oe,ne;if(!($||N===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,g.save(),g.transform(...M.textMatrix),g.translate(M.x,M.y),g.scale(R,H),X=0;X<V;++X){if(ie=y[X],typeof ie=="number"){ne=I*ie*N/1e3,this.ctx.translate(ne,0),M.x+=ne*R;continue}const z=(ie.isSpace?F:0)+S,K=k.charProcOperatorList[ie.operatorListId];if(!K){(0,i.warn)(`Type3 character "${ie.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ie,this.save(),g.scale(N,N),g.transform(...U),this.executeOperatorList(K),this.restore()),oe=i.Util.applyTransform([ie.width,0],U)[0]*N+z,g.translate(oe,0),M.x+=oe*R}g.restore(),this.processingType3=null}}setCharWidth(y,g){}setCharWidthAndBounds(y,g,M,k,N,H){this.ctx.rect(M,k,N-M,H-k),this.ctx.clip(),this.endPath()}getColorN_Pattern(y){let g;if(y[0]==="TilingPattern"){const M=y[1],k=this.baseTransform||(0,o.getCurrentTransform)(this.ctx),N={createCanvasGraphics:H=>new T(H,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};g=new f.TilingPattern(y,M,this.ctx,N,k)}else g=this._getPattern(y[1],y[2]);return g}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(y,g,M){const k=i.Util.makeHexColor(y,g,M);this.ctx.strokeStyle=k,this.current.strokeColor=k}setFillRGBColor(y,g,M){const k=i.Util.makeHexColor(y,g,M);this.ctx.fillStyle=k,this.current.fillColor=k,this.current.patternFill=!1}_getPattern(y,g=null){let M;return this.cachedPatterns.has(y)?M=this.cachedPatterns.get(y):(M=(0,f.getShadingPattern)(this.getObject(y)),this.cachedPatterns.set(y,M)),g&&(M.matrix=g),M}shadingFill(y){if(!this.contentVisible)return;const g=this.ctx;this.save();const M=this._getPattern(y);g.fillStyle=M.getPattern(g,this,(0,o.getCurrentTransformInverse)(g),f.PathType.SHADING);const k=(0,o.getCurrentTransformInverse)(g);if(k){const{width:N,height:H}=g.canvas,[I,S,F,R]=i.Util.getAxialAlignedBoundingBox([0,0,N,H],k);this.ctx.fillRect(I,S,F-I,R-S)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(y,g){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(y)&&y.length===6&&this.transform(...y),this.baseTransform=(0,o.getCurrentTransform)(this.ctx),g)){const M=g[2]-g[0],k=g[3]-g[1];this.ctx.rect(g[0],g[1],M,k),this.current.updateRectMinMax((0,o.getCurrentTransform)(this.ctx),g),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(y){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const g=this.ctx;y.isolated||(0,i.info)("TODO: Support non-isolated groups."),y.knockout&&(0,i.warn)("Knockout groups not supported.");const M=(0,o.getCurrentTransform)(g);if(y.matrix&&g.transform(...y.matrix),!y.bbox)throw new Error("Bounding box is required.");let k=i.Util.getAxialAlignedBoundingBox(y.bbox,(0,o.getCurrentTransform)(g));const N=[0,0,g.canvas.width,g.canvas.height];k=i.Util.intersect(k,N)||[0,0,0,0];const H=Math.floor(k[0]),I=Math.floor(k[1]);let S=Math.max(Math.ceil(k[2])-H,1),F=Math.max(Math.ceil(k[3])-I,1),R=1,U=1;S>r&&(R=S/r,S=r),F>r&&(U=F/r,F=r),this.current.startNewPathAndClipBox([0,0,S,F]);let V="groupAt"+this.groupLevel;y.smask&&(V+="_smask_"+this.smaskCounter++%2);const $=this.cachedCanvases.getCanvas(V,S,F),X=$.context;X.scale(1/R,1/U),X.translate(-H,-I),X.transform(...M),y.smask?this.smaskStack.push({canvas:$.canvas,context:X,offsetX:H,offsetY:I,scaleX:R,scaleY:U,subtype:y.smask.subtype,backdrop:y.smask.backdrop,transferMap:y.smask.transferMap||null,startTransformInverse:null}):(g.setTransform(1,0,0,1,0,0),g.translate(H,I),g.scale(R,U),g.save()),c(g,X),this.ctx=X,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(g),this.groupLevel++}endGroup(y){if(!this.contentVisible)return;this.groupLevel--;const g=this.ctx,M=this.groupStack.pop();if(this.ctx=M,this.ctx.imageSmoothingEnabled=!1,y.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const k=(0,o.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...k);const N=i.Util.getAxialAlignedBoundingBox([0,0,g.canvas.width,g.canvas.height],k);this.ctx.drawImage(g.canvas,0,0),this.ctx.restore(),this.compose(N)}}beginAnnotation(y,g,M,k,N){if(this.#e(),b(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(g)&&g.length===4){const H=g[2]-g[0],I=g[3]-g[1];if(N&&this.annotationCanvasMap){M=M.slice(),M[4]-=g[0],M[5]-=g[1],g=g.slice(),g[0]=g[1]=0,g[2]=H,g[3]=I;const[S,F]=i.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(this.ctx)),{viewportScale:R}=this,U=Math.ceil(H*this.outputScaleX*R),V=Math.ceil(I*this.outputScaleY*R);this.annotationCanvas=this.canvasFactory.create(U,V);const{canvas:$,context:X}=this.annotationCanvas;this.annotationCanvasMap.set(y,$),this.annotationCanvas.savedCtx=this.ctx,this.ctx=X,this.ctx.save(),this.ctx.setTransform(S,0,0,-F,0,I*F),b(this.ctx)}else b(this.ctx),this.ctx.rect(g[0],g[1],H,I),this.ctx.clip(),this.endPath()}this.current=new w(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...M),this.transform(...k)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(y){if(!this.contentVisible)return;const g=y.count;y=this.getObject(y.data,y),y.count=g;const M=this.ctx,k=this.processingType3;if(k&&(k.compiled===void 0&&(k.compiled=u(y)),k.compiled)){k.compiled(M);return}const N=this._createMaskCanvas(y),H=N.canvas;M.save(),M.setTransform(1,0,0,1,0,0),M.drawImage(H,N.offsetX,N.offsetY),M.restore(),this.compose()}paintImageMaskXObjectRepeat(y,g,M=0,k=0,N,H){if(!this.contentVisible)return;y=this.getObject(y.data,y);const I=this.ctx;I.save();const S=(0,o.getCurrentTransform)(I);I.transform(g,M,k,N,0,0);const F=this._createMaskCanvas(y);I.setTransform(1,0,0,1,F.offsetX-S[4],F.offsetY-S[5]);for(let R=0,U=H.length;R<U;R+=2){const V=i.Util.transform(S,[g,M,k,N,H[R],H[R+1]]),[$,X]=i.Util.applyTransform([0,0],V);I.drawImage(F.canvas,$,X)}I.restore(),this.compose()}paintImageMaskXObjectGroup(y){if(!this.contentVisible)return;const g=this.ctx,M=this.current.fillColor,k=this.current.patternFill;for(const N of y){const{data:H,width:I,height:S,transform:F}=N,R=this.cachedCanvases.getCanvas("maskCanvas",I,S),U=R.context;U.save();const V=this.getObject(H,N);x(U,V),U.globalCompositeOperation="source-in",U.fillStyle=k?M.getPattern(U,this,(0,o.getCurrentTransformInverse)(g),f.PathType.FILL):M,U.fillRect(0,0,I,S),U.restore(),g.save(),g.transform(...F),g.scale(1,-1),_(g,R.canvas,0,0,I,S,0,-1,1,1),g.restore()}this.compose()}paintImageXObject(y){if(!this.contentVisible)return;const g=this.getObject(y);if(!g){(0,i.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(g)}paintImageXObjectRepeat(y,g,M,k){if(!this.contentVisible)return;const N=this.getObject(y);if(!N){(0,i.warn)("Dependent image isn't ready yet");return}const H=N.width,I=N.height,S=[];for(let F=0,R=k.length;F<R;F+=2)S.push({transform:[g,0,0,M,k[F],k[F+1]],x:0,y:0,w:H,h:I});this.paintInlineImageXObjectGroup(N,S)}applyTransferMapsToCanvas(y){return this.current.transferMaps!=="none"&&(y.filter=this.current.transferMaps,y.drawImage(y.canvas,0,0),y.filter="none"),y.canvas}applyTransferMapsToBitmap(y){if(this.current.transferMaps==="none")return y.bitmap;const{bitmap:g,width:M,height:k}=y,N=this.cachedCanvases.getCanvas("inlineImage",M,k),H=N.context;return H.filter=this.current.transferMaps,H.drawImage(g,0,0),H.filter="none",N.canvas}paintInlineImageXObject(y){if(!this.contentVisible)return;const g=y.width,M=y.height,k=this.ctx;if(this.save(),!i.isNodeJS){const{filter:I}=k;I!=="none"&&I!==""&&(k.filter="none")}k.scale(1/g,-1/M);let N;if(y.bitmap)N=this.applyTransferMapsToBitmap(y);else if(typeof HTMLElement=="function"&&y instanceof HTMLElement||!y.data)N=y;else{const S=this.cachedCanvases.getCanvas("inlineImage",g,M).context;C(S,y),N=this.applyTransferMapsToCanvas(S)}const H=this._scaleImage(N,(0,o.getCurrentTransformInverse)(k));k.imageSmoothingEnabled=q((0,o.getCurrentTransform)(k),y.interpolate),_(k,H.img,0,0,H.paintWidth,H.paintHeight,0,-M,g,M),this.compose(),this.restore()}paintInlineImageXObjectGroup(y,g){if(!this.contentVisible)return;const M=this.ctx;let k;if(y.bitmap)k=y.bitmap;else{const N=y.width,H=y.height,S=this.cachedCanvases.getCanvas("inlineImage",N,H).context;C(S,y),k=this.applyTransferMapsToCanvas(S)}for(const N of g)M.save(),M.transform(...N.transform),M.scale(1,-1),_(M,k,N.x,N.y,N.w,N.h,0,-1,1,1),M.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(y){}markPointProps(y,g){}beginMarkedContent(y){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(y,g){y==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(g)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(y){const g=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(y);const M=this.ctx;this.pendingClip&&(g||(this.pendingClip===G?M.clip("evenodd"):M.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),M.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const y=(0,o.getCurrentTransform)(this.ctx);if(y[1]===0&&y[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(y[0]),Math.abs(y[3]));else{const g=Math.abs(y[0]*y[3]-y[2]*y[1]),M=Math.hypot(y[0],y[2]),k=Math.hypot(y[1],y[3]);this._cachedGetSinglePixelWidth=Math.max(M,k)/g}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:y}=this.current,{a:g,b:M,c:k,d:N}=this.ctx.getTransform();let H,I;if(M===0&&k===0){const S=Math.abs(g),F=Math.abs(N);if(S===F)if(y===0)H=I=1/S;else{const R=S*y;H=I=R<1?1/R:1}else if(y===0)H=1/S,I=1/F;else{const R=S*y,U=F*y;H=R<1?1/R:1,I=U<1?1/U:1}}else{const S=Math.abs(g*N-M*k),F=Math.hypot(g,M),R=Math.hypot(k,N);if(y===0)H=R/S,I=F/S;else{const U=y*S;H=R>U?R/U:1,I=F>U?F/U:1}}this._cachedScaleForStroking[0]=H,this._cachedScaleForStroking[1]=I}return this._cachedScaleForStroking}rescaleAndStroke(y){const{ctx:g}=this,{lineWidth:M}=this.current,[k,N]=this.getScaleForStroking();if(g.lineWidth=M||1,k===1&&N===1){g.stroke();return}const H=g.getLineDash();if(y&&g.save(),g.scale(k,N),H.length>0){const I=Math.max(k,N);g.setLineDash(H.map(S=>S/I)),g.lineDashOffset/=I}g.stroke(),y&&g.restore()}isContentVisible(){for(let y=this.markedContentStack.length-1;y>=0;y--)if(!this.markedContentStack[y].visible)return!1;return!0}}e.CanvasGraphics=T;for(const E in i.OPS)T.prototype[E]!==void 0&&(T.prototype[i.OPS[E]]=T.prototype[E])},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=h;var i=a(1),o=a(6);const f={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=f;function v(_,u){if(!u)return;const w=u[2]-u[0],C=u[3]-u[1],x=new Path2D;x.rect(u[0],u[1],w,C),_.clip(x)}class d{constructor(){this.constructor===d&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class P extends d{constructor(u){super(),this._type=u[1],this._bbox=u[2],this._colorStops=u[3],this._p0=u[4],this._p1=u[5],this._r0=u[6],this._r1=u[7],this.matrix=null}_createGradient(u){let w;this._type==="axial"?w=u.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(w=u.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const C of this._colorStops)w.addColorStop(C[0],C[1]);return w}getPattern(u,w,C,x){let c;if(x===f.STROKE||x===f.FILL){const b=w.current.getClippedPathBoundingBox(x,(0,o.getCurrentTransform)(u))||[0,0,0,0],D=Math.ceil(b[2]-b[0])||1,B=Math.ceil(b[3]-b[1])||1,L=w.cachedCanvases.getCanvas("pattern",D,B,!0),O=L.context;O.clearRect(0,0,O.canvas.width,O.canvas.height),O.beginPath(),O.rect(0,0,O.canvas.width,O.canvas.height),O.translate(-b[0],-b[1]),C=i.Util.transform(C,[1,0,0,1,b[0],b[1]]),O.transform(...w.baseTransform),this.matrix&&O.transform(...this.matrix),v(O,this._bbox),O.fillStyle=this._createGradient(O),O.fill(),c=u.createPattern(L.canvas,"no-repeat");const j=new DOMMatrix(C);c.setTransform(j)}else v(u,this._bbox),c=this._createGradient(u);return c}}function r(_,u,w,C,x,c,b,D){const B=u.coords,L=u.colors,O=_.data,j=_.width*4;let q;B[w+1]>B[C+1]&&(q=w,w=C,C=q,q=c,c=b,b=q),B[C+1]>B[x+1]&&(q=C,C=x,x=q,q=b,b=D,D=q),B[w+1]>B[C+1]&&(q=w,w=C,C=q,q=c,c=b,b=q);const ee=(B[w]+u.offsetX)*u.scaleX,W=(B[w+1]+u.offsetY)*u.scaleY,J=(B[C]+u.offsetX)*u.scaleX,G=(B[C+1]+u.offsetY)*u.scaleY,T=(B[x]+u.offsetX)*u.scaleX,E=(B[x+1]+u.offsetY)*u.scaleY;if(W>=E)return;const y=L[c],g=L[c+1],M=L[c+2],k=L[b],N=L[b+1],H=L[b+2],I=L[D],S=L[D+1],F=L[D+2],R=Math.round(W),U=Math.round(E);let V,$,X,ie,oe,ne,z,K;for(let Q=R;Q<=U;Q++){if(Q<G){const he=Q<W?0:(W-Q)/(W-G);V=ee-(ee-J)*he,$=y-(y-k)*he,X=g-(g-N)*he,ie=M-(M-H)*he}else{let he;Q>E?he=1:G===E?he=0:he=(G-Q)/(G-E),V=J-(J-T)*he,$=k-(k-I)*he,X=N-(N-S)*he,ie=H-(H-F)*he}let Y;Q<W?Y=0:Q>E?Y=1:Y=(W-Q)/(W-E),oe=ee-(ee-T)*Y,ne=y-(y-I)*Y,z=g-(g-S)*Y,K=M-(M-F)*Y;const se=Math.round(Math.min(V,oe)),ae=Math.round(Math.max(V,oe));let ce=j*Q+se*4;for(let he=se;he<=ae;he++)Y=(V-he)/(V-oe),Y<0?Y=0:Y>1&&(Y=1),O[ce++]=$-($-ne)*Y|0,O[ce++]=X-(X-z)*Y|0,O[ce++]=ie-(ie-K)*Y|0,O[ce++]=255}}function t(_,u,w){const C=u.coords,x=u.colors;let c,b;switch(u.type){case"lattice":const D=u.verticesPerRow,B=Math.floor(C.length/D)-1,L=D-1;for(c=0;c<B;c++){let O=c*D;for(let j=0;j<L;j++,O++)r(_,w,C[O],C[O+1],C[O+D],x[O],x[O+1],x[O+D]),r(_,w,C[O+D+1],C[O+1],C[O+D],x[O+D+1],x[O+1],x[O+D])}break;case"triangles":for(c=0,b=C.length;c<b;c+=3)r(_,w,C[c],C[c+1],C[c+2],x[c],x[c+1],x[c+2]);break;default:throw new Error("illegal figure")}}class l extends d{constructor(u){super(),this._coords=u[2],this._colors=u[3],this._figures=u[4],this._bounds=u[5],this._bbox=u[7],this._background=u[8],this.matrix=null}_createMeshCanvas(u,w,C){const D=Math.floor(this._bounds[0]),B=Math.floor(this._bounds[1]),L=Math.ceil(this._bounds[2])-D,O=Math.ceil(this._bounds[3])-B,j=Math.min(Math.ceil(Math.abs(L*u[0]*1.1)),3e3),q=Math.min(Math.ceil(Math.abs(O*u[1]*1.1)),3e3),ee=L/j,W=O/q,J={coords:this._coords,colors:this._colors,offsetX:-D,offsetY:-B,scaleX:1/ee,scaleY:1/W},G=j+2*2,T=q+2*2,E=C.getCanvas("mesh",G,T,!1),y=E.context,g=y.createImageData(j,q);if(w){const k=g.data;for(let N=0,H=k.length;N<H;N+=4)k[N]=w[0],k[N+1]=w[1],k[N+2]=w[2],k[N+3]=255}for(const k of this._figures)t(g,k,J);return y.putImageData(g,2,2),{canvas:E.canvas,offsetX:D-2*ee,offsetY:B-2*W,scaleX:ee,scaleY:W}}getPattern(u,w,C,x){v(u,this._bbox);let c;if(x===f.SHADING)c=i.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(u));else if(c=i.Util.singularValueDecompose2dScale(w.baseTransform),this.matrix){const D=i.Util.singularValueDecompose2dScale(this.matrix);c=[c[0]*D[0],c[1]*D[1]]}const b=this._createMeshCanvas(c,x===f.SHADING?null:this._background,w.cachedCanvases);return x!==f.SHADING&&(u.setTransform(...w.baseTransform),this.matrix&&u.transform(...this.matrix)),u.translate(b.offsetX,b.offsetY),u.scale(b.scaleX,b.scaleY),u.createPattern(b.canvas,"no-repeat")}}class p extends d{getPattern(){return"hotpink"}}function h(_){switch(_[0]){case"RadialAxial":return new P(_);case"Mesh":return new l(_);case"Dummy":return new p}throw new Error(`Unknown IR type: ${_[0]}`)}const s={COLORED:1,UNCOLORED:2};class m{static MAX_PATTERN_SIZE=3e3;constructor(u,w,C,x,c){this.operatorList=u[2],this.matrix=u[3]||[1,0,0,1,0,0],this.bbox=u[4],this.xstep=u[5],this.ystep=u[6],this.paintType=u[7],this.tilingType=u[8],this.color=w,this.ctx=C,this.canvasGraphicsFactory=x,this.baseTransform=c}createPatternCanvas(u){const w=this.operatorList,C=this.bbox,x=this.xstep,c=this.ystep,b=this.paintType,D=this.tilingType,B=this.color,L=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+D);const O=C[0],j=C[1],q=C[2],ee=C[3],W=i.Util.singularValueDecompose2dScale(this.matrix),J=i.Util.singularValueDecompose2dScale(this.baseTransform),G=[W[0]*J[0],W[1]*J[1]],T=this.getSizeAndScale(x,this.ctx.canvas.width,G[0]),E=this.getSizeAndScale(c,this.ctx.canvas.height,G[1]),y=u.cachedCanvases.getCanvas("pattern",T.size,E.size,!0),g=y.context,M=L.createCanvasGraphics(g);M.groupLevel=u.groupLevel,this.setFillAndStrokeStyleToContext(M,b,B);let k=O,N=j,H=q,I=ee;return O<0&&(k=0,H+=Math.abs(O)),j<0&&(N=0,I+=Math.abs(j)),g.translate(-(T.scale*k),-(E.scale*N)),M.transform(T.scale,0,0,E.scale,0,0),g.save(),this.clipBbox(M,k,N,H,I),M.baseTransform=(0,o.getCurrentTransform)(M.ctx),M.executeOperatorList(w),M.endDrawing(),{canvas:y.canvas,scaleX:T.scale,scaleY:E.scale,offsetX:k,offsetY:N}}getSizeAndScale(u,w,C){u=Math.abs(u);const x=Math.max(m.MAX_PATTERN_SIZE,w);let c=Math.ceil(u*C);return c>=x?c=x:C=c/u,{scale:C,size:c}}clipBbox(u,w,C,x,c){const b=x-w,D=c-C;u.ctx.rect(w,C,b,D),u.current.updateRectMinMax((0,o.getCurrentTransform)(u.ctx),[w,C,x,c]),u.clip(),u.endPath()}setFillAndStrokeStyleToContext(u,w,C){const x=u.ctx,c=u.current;switch(w){case s.COLORED:const b=this.ctx;x.fillStyle=b.fillStyle,x.strokeStyle=b.strokeStyle,c.fillColor=b.fillStyle,c.strokeColor=b.strokeStyle;break;case s.UNCOLORED:const D=i.Util.makeHexColor(C[0],C[1],C[2]);x.fillStyle=D,x.strokeStyle=D,c.fillColor=D,c.strokeColor=D;break;default:throw new i.FormatError(`Unsupported paint type: ${w}`)}}getPattern(u,w,C,x){let c=C;x!==f.SHADING&&(c=i.Util.transform(c,w.baseTransform),this.matrix&&(c=i.Util.transform(c,this.matrix)));const b=this.createPatternCanvas(w);let D=new DOMMatrix(c);D=D.translate(b.offsetX,b.offsetY),D=D.scale(1/b.scaleX,1/b.scaleY);const B=u.createPattern(b.canvas,"repeat");return B.setTransform(D),B}}e.TilingPattern=m},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=f,e.convertToRGBA=o,e.grayToRGBA=d;var i=a(1);function o(P){switch(P.kind){case i.ImageKind.GRAYSCALE_1BPP:return f(P);case i.ImageKind.RGB_24BPP:return v(P)}return null}function f({src:P,srcPos:r=0,dest:t,width:l,height:p,nonBlackColor:h=4294967295,inverseDecode:s=!1}){const m=i.FeatureTest.isLittleEndian?4278190080:255,[_,u]=s?[h,m]:[m,h],w=l>>3,C=l&7,x=P.length;t=new Uint32Array(t.buffer);let c=0;for(let b=0;b<p;b++){for(const B=r+w;r<B;r++){const L=r<x?P[r]:255;t[c++]=L&128?u:_,t[c++]=L&64?u:_,t[c++]=L&32?u:_,t[c++]=L&16?u:_,t[c++]=L&8?u:_,t[c++]=L&4?u:_,t[c++]=L&2?u:_,t[c++]=L&1?u:_}if(C===0)continue;const D=r<x?P[r++]:255;for(let B=0;B<C;B++)t[c++]=D&1<<7-B?u:_}return{srcPos:r,destPos:c}}function v({src:P,srcPos:r=0,dest:t,destPos:l=0,width:p,height:h}){let s=0;const m=P.length>>2,_=new Uint32Array(P.buffer,r,m);if(i.FeatureTest.isLittleEndian){for(;s<m-2;s+=3,l+=4){const u=_[s],w=_[s+1],C=_[s+2];t[l]=u|4278190080,t[l+1]=u>>>24|w<<8|4278190080,t[l+2]=w>>>16|C<<16|4278190080,t[l+3]=C>>>8|4278190080}for(let u=s*4,w=P.length;u<w;u+=3)t[l++]=P[u]|P[u+1]<<8|P[u+2]<<16|4278190080}else{for(;s<m-2;s+=3,l+=4){const u=_[s],w=_[s+1],C=_[s+2];t[l]=u|255,t[l+1]=u<<24|w>>>8|255,t[l+2]=w<<16|C>>>16|255,t[l+3]=C<<8|255}for(let u=s*4,w=P.length;u<w;u+=3)t[l++]=P[u]<<24|P[u+1]<<16|P[u+2]<<8|255}return{srcPos:r,destPos:l}}function d(P,r){if(i.FeatureTest.isLittleEndian)for(let t=0,l=P.length;t<l;t++)r[t]=P[t]*65793|4278190080;else for(let t=0,l=P.length;t<l;t++)r[t]=P[t]*16843008|255}},(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const a=Object.create(null);e.GlobalWorkerOptions=a,a.workerPort=null,a.workerSrc=""},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var i=a(1);const o={UNKNOWN:0,DATA:1,ERROR:2},f={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function v(P){switch(P instanceof Error||typeof P=="object"&&P!==null||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),P.name){case"AbortException":return new i.AbortException(P.message);case"MissingPDFException":return new i.MissingPDFException(P.message);case"PasswordException":return new i.PasswordException(P.message,P.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(P.message,P.status);case"UnknownErrorException":return new i.UnknownErrorException(P.message,P.details);default:return new i.UnknownErrorException(P.message,P.toString())}}class d{constructor(r,t,l){this.sourceName=r,this.targetName=t,this.comObj=l,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=p=>{const h=p.data;if(h.targetName!==this.sourceName)return;if(h.stream){this.#t(h);return}if(h.callback){const m=h.callbackId,_=this.callbackCapabilities[m];if(!_)throw new Error(`Cannot resolve callback ${m}`);if(delete this.callbackCapabilities[m],h.callback===o.DATA)_.resolve(h.data);else if(h.callback===o.ERROR)_.reject(v(h.reason));else throw new Error("Unexpected callback case");return}const s=this.actionHandler[h.action];if(!s)throw new Error(`Unknown action from worker: ${h.action}`);if(h.callbackId){const m=this.sourceName,_=h.sourceName;new Promise(function(u){u(s(h.data))}).then(function(u){l.postMessage({sourceName:m,targetName:_,callback:o.DATA,callbackId:h.callbackId,data:u})},function(u){l.postMessage({sourceName:m,targetName:_,callback:o.ERROR,callbackId:h.callbackId,reason:v(u)})});return}if(h.streamId){this.#e(h);return}s(h.data)},l.addEventListener("message",this._onComObjOnMessage)}on(r,t){const l=this.actionHandler;if(l[r])throw new Error(`There is already an actionName called "${r}"`);l[r]=t}send(r,t,l){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:r,data:t},l)}sendWithPromise(r,t,l){const p=this.callbackId++,h=new i.PromiseCapability;this.callbackCapabilities[p]=h;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:r,callbackId:p,data:t},l)}catch(s){h.reject(s)}return h.promise}sendWithStream(r,t,l,p){const h=this.streamId++,s=this.sourceName,m=this.targetName,_=this.comObj;return new ReadableStream({start:u=>{const w=new i.PromiseCapability;return this.streamControllers[h]={controller:u,startCall:w,pullCall:null,cancelCall:null,isClosed:!1},_.postMessage({sourceName:s,targetName:m,action:r,streamId:h,data:t,desiredSize:u.desiredSize},p),w.promise},pull:u=>{const w=new i.PromiseCapability;return this.streamControllers[h].pullCall=w,_.postMessage({sourceName:s,targetName:m,stream:f.PULL,streamId:h,desiredSize:u.desiredSize}),w.promise},cancel:u=>{(0,i.assert)(u instanceof Error,"cancel must have a valid reason");const w=new i.PromiseCapability;return this.streamControllers[h].cancelCall=w,this.streamControllers[h].isClosed=!0,_.postMessage({sourceName:s,targetName:m,stream:f.CANCEL,streamId:h,reason:v(u)}),w.promise}},l)}#e(r){const t=r.streamId,l=this.sourceName,p=r.sourceName,h=this.comObj,s=this,m=this.actionHandler[r.action],_={enqueue(u,w=1,C){if(this.isCancelled)return;const x=this.desiredSize;this.desiredSize-=w,x>0&&this.desiredSize<=0&&(this.sinkCapability=new i.PromiseCapability,this.ready=this.sinkCapability.promise),h.postMessage({sourceName:l,targetName:p,stream:f.ENQUEUE,streamId:t,chunk:u},C)},close(){this.isCancelled||(this.isCancelled=!0,h.postMessage({sourceName:l,targetName:p,stream:f.CLOSE,streamId:t}),delete s.streamSinks[t])},error(u){(0,i.assert)(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,h.postMessage({sourceName:l,targetName:p,stream:f.ERROR,streamId:t,reason:v(u)}))},sinkCapability:new i.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:r.desiredSize,ready:null};_.sinkCapability.resolve(),_.ready=_.sinkCapability.promise,this.streamSinks[t]=_,new Promise(function(u){u(m(r.data,_))}).then(function(){h.postMessage({sourceName:l,targetName:p,stream:f.START_COMPLETE,streamId:t,success:!0})},function(u){h.postMessage({sourceName:l,targetName:p,stream:f.START_COMPLETE,streamId:t,reason:v(u)})})}#t(r){const t=r.streamId,l=this.sourceName,p=r.sourceName,h=this.comObj,s=this.streamControllers[t],m=this.streamSinks[t];switch(r.stream){case f.START_COMPLETE:r.success?s.startCall.resolve():s.startCall.reject(v(r.reason));break;case f.PULL_COMPLETE:r.success?s.pullCall.resolve():s.pullCall.reject(v(r.reason));break;case f.PULL:if(!m){h.postMessage({sourceName:l,targetName:p,stream:f.PULL_COMPLETE,streamId:t,success:!0});break}m.desiredSize<=0&&r.desiredSize>0&&m.sinkCapability.resolve(),m.desiredSize=r.desiredSize,new Promise(function(_){_(m.onPull?.())}).then(function(){h.postMessage({sourceName:l,targetName:p,stream:f.PULL_COMPLETE,streamId:t,success:!0})},function(_){h.postMessage({sourceName:l,targetName:p,stream:f.PULL_COMPLETE,streamId:t,reason:v(_)})});break;case f.ENQUEUE:if((0,i.assert)(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(r.chunk);break;case f.CLOSE:if((0,i.assert)(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),this.#i(s,t);break;case f.ERROR:(0,i.assert)(s,"error should have stream controller"),s.controller.error(v(r.reason)),this.#i(s,t);break;case f.CANCEL_COMPLETE:r.success?s.cancelCall.resolve():s.cancelCall.reject(v(r.reason)),this.#i(s,t);break;case f.CANCEL:if(!m)break;new Promise(function(_){_(m.onCancel?.(v(r.reason)))}).then(function(){h.postMessage({sourceName:l,targetName:p,stream:f.CANCEL_COMPLETE,streamId:t,success:!0})},function(_){h.postMessage({sourceName:l,targetName:p,stream:f.CANCEL_COMPLETE,streamId:t,reason:v(_)})}),m.sinkCapability.reject(v(r.reason)),m.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#i(r,t){await Promise.allSettled([r.startCall?.promise,r.pullCall?.promise,r.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}e.MessageHandler=d},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var i=a(1);class o{#e;#t;constructor({parsedData:v,rawData:d}){this.#e=v,this.#t=d}getRaw(){return this.#t}get(v){return this.#e.get(v)??null}getAll(){return(0,i.objectFromMap)(this.#e)}has(v){return this.#e.has(v)}}e.Metadata=o},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var i=a(1),o=a(8);const f=Symbol("INTERNAL");class v{#e=!0;constructor(r,t){this.name=r,this.intent=t}get visible(){return this.#e}_setVisible(r,t){r!==f&&(0,i.unreachable)("Internal method `_setVisible` called."),this.#e=t}}class d{#e=null;#t=new Map;#i=null;#n=null;constructor(r){if(this.name=null,this.creator=null,r!==null){this.name=r.name,this.creator=r.creator,this.#n=r.order;for(const t of r.groups)this.#t.set(t.id,new v(t.name,t.intent));if(r.baseState==="OFF")for(const t of this.#t.values())t._setVisible(f,!1);for(const t of r.on)this.#t.get(t)._setVisible(f,!0);for(const t of r.off)this.#t.get(t)._setVisible(f,!1);this.#i=this.getHash()}}#o(r){const t=r.length;if(t<2)return!0;const l=r[0];for(let p=1;p<t;p++){const h=r[p];let s;if(Array.isArray(h))s=this.#o(h);else if(this.#t.has(h))s=this.#t.get(h).visible;else return(0,i.warn)(`Optional content group not found: ${h}`),!0;switch(l){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return l==="And"}isVisible(r){if(this.#t.size===0)return!0;if(!r)return(0,i.warn)("Optional content group not defined."),!0;if(r.type==="OCG")return this.#t.has(r.id)?this.#t.get(r.id).visible:((0,i.warn)(`Optional content group not found: ${r.id}`),!0);if(r.type==="OCMD"){if(r.expression)return this.#o(r.expression);if(!r.policy||r.policy==="AnyOn"){for(const t of r.ids){if(!this.#t.has(t))return(0,i.warn)(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(r.policy==="AllOn"){for(const t of r.ids){if(!this.#t.has(t))return(0,i.warn)(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(r.policy==="AnyOff"){for(const t of r.ids){if(!this.#t.has(t))return(0,i.warn)(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(r.policy==="AllOff"){for(const t of r.ids){if(!this.#t.has(t))return(0,i.warn)(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return(0,i.warn)(`Unknown optional content policy ${r.policy}.`),!0}return(0,i.warn)(`Unknown group type ${r.type}.`),!0}setVisibility(r,t=!0){if(!this.#t.has(r)){(0,i.warn)(`Optional content group not found: ${r}`);return}this.#t.get(r)._setVisible(f,!!t),this.#e=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?(0,i.objectFromMap)(this.#t):null}getGroup(r){return this.#t.get(r)||null}getHash(){if(this.#e!==null)return this.#e;const r=new o.MurmurHash3_64;for(const[t,l]of this.#t)r.update(`${t}:${l.visible}`);return this.#e=r.hexdigest()}}e.OptionalContentConfig=d},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var i=a(1),o=a(6);class f{constructor({length:r,initialData:t,progressiveDone:l=!1,contentDispositionFilename:p=null,disableRange:h=!1,disableStream:s=!1},m){if((0,i.assert)(m,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=p,t?.length>0){const _=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;this._queuedChunks.push(_)}this._pdfDataRangeTransport=m,this._isStreamingSupported=!s,this._isRangeSupported=!h,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((_,u)=>{this._onReceiveData({begin:_,chunk:u})}),this._pdfDataRangeTransport.addProgressListener((_,u)=>{this._onProgress({loaded:_,total:u})}),this._pdfDataRangeTransport.addProgressiveReadListener(_=>{this._onReceiveData({chunk:_})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:r,chunk:t}){const l=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(r===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(l):this._queuedChunks.push(l);else{const p=this._rangeReaders.some(function(h){return h._begin!==r?!1:(h._enqueue(l),!0)});(0,i.assert)(p,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(r){r.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:r.loaded}):this._fullRequestReader?.onProgress?.({loaded:r.loaded,total:r.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(r){const t=this._rangeReaders.indexOf(r);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const r=this._queuedChunks;return this._queuedChunks=null,new v(this,r,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(r,t){if(t<=this._progressiveDataLength)return null;const l=new d(this,r,t);return this._pdfDataRangeTransport.requestDataRange(r,t),this._rangeReaders.push(l),l}cancelAllRequests(r){this._fullRequestReader?.cancel(r);for(const t of this._rangeReaders.slice(0))t.cancel(r);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=f;class v{constructor(r,t,l=!1,p=null){this._stream=r,this._done=l||!1,this._filename=(0,o.isPdfFile)(p)?p:null,this._queuedChunks=t||[],this._loaded=0;for(const h of this._queuedChunks)this._loaded+=h.byteLength;this._requests=[],this._headersReady=Promise.resolve(),r._fullRequestReader=this,this.onProgress=null}_enqueue(r){this._done||(this._requests.length>0?this._requests.shift().resolve({value:r,done:!1}):this._queuedChunks.push(r),this._loaded+=r.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const r=new i.PromiseCapability;return this._requests.push(r),r.promise}cancel(r){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class d{constructor(r,t,l){this._stream=r,this._begin=t,this._end=l,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(r){if(!this._done){if(this._requests.length===0)this._queuedChunk=r;else{this._requests.shift().resolve({value:r,done:!1});for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const r=new i.PromiseCapability;return this._requests.push(r),r.promise}cancel(r){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var i=a(1),o=a(20);function f(l,p,h){return{method:"GET",headers:l,signal:h.signal,mode:"cors",credentials:p?"include":"same-origin",redirect:"follow"}}function v(l){const p=new Headers;for(const h in l){const s=l[h];s!==void 0&&p.append(h,s)}return p}function d(l){return l instanceof Uint8Array?l.buffer:l instanceof ArrayBuffer?l:((0,i.warn)(`getArrayBuffer - unexpected data format: ${l}`),new Uint8Array(l).buffer)}class P{constructor(p){this.source=p,this.isHttp=/^https?:/i.test(p.url),this.httpHeaders=this.isHttp&&p.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new r(this),this._fullRequestReader}getRangeReader(p,h){if(h<=this._progressiveDataLength)return null;const s=new t(this,p,h);return this._rangeRequestReaders.push(s),s}cancelAllRequests(p){this._fullRequestReader?.cancel(p);for(const h of this._rangeRequestReaders.slice(0))h.cancel(p)}}e.PDFFetchStream=P;class r{constructor(p){this._stream=p,this._reader=null,this._loaded=0,this._filename=null;const h=p.source;this._withCredentials=h.withCredentials||!1,this._contentLength=h.length,this._headersCapability=new i.PromiseCapability,this._disableRange=h.disableRange||!1,this._rangeChunkSize=h.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!h.disableStream,this._isRangeSupported=!h.disableRange,this._headers=v(this._stream.httpHeaders);const s=h.url;fetch(s,f(this._headers,this._withCredentials,this._abortController)).then(m=>{if(!(0,o.validateResponseStatus)(m.status))throw(0,o.createResponseStatusError)(m.status,s);this._reader=m.body.getReader(),this._headersCapability.resolve();const _=C=>m.headers.get(C),{allowRangeRequests:u,suggestedLength:w}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=w||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(_),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:p,done:h}=await this._reader.read();return h?{value:p,done:h}:(this._loaded+=p.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:d(p),done:!1})}cancel(p){this._reader?.cancel(p),this._abortController.abort()}}class t{constructor(p,h,s){this._stream=p,this._reader=null,this._loaded=0;const m=p.source;this._withCredentials=m.withCredentials||!1,this._readCapability=new i.PromiseCapability,this._isStreamingSupported=!m.disableStream,this._abortController=new AbortController,this._headers=v(this._stream.httpHeaders),this._headers.append("Range",`bytes=${h}-${s-1}`);const _=m.url;fetch(_,f(this._headers,this._withCredentials,this._abortController)).then(u=>{if(!(0,o.validateResponseStatus)(u.status))throw(0,o.createResponseStatusError)(u.status,_);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:p,done:h}=await this._reader.read();return h?{value:p,done:h}:(this._loaded+=p.byteLength,this.onProgress?.({loaded:this._loaded}),{value:d(p),done:!1})}cancel(p){this._reader?.cancel(p),this._abortController.abort()}}},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=P,e.extractFilenameFromHeader=d,e.validateRangeRequestCapabilities=v,e.validateResponseStatus=r;var i=a(1),o=a(21),f=a(6);function v({getResponseHeader:t,isHttp:l,rangeChunkSize:p,disableRange:h}){const s={allowRangeRequests:!1,suggestedLength:void 0},m=parseInt(t("Content-Length"),10);return!Number.isInteger(m)||(s.suggestedLength=m,m<=2*p)||h||!l||t("Accept-Ranges")!=="bytes"||(t("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function d(t){const l=t("Content-Disposition");if(l){let p=(0,o.getFilenameFromContentDispositionHeader)(l);if(p.includes("%"))try{p=decodeURIComponent(p)}catch{}if((0,f.isPdfFile)(p))return p}return null}function P(t,l){return t===404||t===0&&l.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+l+'".'):new i.UnexpectedResponseException(`Unexpected server response (${t}) while retrieving PDF "${l}".`,t)}function r(t){return t===200||t===206}},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=o;var i=a(1);function o(f){let v=!0,d=P("filename\\*","i").exec(f);if(d){d=d[1];let m=p(d);return m=unescape(m),m=h(m),m=s(m),t(m)}if(d=l(f),d){const m=s(d);return t(m)}if(d=P("filename","i").exec(f),d){d=d[1];let m=p(d);return m=s(m),t(m)}function P(m,_){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',_)}function r(m,_){if(m){if(!/^[\x00-\xFF]+$/.test(_))return _;try{const u=new TextDecoder(m,{fatal:!0}),w=(0,i.stringToBytes)(_);_=u.decode(w),v=!1}catch{}}return _}function t(m){return v&&/[\x80-\xff]/.test(m)&&(m=r("utf-8",m),v&&(m=r("iso-8859-1",m))),m}function l(m){const _=[];let u;const w=P("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(u=w.exec(m))!==null;){let[,x,c,b]=u;if(x=parseInt(x,10),x in _){if(x===0)break;continue}_[x]=[c,b]}const C=[];for(let x=0;x<_.length&&x in _;++x){let[c,b]=_[x];b=p(b),c&&(b=unescape(b),x===0&&(b=h(b))),C.push(b)}return C.join("")}function p(m){if(m.startsWith('"')){const _=m.slice(1).split('\\"');for(let u=0;u<_.length;++u){const w=_[u].indexOf('"');w!==-1&&(_[u]=_[u].slice(0,w),_.length=u+1),_[u]=_[u].replaceAll(/\\(.)/g,"$1")}m=_.join('"')}return m}function h(m){const _=m.indexOf("'");if(_===-1)return m;const u=m.slice(0,_),C=m.slice(_+1).replace(/^[^']*'/,"");return r(u,C)}function s(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(_,u,w,C){if(w==="q"||w==="Q")return C=C.replaceAll("_"," "),C=C.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,c){return String.fromCharCode(parseInt(c,16))}),r(u,C);try{C=atob(C)}catch{}return r(u,C)})}return""}},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var i=a(1),o=a(20);const f=200,v=206;function d(p){const h=p.response;return typeof h!="string"?h:(0,i.stringToBytes)(h).buffer}class P{constructor(h,s={}){this.url=h,this.isHttp=/^https?:/i.test(h),this.httpHeaders=this.isHttp&&s.httpHeaders||Object.create(null),this.withCredentials=s.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(h,s,m){const _={begin:h,end:s};for(const u in m)_[u]=m[u];return this.request(_)}requestFull(h){return this.request(h)}request(h){const s=new XMLHttpRequest,m=this.currXhrId++,_=this.pendingRequests[m]={xhr:s};s.open("GET",this.url),s.withCredentials=this.withCredentials;for(const u in this.httpHeaders){const w=this.httpHeaders[u];w!==void 0&&s.setRequestHeader(u,w)}return this.isHttp&&"begin"in h&&"end"in h?(s.setRequestHeader("Range",`bytes=${h.begin}-${h.end-1}`),_.expectedStatus=v):_.expectedStatus=f,s.responseType="arraybuffer",h.onError&&(s.onerror=function(u){h.onError(s.status)}),s.onreadystatechange=this.onStateChange.bind(this,m),s.onprogress=this.onProgress.bind(this,m),_.onHeadersReceived=h.onHeadersReceived,_.onDone=h.onDone,_.onError=h.onError,_.onProgress=h.onProgress,s.send(null),m}onProgress(h,s){const m=this.pendingRequests[h];m&&m.onProgress?.(s)}onStateChange(h,s){const m=this.pendingRequests[h];if(!m)return;const _=m.xhr;if(_.readyState>=2&&m.onHeadersReceived&&(m.onHeadersReceived(),delete m.onHeadersReceived),_.readyState!==4||!(h in this.pendingRequests))return;if(delete this.pendingRequests[h],_.status===0&&this.isHttp){m.onError?.(_.status);return}const u=_.status||f;if(!(u===f&&m.expectedStatus===v)&&u!==m.expectedStatus){m.onError?.(_.status);return}const C=d(_);if(u===v){const x=_.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(x);m.onDone({begin:parseInt(c[1],10),chunk:C})}else C?m.onDone({begin:0,chunk:C}):m.onError?.(_.status)}getRequestXhr(h){return this.pendingRequests[h].xhr}isPendingRequest(h){return h in this.pendingRequests}abortRequest(h){const s=this.pendingRequests[h].xhr;delete this.pendingRequests[h],s.abort()}}class r{constructor(h){this._source=h,this._manager=new P(h.url,{httpHeaders:h.httpHeaders,withCredentials:h.withCredentials}),this._rangeChunkSize=h.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(h){const s=this._rangeRequestReaders.indexOf(h);s>=0&&this._rangeRequestReaders.splice(s,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new t(this._manager,this._source),this._fullRequestReader}getRangeReader(h,s){const m=new l(this._manager,h,s);return m.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(m),m}cancelAllRequests(h){this._fullRequestReader?.cancel(h);for(const s of this._rangeRequestReaders.slice(0))s.cancel(h)}}e.PDFNetworkStream=r;class t{constructor(h,s){this._manager=h;const m={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=s.url,this._fullRequestId=h.requestFull(m),this._headersReceivedCapability=new i.PromiseCapability,this._disableRange=s.disableRange||!1,this._contentLength=s.length,this._rangeChunkSize=s.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const h=this._fullRequestId,s=this._manager.getRequestXhr(h),m=w=>s.getResponseHeader(w),{allowRangeRequests:_,suggestedLength:u}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:m,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});_&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(m),this._isRangeSupported&&this._manager.abortRequest(h),this._headersReceivedCapability.resolve()}_onDone(h){if(h&&(this._requests.length>0?this._requests.shift().resolve({value:h.chunk,done:!1}):this._cachedChunks.push(h.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(h){this._storedError=(0,o.createResponseStatusError)(h,this._url),this._headersReceivedCapability.reject(this._storedError);for(const s of this._requests)s.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(h){this.onProgress?.({loaded:h.loaded,total:h.lengthComputable?h.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const h=new i.PromiseCapability;return this._requests.push(h),h.promise}cancel(h){this._done=!0,this._headersReceivedCapability.reject(h);for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class l{constructor(h,s,m){this._manager=h;const _={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=h.url,this._requestId=h.requestRange(s,m,_),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(h){const s=h.chunk;this._requests.length>0?this._requests.shift().resolve({value:s,done:!1}):this._queuedChunk=s,this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(h){this._storedError=(0,o.createResponseStatusError)(h,this._url);for(const s of this._requests)s.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(h){this.isStreamingSupported||this.onProgress?.({loaded:h.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const s=this._queuedChunk;return this._queuedChunk=null,{value:s,done:!1}}if(this._done)return{value:void 0,done:!0};const h=new i.PromiseCapability;return this._requests.push(h),h.promise}cancel(h){this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var i=a(1),o=a(20);const f=/^file:\/\/\/[a-zA-Z]:\//;function v(m){const _=require$$5,u=_.parse(m);return u.protocol==="file:"||u.host?u:/^[a-z]:[/\\]/i.test(m)?_.parse(`file:///${m}`):(u.host||(u.protocol="file:"),u)}class d{constructor(_){this.source=_,this.url=v(_.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&_.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new h(this):new l(this),this._fullRequestReader}getRangeReader(_,u){if(u<=this._progressiveDataLength)return null;const w=this.isFsUrl?new s(this,_,u):new p(this,_,u);return this._rangeRequestReaders.push(w),w}cancelAllRequests(_){this._fullRequestReader?.cancel(_);for(const u of this._rangeRequestReaders.slice(0))u.cancel(_)}}e.PDFNodeStream=d;class P{constructor(_){this._url=_.url,this._done=!1,this._storedError=null,this.onProgress=null;const u=_.source;this._contentLength=u.length,this._loaded=0,this._filename=null,this._disableRange=u.disableRange||!1,this._rangeChunkSize=u.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!u.disableStream,this._isRangeSupported=!u.disableRange,this._readableStream=null,this._readCapability=new i.PromiseCapability,this._headersCapability=new i.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const _=this._readableStream.read();return _===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=_.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(_).buffer,done:!1})}cancel(_){if(!this._readableStream){this._error(_);return}this._readableStream.destroy(_)}_error(_){this._storedError=_,this._readCapability.resolve()}_setReadableStream(_){this._readableStream=_,_.on("readable",()=>{this._readCapability.resolve()}),_.on("end",()=>{_.destroy(),this._done=!0,this._readCapability.resolve()}),_.on("error",u=>{this._error(u)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class r{constructor(_){this._url=_.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new i.PromiseCapability;const u=_.source;this._isStreamingSupported=!u.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const _=this._readableStream.read();return _===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=_.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(_).buffer,done:!1})}cancel(_){if(!this._readableStream){this._error(_);return}this._readableStream.destroy(_)}_error(_){this._storedError=_,this._readCapability.resolve()}_setReadableStream(_){this._readableStream=_,_.on("readable",()=>{this._readCapability.resolve()}),_.on("end",()=>{_.destroy(),this._done=!0,this._readCapability.resolve()}),_.on("error",u=>{this._error(u)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function t(m,_){return{protocol:m.protocol,auth:m.auth,host:m.hostname,port:m.port,path:m.path,method:"GET",headers:_}}class l extends P{constructor(_){super(_);const u=w=>{if(w.statusCode===404){const b=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=b,this._headersCapability.reject(b);return}this._headersCapability.resolve(),this._setReadableStream(w);const C=b=>this._readableStream.headers[b.toLowerCase()],{allowRangeRequests:x,suggestedLength:c}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:C,isHttp:_.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=x,this._contentLength=c||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(C)};if(this._request=null,this._url.protocol==="http:"){const w=require$$5;this._request=w.request(t(this._url,_.httpHeaders),u)}else{const w=require$$5;this._request=w.request(t(this._url,_.httpHeaders),u)}this._request.on("error",w=>{this._storedError=w,this._headersCapability.reject(w)}),this._request.end()}}class p extends r{constructor(_,u,w){super(_),this._httpHeaders={};for(const x in _.httpHeaders){const c=_.httpHeaders[x];c!==void 0&&(this._httpHeaders[x]=c)}this._httpHeaders.Range=`bytes=${u}-${w-1}`;const C=x=>{if(x.statusCode===404){const c=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=c;return}this._setReadableStream(x)};if(this._request=null,this._url.protocol==="http:"){const x=require$$5;this._request=x.request(t(this._url,this._httpHeaders),C)}else{const x=require$$5;this._request=x.request(t(this._url,this._httpHeaders),C)}this._request.on("error",x=>{this._storedError=x}),this._request.end()}}class h extends P{constructor(_){super(_);let u=decodeURIComponent(this._url.path);f.test(this._url.href)&&(u=u.replace(/^\//,""));const w=require$$5;w.lstat(u,(C,x)=>{if(C){C.code==="ENOENT"&&(C=new i.MissingPDFException(`Missing PDF "${u}".`)),this._storedError=C,this._headersCapability.reject(C);return}this._contentLength=x.size,this._setReadableStream(w.createReadStream(u)),this._headersCapability.resolve()})}}class s extends r{constructor(_,u,w){super(_);let C=decodeURIComponent(this._url.path);f.test(this._url.href)&&(C=C.replace(/^\//,""));const x=require$$5;this._setReadableStream(x.createReadStream(C,{start:u,end:w-1}))}}},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var i=a(6),o=a(1);const f={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},v="http://www.w3.org/XML/1998/namespace",d="http://www.w3.org/1999/xlink",P=["butt","round","square"],r=["miter","round","bevel"],t=function(x,c="",b=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!b)return URL.createObjectURL(new Blob([x],{type:c}));const D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let B=`data:${c};base64,`;for(let L=0,O=x.length;L<O;L+=3){const j=x[L]&255,q=x[L+1]&255,ee=x[L+2]&255,W=j>>2,J=(j&3)<<4|q>>4,G=L+1<O?(q&15)<<2|ee>>6:64,T=L+2<O?ee&63:64;B+=D[W]+D[J]+D[G]+D[T]}return B},l=function(){const x=new Uint8Array([137,80,78,71,13,10,26,10]),c=12,b=new Int32Array(256);for(let ee=0;ee<256;ee++){let W=ee;for(let J=0;J<8;J++)W=W&1?3988292384^W>>1&2147483647:W>>1&2147483647;b[ee]=W}function D(ee,W,J){let G=-1;for(let T=W;T<J;T++){const E=(G^ee[T])&255,y=b[E];G=G>>>8^y}return G^-1}function B(ee,W,J,G){let T=G;const E=W.length;J[T]=E>>24&255,J[T+1]=E>>16&255,J[T+2]=E>>8&255,J[T+3]=E&255,T+=4,J[T]=ee.charCodeAt(0)&255,J[T+1]=ee.charCodeAt(1)&255,J[T+2]=ee.charCodeAt(2)&255,J[T+3]=ee.charCodeAt(3)&255,T+=4,J.set(W,T),T+=W.length;const y=D(J,G+4,T);J[T]=y>>24&255,J[T+1]=y>>16&255,J[T+2]=y>>8&255,J[T+3]=y&255}function L(ee,W,J){let G=1,T=0;for(let E=W;E<J;++E)G=(G+(ee[E]&255))%65521,T=(T+G)%65521;return T<<16|G}function O(ee){if(!o.isNodeJS)return j(ee);try{const W=parseInt(process.versions.node)>=8?ee:Buffer.from(ee),J=require$$5.deflateSync(W,{level:9});return J instanceof Uint8Array?J:new Uint8Array(J)}catch(W){(0,o.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+W)}return j(ee)}function j(ee){let W=ee.length;const J=65535,G=Math.ceil(W/J),T=new Uint8Array(2+W+G*5+4);let E=0;T[E++]=120,T[E++]=156;let y=0;for(;W>J;)T[E++]=0,T[E++]=255,T[E++]=255,T[E++]=0,T[E++]=0,T.set(ee.subarray(y,y+J),E),E+=J,y+=J,W-=J;T[E++]=1,T[E++]=W&255,T[E++]=W>>8&255,T[E++]=~W&65535&255,T[E++]=(~W&65535)>>8&255,T.set(ee.subarray(y),E),E+=ee.length-y;const g=L(ee,0,ee.length);return T[E++]=g>>24&255,T[E++]=g>>16&255,T[E++]=g>>8&255,T[E++]=g&255,T}function q(ee,W,J,G){const T=ee.width,E=ee.height;let y,g,M;const k=ee.data;switch(W){case o.ImageKind.GRAYSCALE_1BPP:g=0,y=1,M=T+7>>3;break;case o.ImageKind.RGB_24BPP:g=2,y=8,M=T*3;break;case o.ImageKind.RGBA_32BPP:g=6,y=8,M=T*4;break;default:throw new Error("invalid format")}const N=new Uint8Array((1+M)*E);let H=0,I=0;for(let $=0;$<E;++$)N[H++]=0,N.set(k.subarray(I,I+M),H),I+=M,H+=M;if(W===o.ImageKind.GRAYSCALE_1BPP&&G){H=0;for(let $=0;$<E;$++){H++;for(let X=0;X<M;X++)N[H++]^=255}}const S=new Uint8Array([T>>24&255,T>>16&255,T>>8&255,T&255,E>>24&255,E>>16&255,E>>8&255,E&255,y,g,0,0,0]),F=O(N),R=x.length+c*3+S.length+F.length,U=new Uint8Array(R);let V=0;return U.set(x,V),V+=x.length,B("IHDR",S,U,V),V+=c+S.length,B("IDATA",F,U,V),V+=c+F.length,B("IEND",new Uint8Array(0),U,V),t(U,"image/png",J)}return function(W,J,G){const T=W.kind===void 0?o.ImageKind.GRAYSCALE_1BPP:W.kind;return q(W,T,J,G)}}();class p{constructor(){this.fontSizeScale=1,this.fontWeight=f.fontWeight,this.fontSize=0,this.textMatrix=o.IDENTITY_MATRIX,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=o.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=f.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(c,b){this.x=c,this.y=b}}function h(x){let c=[];const b=[];for(const D of x){if(D.fn==="save"){c.push({fnId:92,fn:"group",items:[]}),b.push(c),c=c.at(-1).items;continue}D.fn==="restore"?c=b.pop():c.push(D)}return c}function s(x){if(Number.isInteger(x))return x.toString();const c=x.toFixed(10);let b=c.length-1;if(c[b]!=="0")return c;do b--;while(c[b]==="0");return c.substring(0,c[b]==="."?b:b+1)}function m(x){if(x[4]===0&&x[5]===0){if(x[1]===0&&x[2]===0)return x[0]===1&&x[3]===1?"":`scale(${s(x[0])} ${s(x[3])})`;if(x[0]===x[3]&&x[1]===-x[2]){const c=Math.acos(x[0])*180/Math.PI;return`rotate(${s(c)})`}}else if(x[0]===1&&x[1]===0&&x[2]===0&&x[3]===1)return`translate(${s(x[4])} ${s(x[5])})`;return`matrix(${s(x[0])} ${s(x[1])} ${s(x[2])} ${s(x[3])} ${s(x[4])} ${s(x[5])})`}let _=0,u=0,w=0;class C{constructor(c,b,D=!1){(0,i.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new i.DOMSVGFactory,this.current=new p,this.transformMatrix=o.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=c,this.objs=b,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!D,this._operatorIdMapping=[];for(const B in o.OPS)this._operatorIdMapping[o.OPS[B]]=B}getObject(c,b=null){return typeof c=="string"?c.startsWith("g_")?this.commonObjs.get(c):this.objs.get(c):b}save(){this.transformStack.push(this.transformMatrix);const c=this.current;this.extraStack.push(c),this.current=c.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(c){this.save(),this.executeOpTree(c),this.restore()}loadDependencies(c){const b=c.fnArray,D=c.argsArray;for(let B=0,L=b.length;B<L;B++)if(b[B]===o.OPS.dependency)for(const O of D[B]){const j=O.startsWith("g_")?this.commonObjs:this.objs,q=new Promise(ee=>{j.get(O,ee)});this.current.dependencies.push(q)}return Promise.all(this.current.dependencies)}transform(c,b,D,B,L,O){const j=[c,b,D,B,L,O];this.transformMatrix=o.Util.transform(this.transformMatrix,j),this.tgrp=null}getSVG(c,b){this.viewport=b;const D=this._initialize(b);return this.loadDependencies(c).then(()=>(this.transformMatrix=o.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(c)),D))}convertOpList(c){const b=this._operatorIdMapping,D=c.argsArray,B=c.fnArray,L=[];for(let O=0,j=B.length;O<j;O++){const q=B[O];L.push({fnId:q,fn:b[q],args:D[O]})}return h(L)}executeOpTree(c){for(const b of c){const D=b.fn,B=b.fnId,L=b.args;switch(B|0){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(L);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(L[0],L[1]);break;case o.OPS.setFont:this.setFont(L);break;case o.OPS.showText:this.showText(L[0]);break;case o.OPS.showSpacedText:this.showText(L[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(L[0],L[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(L[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(L[0]);break;case o.OPS.setHScale:this.setHScale(L[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(L[0],L[1],L[2],L[3],L[4],L[5]);break;case o.OPS.setTextRise:this.setTextRise(L[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(L[0]);break;case o.OPS.setLineWidth:this.setLineWidth(L[0]);break;case o.OPS.setLineJoin:this.setLineJoin(L[0]);break;case o.OPS.setLineCap:this.setLineCap(L[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(L[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(L[0],L[1],L[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(L[0],L[1],L[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(L);break;case o.OPS.setFillColorN:this.setFillColorN(L);break;case o.OPS.shadingFill:this.shadingFill(L[0]);break;case o.OPS.setDash:this.setDash(L[0],L[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(L[0]);break;case o.OPS.setFlatness:this.setFlatness(L[0]);break;case o.OPS.setGState:this.setGState(L[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(L[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(L[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(L[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(L[0],L[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(L[0],L[1],L[2],L[3],L[4],L[5]);break;case o.OPS.constructPath:this.constructPath(L[0],L[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(b.items);break;default:(0,o.warn)(`Unimplemented operator ${D}`);break}}}setWordSpacing(c){this.current.wordSpacing=c}setCharSpacing(c){this.current.charSpacing=c}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(c,b,D,B,L,O){const j=this.current;j.textMatrix=j.lineMatrix=[c,b,D,B,L,O],j.textMatrixScale=Math.hypot(c,b),j.x=j.lineX=0,j.y=j.lineY=0,j.xcoords=[],j.ycoords=[],j.tspan=this.svgFactory.createElement("svg:tspan"),j.tspan.setAttributeNS(null,"font-family",j.fontFamily),j.tspan.setAttributeNS(null,"font-size",`${s(j.fontSize)}px`),j.tspan.setAttributeNS(null,"y",s(-j.y)),j.txtElement=this.svgFactory.createElement("svg:text"),j.txtElement.append(j.tspan)}beginText(){const c=this.current;c.x=c.lineX=0,c.y=c.lineY=0,c.textMatrix=o.IDENTITY_MATRIX,c.lineMatrix=o.IDENTITY_MATRIX,c.textMatrixScale=1,c.tspan=this.svgFactory.createElement("svg:tspan"),c.txtElement=this.svgFactory.createElement("svg:text"),c.txtgrp=this.svgFactory.createElement("svg:g"),c.xcoords=[],c.ycoords=[]}moveText(c,b){const D=this.current;D.x=D.lineX+=c,D.y=D.lineY+=b,D.xcoords=[],D.ycoords=[],D.tspan=this.svgFactory.createElement("svg:tspan"),D.tspan.setAttributeNS(null,"font-family",D.fontFamily),D.tspan.setAttributeNS(null,"font-size",`${s(D.fontSize)}px`),D.tspan.setAttributeNS(null,"y",s(-D.y))}showText(c){const b=this.current,D=b.font,B=b.fontSize;if(B===0)return;const L=b.fontSizeScale,O=b.charSpacing,j=b.wordSpacing,q=b.fontDirection,ee=b.textHScale*q,W=D.vertical,J=W?1:-1,G=D.defaultVMetrics,T=B*b.fontMatrix[0];let E=0;for(const M of c){if(M===null){E+=q*j;continue}else if(typeof M=="number"){E+=J*M*B/1e3;continue}const k=(M.isSpace?j:0)+O,N=M.fontChar;let H,I,S=M.width;if(W){let R;const U=M.vmetric||G;R=M.vmetric?U[1]:S*.5,R=-R*T;const V=U[2]*T;S=U?-U[0]:S,H=R/L,I=(E+V)/L}else H=E/L,I=0;(M.isInFont||D.missingFile)&&(b.xcoords.push(b.x+H),W&&b.ycoords.push(-b.y+I),b.tspan.textContent+=N);const F=W?S*T-k*q:S*T+k*q;E+=F}b.tspan.setAttributeNS(null,"x",b.xcoords.map(s).join(" ")),W?b.tspan.setAttributeNS(null,"y",b.ycoords.map(s).join(" ")):b.tspan.setAttributeNS(null,"y",s(-b.y)),W?b.y-=E:b.x+=E*ee,b.tspan.setAttributeNS(null,"font-family",b.fontFamily),b.tspan.setAttributeNS(null,"font-size",`${s(b.fontSize)}px`),b.fontStyle!==f.fontStyle&&b.tspan.setAttributeNS(null,"font-style",b.fontStyle),b.fontWeight!==f.fontWeight&&b.tspan.setAttributeNS(null,"font-weight",b.fontWeight);const y=b.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if(y===o.TextRenderingMode.FILL||y===o.TextRenderingMode.FILL_STROKE?(b.fillColor!==f.fillColor&&b.tspan.setAttributeNS(null,"fill",b.fillColor),b.fillAlpha<1&&b.tspan.setAttributeNS(null,"fill-opacity",b.fillAlpha)):b.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?b.tspan.setAttributeNS(null,"fill","transparent"):b.tspan.setAttributeNS(null,"fill","none"),y===o.TextRenderingMode.STROKE||y===o.TextRenderingMode.FILL_STROKE){const M=1/(b.textMatrixScale||1);this._setStrokeAttributes(b.tspan,M)}let g=b.textMatrix;b.textRise!==0&&(g=g.slice(),g[5]+=b.textRise),b.txtElement.setAttributeNS(null,"transform",`${m(g)} scale(${s(ee)}, -1)`),b.txtElement.setAttributeNS(v,"xml:space","preserve"),b.txtElement.append(b.tspan),b.txtgrp.append(b.txtElement),this._ensureTransformGroup().append(b.txtElement)}setLeadingMoveText(c,b){this.setLeading(-b),this.moveText(c,b)}addFontStyle(c){if(!c.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const b=t(c.data,c.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${c.loadedName}"; src: url(${b}); }
`}setFont(c){const b=this.current,D=this.commonObjs.get(c[0]);let B=c[1];b.font=D,this.embedFonts&&!D.missingFile&&!this.embeddedFonts[D.loadedName]&&(this.addFontStyle(D),this.embeddedFonts[D.loadedName]=D),b.fontMatrix=D.fontMatrix||o.FONT_IDENTITY_MATRIX;let L="normal";D.black?L="900":D.bold&&(L="bold");const O=D.italic?"italic":"normal";B<0?(B=-B,b.fontDirection=-1):b.fontDirection=1,b.fontSize=B,b.fontFamily=D.loadedName,b.fontWeight=L,b.fontStyle=O,b.tspan=this.svgFactory.createElement("svg:tspan"),b.tspan.setAttributeNS(null,"y",s(-b.y)),b.xcoords=[],b.ycoords=[]}endText(){const c=this.current;c.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG&&c.txtElement?.hasChildNodes()&&(c.element=c.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(c){c>0&&(this.current.lineWidth=c)}setLineCap(c){this.current.lineCap=P[c]}setLineJoin(c){this.current.lineJoin=r[c]}setMiterLimit(c){this.current.miterLimit=c}setStrokeAlpha(c){this.current.strokeAlpha=c}setStrokeRGBColor(c,b,D){this.current.strokeColor=o.Util.makeHexColor(c,b,D)}setFillAlpha(c){this.current.fillAlpha=c}setFillRGBColor(c,b,D){this.current.fillColor=o.Util.makeHexColor(c,b,D),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(c){this.current.strokeColor=this._makeColorN_Pattern(c)}setFillColorN(c){this.current.fillColor=this._makeColorN_Pattern(c)}shadingFill(c){const{width:b,height:D}=this.viewport,B=o.Util.inverseTransform(this.transformMatrix),[L,O,j,q]=o.Util.getAxialAlignedBoundingBox([0,0,b,D],B),ee=this.svgFactory.createElement("svg:rect");ee.setAttributeNS(null,"x",L),ee.setAttributeNS(null,"y",O),ee.setAttributeNS(null,"width",j-L),ee.setAttributeNS(null,"height",q-O),ee.setAttributeNS(null,"fill",this._makeShadingPattern(c)),this.current.fillAlpha<1&&ee.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(ee)}_makeColorN_Pattern(c){return c[0]==="TilingPattern"?this._makeTilingPattern(c):this._makeShadingPattern(c)}_makeTilingPattern(c){const b=c[1],D=c[2],B=c[3]||o.IDENTITY_MATRIX,[L,O,j,q]=c[4],ee=c[5],W=c[6],J=c[7],G=`shading${w++}`,[T,E,y,g]=o.Util.normalizeRect([...o.Util.applyTransform([L,O],B),...o.Util.applyTransform([j,q],B)]),[M,k]=o.Util.singularValueDecompose2dScale(B),N=ee*M,H=W*k,I=this.svgFactory.createElement("svg:pattern");I.setAttributeNS(null,"id",G),I.setAttributeNS(null,"patternUnits","userSpaceOnUse"),I.setAttributeNS(null,"width",N),I.setAttributeNS(null,"height",H),I.setAttributeNS(null,"x",`${T}`),I.setAttributeNS(null,"y",`${E}`);const S=this.svg,F=this.transformMatrix,R=this.current.fillColor,U=this.current.strokeColor,V=this.svgFactory.create(y-T,g-E);if(this.svg=V,this.transformMatrix=B,J===2){const $=o.Util.makeHexColor(...b);this.current.fillColor=$,this.current.strokeColor=$}return this.executeOpTree(this.convertOpList(D)),this.svg=S,this.transformMatrix=F,this.current.fillColor=R,this.current.strokeColor=U,I.append(V.childNodes[0]),this.defs.append(I),`url(#${G})`}_makeShadingPattern(c){switch(typeof c=="string"&&(c=this.objs.get(c)),c[0]){case"RadialAxial":const b=`shading${w++}`,D=c[3];let B;switch(c[1]){case"axial":const L=c[4],O=c[5];B=this.svgFactory.createElement("svg:linearGradient"),B.setAttributeNS(null,"id",b),B.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),B.setAttributeNS(null,"x1",L[0]),B.setAttributeNS(null,"y1",L[1]),B.setAttributeNS(null,"x2",O[0]),B.setAttributeNS(null,"y2",O[1]);break;case"radial":const j=c[4],q=c[5],ee=c[6],W=c[7];B=this.svgFactory.createElement("svg:radialGradient"),B.setAttributeNS(null,"id",b),B.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),B.setAttributeNS(null,"cx",q[0]),B.setAttributeNS(null,"cy",q[1]),B.setAttributeNS(null,"r",W),B.setAttributeNS(null,"fx",j[0]),B.setAttributeNS(null,"fy",j[1]),B.setAttributeNS(null,"fr",ee);break;default:throw new Error(`Unknown RadialAxial type: ${c[1]}`)}for(const L of D){const O=this.svgFactory.createElement("svg:stop");O.setAttributeNS(null,"offset",L[0]),O.setAttributeNS(null,"stop-color",L[1]),B.append(O)}return this.defs.append(B),`url(#${b})`;case"Mesh":return(0,o.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${c[0]}`)}}setDash(c,b){this.current.dashArray=c,this.current.dashPhase=b}constructPath(c,b){const D=this.current;let B=D.x,L=D.y,O=[],j=0;for(const q of c)switch(q|0){case o.OPS.rectangle:B=b[j++],L=b[j++];const ee=b[j++],W=b[j++],J=B+ee,G=L+W;O.push("M",s(B),s(L),"L",s(J),s(L),"L",s(J),s(G),"L",s(B),s(G),"Z");break;case o.OPS.moveTo:B=b[j++],L=b[j++],O.push("M",s(B),s(L));break;case o.OPS.lineTo:B=b[j++],L=b[j++],O.push("L",s(B),s(L));break;case o.OPS.curveTo:B=b[j+4],L=b[j+5],O.push("C",s(b[j]),s(b[j+1]),s(b[j+2]),s(b[j+3]),s(B),s(L)),j+=6;break;case o.OPS.curveTo2:O.push("C",s(B),s(L),s(b[j]),s(b[j+1]),s(b[j+2]),s(b[j+3])),B=b[j+2],L=b[j+3],j+=4;break;case o.OPS.curveTo3:B=b[j+2],L=b[j+3],O.push("C",s(b[j]),s(b[j+1]),s(B),s(L),s(B),s(L)),j+=4;break;case o.OPS.closePath:O.push("Z");break}O=O.join(" "),D.path&&c.length>0&&c[0]!==o.OPS.rectangle&&c[0]!==o.OPS.moveTo?O=D.path.getAttributeNS(null,"d")+O:(D.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(D.path)),D.path.setAttributeNS(null,"d",O),D.path.setAttributeNS(null,"fill","none"),D.element=D.path,D.setCurrentPoint(B,L)}endPath(){const c=this.current;if(c.path=null,!this.pendingClip)return;if(!c.element){this.pendingClip=null;return}const b=`clippath${_++}`,D=this.svgFactory.createElement("svg:clipPath");D.setAttributeNS(null,"id",b),D.setAttributeNS(null,"transform",m(this.transformMatrix));const B=c.element.cloneNode(!0);if(this.pendingClip==="evenodd"?B.setAttributeNS(null,"clip-rule","evenodd"):B.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,D.append(B),this.defs.append(D),c.activeClipUrl){c.clipGroup=null;for(const L of this.extraStack)L.clipGroup=null;D.setAttributeNS(null,"clip-path",c.activeClipUrl)}c.activeClipUrl=`url(#${b})`,this.tgrp=null}clip(c){this.pendingClip=c}closePath(){const c=this.current;if(c.path){const b=`${c.path.getAttributeNS(null,"d")}Z`;c.path.setAttributeNS(null,"d",b)}}setLeading(c){this.current.leading=-c}setTextRise(c){this.current.textRise=c}setTextRenderingMode(c){this.current.textRenderingMode=c}setHScale(c){this.current.textHScale=c/100}setRenderingIntent(c){}setFlatness(c){}setGState(c){for(const[b,D]of c)switch(b){case"LW":this.setLineWidth(D);break;case"LC":this.setLineCap(D);break;case"LJ":this.setLineJoin(D);break;case"ML":this.setMiterLimit(D);break;case"D":this.setDash(D[0],D[1]);break;case"RI":this.setRenderingIntent(D);break;case"FL":this.setFlatness(D);break;case"Font":this.setFont(D);break;case"CA":this.setStrokeAlpha(D);break;case"ca":this.setFillAlpha(D);break;default:(0,o.warn)(`Unimplemented graphic state operator ${b}`);break}}fill(){const c=this.current;c.element&&(c.element.setAttributeNS(null,"fill",c.fillColor),c.element.setAttributeNS(null,"fill-opacity",c.fillAlpha),this.endPath())}stroke(){const c=this.current;c.element&&(this._setStrokeAttributes(c.element),c.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(c,b=1){const D=this.current;let B=D.dashArray;b!==1&&B.length>0&&(B=B.map(function(L){return b*L})),c.setAttributeNS(null,"stroke",D.strokeColor),c.setAttributeNS(null,"stroke-opacity",D.strokeAlpha),c.setAttributeNS(null,"stroke-miterlimit",s(D.miterLimit)),c.setAttributeNS(null,"stroke-linecap",D.lineCap),c.setAttributeNS(null,"stroke-linejoin",D.lineJoin),c.setAttributeNS(null,"stroke-width",s(b*D.lineWidth)+"px"),c.setAttributeNS(null,"stroke-dasharray",B.map(s).join(" ")),c.setAttributeNS(null,"stroke-dashoffset",s(b*D.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x","0"),c.setAttributeNS(null,"y","0"),c.setAttributeNS(null,"width","1px"),c.setAttributeNS(null,"height","1px"),c.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(c)}paintImageXObject(c){const b=this.getObject(c);if(!b){(0,o.warn)(`Dependent image with object ID ${c} is not ready yet`);return}this.paintInlineImageXObject(b)}paintInlineImageXObject(c,b){const D=c.width,B=c.height,L=l(c,this.forceDataSchema,!!b),O=this.svgFactory.createElement("svg:rect");O.setAttributeNS(null,"x","0"),O.setAttributeNS(null,"y","0"),O.setAttributeNS(null,"width",s(D)),O.setAttributeNS(null,"height",s(B)),this.current.element=O,this.clip("nonzero");const j=this.svgFactory.createElement("svg:image");j.setAttributeNS(d,"xlink:href",L),j.setAttributeNS(null,"x","0"),j.setAttributeNS(null,"y",s(-B)),j.setAttributeNS(null,"width",s(D)+"px"),j.setAttributeNS(null,"height",s(B)+"px"),j.setAttributeNS(null,"transform",`scale(${s(1/D)} ${s(-1/B)})`),b?b.append(j):this._ensureTransformGroup().append(j)}paintImageMaskXObject(c){const b=this.getObject(c.data,c);if(b.bitmap){(0,o.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const D=this.current,B=b.width,L=b.height,O=D.fillColor;D.maskId=`mask${u++}`;const j=this.svgFactory.createElement("svg:mask");j.setAttributeNS(null,"id",D.maskId);const q=this.svgFactory.createElement("svg:rect");q.setAttributeNS(null,"x","0"),q.setAttributeNS(null,"y","0"),q.setAttributeNS(null,"width",s(B)),q.setAttributeNS(null,"height",s(L)),q.setAttributeNS(null,"fill",O),q.setAttributeNS(null,"mask",`url(#${D.maskId})`),this.defs.append(j),this._ensureTransformGroup().append(q),this.paintInlineImageXObject(b,j)}paintFormXObjectBegin(c,b){if(Array.isArray(c)&&c.length===6&&this.transform(c[0],c[1],c[2],c[3],c[4],c[5]),b){const D=b[2]-b[0],B=b[3]-b[1],L=this.svgFactory.createElement("svg:rect");L.setAttributeNS(null,"x",b[0]),L.setAttributeNS(null,"y",b[1]),L.setAttributeNS(null,"width",s(D)),L.setAttributeNS(null,"height",s(B)),this.current.element=L,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(c){const b=this.svgFactory.create(c.width,c.height),D=this.svgFactory.createElement("svg:defs");b.append(D),this.defs=D;const B=this.svgFactory.createElement("svg:g");return B.setAttributeNS(null,"transform",m(c.transform)),b.append(B),this.svg=B,b}_ensureClipGroup(){if(!this.current.clipGroup){const c=this.svgFactory.createElement("svg:g");c.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(c),this.current.clipGroup=c}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",m(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=C},(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class a{static textContent(o){const f=[],v={items:f,styles:Object.create(null)};function d(P){if(!P)return;let r=null;const t=P.name;if(t==="#text")r=P.value;else if(a.shouldBuildText(t))P?.attributes?.textContent?r=P.attributes.textContent:P.value&&(r=P.value);else return;if(r!==null&&f.push({str:r}),!!P.children)for(const l of P.children)d(l)}return d(o),v}static shouldBuildText(o){return!(o==="textarea"||o==="input"||o==="option"||o==="select")}}e.XfaText=a},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=m,e.updateTextLayer=_;var i=a(1),o=a(6);const f=1e5,v=30,d=.8,P=new Map;function r(u,w){let C;if(w&&i.FeatureTest.isOffscreenCanvasSupported)C=new OffscreenCanvas(u,u).getContext("2d",{alpha:!1});else{const x=document.createElement("canvas");x.width=x.height=u,C=x.getContext("2d",{alpha:!1})}return C}function t(u,w){const C=P.get(u);if(C)return C;const x=r(v,w);x.font=`${v}px ${u}`;const c=x.measureText("");let b=c.fontBoundingBoxAscent,D=Math.abs(c.fontBoundingBoxDescent);if(b){const L=b/(b+D);return P.set(u,L),x.canvas.width=x.canvas.height=0,L}x.strokeStyle="red",x.clearRect(0,0,v,v),x.strokeText("g",0,0);let B=x.getImageData(0,0,v,v).data;D=0;for(let L=B.length-1-3;L>=0;L-=4)if(B[L]>0){D=Math.ceil(L/4/v);break}x.clearRect(0,0,v,v),x.strokeText("A",0,v),B=x.getImageData(0,0,v,v).data,b=0;for(let L=0,O=B.length;L<O;L+=4)if(B[L]>0){b=v-Math.floor(L/4/v);break}if(x.canvas.width=x.canvas.height=0,b){const L=b/(b+D);return P.set(u,L),L}return P.set(u,d),d}function l(u,w,C){const x=document.createElement("span"),c={angle:0,canvasWidth:0,hasText:w.str!=="",hasEOL:w.hasEOL,fontSize:0};u._textDivs.push(x);const b=i.Util.transform(u._transform,w.transform);let D=Math.atan2(b[1],b[0]);const B=C[w.fontName];B.vertical&&(D+=Math.PI/2);const L=Math.hypot(b[2],b[3]),O=L*t(B.fontFamily,u._isOffscreenCanvasSupported);let j,q;D===0?(j=b[4],q=b[5]-O):(j=b[4]+O*Math.sin(D),q=b[5]-O*Math.cos(D));const ee="calc(var(--scale-factor)*",W=x.style;u._container===u._rootContainer?(W.left=`${(100*j/u._pageWidth).toFixed(2)}%`,W.top=`${(100*q/u._pageHeight).toFixed(2)}%`):(W.left=`${ee}${j.toFixed(2)}px)`,W.top=`${ee}${q.toFixed(2)}px)`),W.fontSize=`${ee}${L.toFixed(2)}px)`,W.fontFamily=B.fontFamily,c.fontSize=L,x.setAttribute("role","presentation"),x.textContent=w.str,x.dir=w.dir,u._fontInspectorEnabled&&(x.dataset.fontName=w.fontName),D!==0&&(c.angle=D*(180/Math.PI));let J=!1;if(w.str.length>1)J=!0;else if(w.str!==" "&&w.transform[0]!==w.transform[3]){const G=Math.abs(w.transform[0]),T=Math.abs(w.transform[3]);G!==T&&Math.max(G,T)/Math.min(G,T)>1.5&&(J=!0)}J&&(c.canvasWidth=B.vertical?w.height:w.width),u._textDivProperties.set(x,c),u._isReadableStream&&u._layoutText(x)}function p(u){const{div:w,scale:C,properties:x,ctx:c,prevFontSize:b,prevFontFamily:D}=u,{style:B}=w;let L="";if(x.canvasWidth!==0&&x.hasText){const{fontFamily:O}=B,{canvasWidth:j,fontSize:q}=x;(b!==q||D!==O)&&(c.font=`${q*C}px ${O}`,u.prevFontSize=q,u.prevFontFamily=O);const{width:ee}=c.measureText(w.textContent);ee>0&&(L=`scaleX(${j*C/ee})`)}x.angle!==0&&(L=`rotate(${x.angle}deg) ${L}`),L.length>0&&(B.transform=L)}function h(u){if(u._canceled)return;const w=u._textDivs,C=u._capability;if(w.length>f){C.resolve();return}if(!u._isReadableStream)for(const c of w)u._layoutText(c);C.resolve()}class s{constructor({textContentSource:w,container:C,viewport:x,textDivs:c,textDivProperties:b,textContentItemsStr:D,isOffscreenCanvasSupported:B}){this._textContentSource=w,this._isReadableStream=w instanceof ReadableStream,this._container=this._rootContainer=C,this._textDivs=c||[],this._textContentItemsStr=D||[],this._isOffscreenCanvasSupported=B,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=b||new WeakMap,this._canceled=!1,this._capability=new i.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:x.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:r(0,B)};const{pageWidth:L,pageHeight:O,pageX:j,pageY:q}=x.rawDims;this._transform=[1,0,0,-1,-j,q+O],this._pageWidth=L,this._pageHeight=O,(0,o.setLayerDimensions)(C,x),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new i.AbortException("TextLayer task cancelled."))}_processItems(w,C){for(const x of w){if(x.str===void 0){if(x.type==="beginMarkedContentProps"||x.type==="beginMarkedContent"){const c=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),x.id!==null&&this._container.setAttribute("id",`${x.id}`),c.append(this._container)}else x.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(x.str),l(this,x,C)}}_layoutText(w){const C=this._layoutTextParams.properties=this._textDivProperties.get(w);if(this._layoutTextParams.div=w,p(this._layoutTextParams),C.hasText&&this._container.append(w),C.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),this._container.append(x)}}_render(){const w=new i.PromiseCapability;let C=Object.create(null);if(this._isReadableStream){const x=()=>{this._reader.read().then(({value:c,done:b})=>{if(b){w.resolve();return}Object.assign(C,c.styles),this._processItems(c.items,C),x()},w.reject)};this._reader=this._textContentSource.getReader(),x()}else if(this._textContentSource){const{items:x,styles:c}=this._textContentSource;this._processItems(x,c),w.resolve()}else throw new Error('No "textContentSource" parameter specified.');w.promise.then(()=>{C=null,h(this)},this._capability.reject)}}e.TextLayerRenderTask=s;function m(u){!u.textContentSource&&(u.textContent||u.textContentStream)&&((0,o.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),u.textContentSource=u.textContent||u.textContentStream);const{container:w,viewport:C}=u,x=getComputedStyle(w),c=x.getPropertyValue("visibility"),b=parseFloat(x.getPropertyValue("--scale-factor"));c==="visible"&&(!b||Math.abs(b-C.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const D=new s(u);return D._render(),D}function _({container:u,viewport:w,textDivs:C,textDivProperties:x,isOffscreenCanvasSupported:c,mustRotate:b=!0,mustRescale:D=!0}){if(b&&(0,o.setLayerDimensions)(u,{rotation:w.rotation}),D){const B=r(0,c),O={prevFontSize:null,prevFontFamily:null,div:null,scale:w.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:B};for(const j of C)O.properties=x.get(j),O.div=j,p(O)}}},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var i=a(1),o=a(4),f=a(28),v=a(33),d=a(6),P=a(34);class r{#e;#t=!1;#i=null;#n=this.pointerup.bind(this);#o=this.pointerdown.bind(this);#r=new Map;#a=!1;#l=!1;#c=!1;#s;static _initialized=!1;constructor({uiManager:l,pageIndex:p,div:h,accessibilityManager:s,annotationLayer:m,viewport:_,l10n:u}){const w=[f.FreeTextEditor,v.InkEditor,P.StampEditor];if(!r._initialized){r._initialized=!0;for(const C of w)C.initialize(u)}l.registerEditorTypes(w),this.#s=l,this.pageIndex=p,this.div=h,this.#e=s,this.#i=m,this.viewport=_,this.#s.addLayer(this)}get isEmpty(){return this.#r.size===0}updateToolbar(l){this.#s.updateToolbar(l)}updateMode(l=this.#s.getMode()){this.#p(),l===i.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),l!==i.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",l===i.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",l===i.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",l===i.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(l){if(!l&&this.#s.getMode()!==i.AnnotationEditorType.INK)return;if(!l){for(const h of this.#r.values())if(h.isEmpty()){h.setInBackground();return}}this.#d({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(l){this.#s.setEditingState(l)}addCommands(l){this.#s.addCommands(l)}enable(){this.div.style.pointerEvents="auto";const l=new Set;for(const h of this.#r.values())h.enableEditing(),h.annotationElementId&&l.add(h.annotationElementId);if(!this.#i)return;const p=this.#i.getEditableAnnotations();for(const h of p){if(h.hide(),this.#s.isDeletedAnnotationElement(h.data.id)||l.has(h.data.id))continue;const s=this.deserialize(h);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){this.#c=!0,this.div.style.pointerEvents="none";const l=new Set;for(const p of this.#r.values()){if(p.disableEditing(),!p.annotationElementId||p.serialize()!==null){l.add(p.annotationElementId);continue}this.getEditableAnnotation(p.annotationElementId)?.show(),p.remove()}if(this.#i){const p=this.#i.getEditableAnnotations();for(const h of p){const{id:s}=h.data;l.has(s)||this.#s.isDeletedAnnotationElement(s)||h.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#c=!1}getEditableAnnotation(l){return this.#i?.getEditableAnnotation(l)||null}setActiveEditor(l){this.#s.getActive()!==l&&this.#s.setActiveEditor(l)}enableClick(){this.div.addEventListener("pointerdown",this.#o),this.div.addEventListener("pointerup",this.#n)}disableClick(){this.div.removeEventListener("pointerdown",this.#o),this.div.removeEventListener("pointerup",this.#n)}attach(l){this.#r.set(l.id,l);const{annotationElementId:p}=l;p&&this.#s.isDeletedAnnotationElement(p)&&this.#s.removeDeletedAnnotationElement(l)}detach(l){this.#r.delete(l.id),this.#e?.removePointerInTextLayer(l.contentDiv),!this.#c&&l.annotationElementId&&this.#s.addDeletedAnnotationElement(l)}remove(l){this.detach(l),this.#s.removeEditor(l),l.div.contains(document.activeElement)&&setTimeout(()=>{this.#s.focusMainContainer()},0),l.div.remove(),l.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(l){l.parent!==this&&(l.annotationElementId&&(this.#s.addDeletedAnnotationElement(l.annotationElementId),o.AnnotationEditor.deleteAnnotationElement(l),l.annotationElementId=null),this.attach(l),l.parent?.detach(l),l.setParent(this),l.div&&l.isAttachedToDOM&&(l.div.remove(),this.div.append(l.div)))}add(l){if(this.changeParent(l),this.#s.addEditor(l),this.attach(l),!l.isAttachedToDOM){const p=l.render();this.div.append(p),l.isAttachedToDOM=!0}l.fixAndSetPosition(),l.onceAdded(),this.#s.addToAnnotationStorage(l)}moveEditorInDOM(l){if(!l.isAttachedToDOM)return;const{activeElement:p}=document;l.div.contains(p)&&(l._focusEventsAllowed=!1,setTimeout(()=>{l.div.contains(document.activeElement)?l._focusEventsAllowed=!0:(l.div.addEventListener("focusin",()=>{l._focusEventsAllowed=!0},{once:!0}),p.focus())},0)),l._structTreeParentId=this.#e?.moveElementInDOM(this.div,l.div,l.contentDiv,!0)}addOrRebuild(l){l.needsToBeRebuilt()?l.rebuild():this.add(l)}addUndoableEditor(l){const p=()=>l._uiManager.rebuild(l),h=()=>{l.remove()};this.addCommands({cmd:p,undo:h,mustExec:!1})}getNextId(){return this.#s.getId()}#h(l){switch(this.#s.getMode()){case i.AnnotationEditorType.FREETEXT:return new f.FreeTextEditor(l);case i.AnnotationEditorType.INK:return new v.InkEditor(l);case i.AnnotationEditorType.STAMP:return new P.StampEditor(l)}return null}pasteEditor(l,p){this.#s.updateToolbar(l),this.#s.updateMode(l);const{offsetX:h,offsetY:s}=this.#f(),m=this.getNextId(),_=this.#h({parent:this,id:m,x:h,y:s,uiManager:this.#s,isCentered:!0,...p});_&&this.add(_)}deserialize(l){switch(l.annotationType??l.annotationEditorType){case i.AnnotationEditorType.FREETEXT:return f.FreeTextEditor.deserialize(l,this,this.#s);case i.AnnotationEditorType.INK:return v.InkEditor.deserialize(l,this,this.#s);case i.AnnotationEditorType.STAMP:return P.StampEditor.deserialize(l,this,this.#s)}return null}#d(l,p){const h=this.getNextId(),s=this.#h({parent:this,id:h,x:l.offsetX,y:l.offsetY,uiManager:this.#s,isCentered:p});return s&&this.add(s),s}#f(){const{x:l,y:p,width:h,height:s}=this.div.getBoundingClientRect(),m=Math.max(0,l),_=Math.max(0,p),u=Math.min(window.innerWidth,l+h),w=Math.min(window.innerHeight,p+s),C=(m+u)/2-l,x=(_+w)/2-p,[c,b]=this.viewport.rotation%180===0?[C,x]:[x,C];return{offsetX:c,offsetY:b}}addNewEditor(){this.#d(this.#f(),!0)}setSelected(l){this.#s.setSelected(l)}toggleSelected(l){this.#s.toggleSelected(l)}isSelected(l){return this.#s.isSelected(l)}unselect(l){this.#s.unselect(l)}pointerup(l){const{isMac:p}=i.FeatureTest.platform;if(!(l.button!==0||l.ctrlKey&&p)&&l.target===this.div&&this.#a){if(this.#a=!1,!this.#t){this.#t=!0;return}if(this.#s.getMode()===i.AnnotationEditorType.STAMP){this.#s.unselectAll();return}this.#d(l,!1)}}pointerdown(l){if(this.#a){this.#a=!1;return}const{isMac:p}=i.FeatureTest.platform;if(l.button!==0||l.ctrlKey&&p||l.target!==this.div)return;this.#a=!0;const h=this.#s.getActive();this.#t=!h||h.isEmpty()}findNewParent(l,p,h){const s=this.#s.findParent(p,h);return s===null||s===this?!1:(s.changeParent(l),!0)}destroy(){this.#s.getActive()?.parent===this&&(this.#s.commitOrRemove(),this.#s.setActiveEditor(null));for(const l of this.#r.values())this.#e?.removePointerInTextLayer(l.contentDiv),l.setParent(null),l.isAttachedToDOM=!1,l.div.remove();this.div=null,this.#r.clear(),this.#s.removeLayer(this)}#p(){this.#l=!0;for(const l of this.#r.values())l.isEmpty()&&l.remove();this.#l=!1}render({viewport:l}){this.viewport=l,(0,d.setLayerDimensions)(this.div,l);for(const p of this.#s.getEditors(this.pageIndex))this.add(p);this.updateMode()}update({viewport:l}){this.#s.commitOrRemove(),this.viewport=l,(0,d.setLayerDimensions)(this.div,{rotation:l.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:l,pageHeight:p}=this.viewport.rawDims;return[l,p]}}e.AnnotationEditorLayer=r},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var i=a(1),o=a(5),f=a(4),v=a(29);class d extends f.AnnotationEditor{#e=this.editorDivBlur.bind(this);#t=this.editorDivFocus.bind(this);#i=this.editorDivInput.bind(this);#n=this.editorDivKeydown.bind(this);#o;#r="";#a=`${this.id}-editor`;#l;#c=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const r=d.prototype,t=h=>h.isEmpty(),l=o.AnnotationEditorUIManager.TRANSLATE_SMALL,p=o.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new o.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],r.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],r.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],r._translateEmpty,{args:[-l,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],r._translateEmpty,{args:[-p,0],checker:t}],[["ArrowRight","mac+ArrowRight"],r._translateEmpty,{args:[l,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],r._translateEmpty,{args:[p,0],checker:t}],[["ArrowUp","mac+ArrowUp"],r._translateEmpty,{args:[0,-l],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],r._translateEmpty,{args:[0,-p],checker:t}],[["ArrowDown","mac+ArrowDown"],r._translateEmpty,{args:[0,l],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],r._translateEmpty,{args:[0,p],checker:t}]]))}static _type="freetext";constructor(r){super({...r,name:"freeTextEditor"}),this.#o=r.color||d._defaultColor||f.AnnotationEditor._defaultLineColor,this.#l=r.fontSize||d._defaultFontSize}static initialize(r){f.AnnotationEditor.initialize(r,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const t=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(t.getPropertyValue("--freetext-padding"))}static updateDefaultParams(r,t){switch(r){case i.AnnotationEditorParamsType.FREETEXT_SIZE:d._defaultFontSize=t;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:d._defaultColor=t;break}}updateParams(r,t){switch(r){case i.AnnotationEditorParamsType.FREETEXT_SIZE:this.#s(t);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:this.#h(t);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,d._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,d._defaultColor||f.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[i.AnnotationEditorParamsType.FREETEXT_COLOR,this.#o]]}#s(r){const t=p=>{this.editorDiv.style.fontSize=`calc(${p}px * var(--scale-factor))`,this.translate(0,-(p-this.#l)*this.parentScale),this.#l=p,this.#f()},l=this.#l;this.addCommands({cmd:()=>{t(r)},undo:()=>{t(l)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#h(r){const t=this.#o;this.addCommands({cmd:()=>{this.#o=this.editorDiv.style.color=r},undo:()=>{this.#o=this.editorDiv.style.color=t},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(r,t){this._uiManager.translateSelectedEditors(r,t,!0)}getInitialTranslation(){const r=this.parentScale;return[-d._internalPadding*r,-(d._internalPadding+this.#l)*r]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#n),this.editorDiv.addEventListener("focus",this.#t),this.editorDiv.addEventListener("blur",this.#e),this.editorDiv.addEventListener("input",this.#i))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#a),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#n),this.editorDiv.removeEventListener("focus",this.#t),this.editorDiv.removeEventListener("blur",this.#e),this.editorDiv.removeEventListener("input",this.#i),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(r){this._focusEventsAllowed&&(super.focusin(r),r.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#m();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#d(){const r=this.editorDiv.getElementsByTagName("div");if(r.length===0)return this.editorDiv.innerText;const t=[];for(const l of r)t.push(l.innerText.replace(/\r\n?|\n/,""));return t.join(`
`)}#f(){const[r,t]=this.parentDimensions;let l;if(this.isAttachedToDOM)l=this.div.getBoundingClientRect();else{const{currentLayer:p,div:h}=this,s=h.style.display;h.style.display="hidden",p.div.append(this.div),l=h.getBoundingClientRect(),h.remove(),h.style.display=s}this.rotation%180===this.parentRotation%180?(this.width=l.width/r,this.height=l.height/t):(this.width=l.height/r,this.height=l.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const r=this.#r,t=this.#r=this.#d().trimEnd();if(r===t)return;const l=p=>{if(this.#r=p,!p){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#f()};this.addCommands({cmd:()=>{l(t)},undo:()=>{l(r)},mustExec:!1}),this.#f()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(r){this.enterInEditMode()}keydown(r){r.target===this.div&&r.key==="Enter"&&(this.enterInEditMode(),r.preventDefault())}editorDivKeydown(r){d._keyboardManager.exec(this,r)}editorDivFocus(r){this.isEditing=!0}editorDivBlur(r){this.isEditing=!1}editorDivInput(r){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let r,t;this.width&&(r=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#a),this.enableEditing(),f.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(p=>this.editorDiv?.setAttribute("aria-label",p)),f.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(p=>this.editorDiv?.setAttribute("default-content",p)),this.editorDiv.contentEditable=!0;const{style:l}=this.editorDiv;if(l.fontSize=`calc(${this.#l}px * var(--scale-factor))`,l.color=this.#o,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,o.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[p,h]=this.parentDimensions;if(this.annotationElementId){const{position:s}=this.#c;let[m,_]=this.getInitialTranslation();[m,_]=this.pageTranslationToScreen(m,_);const[u,w]=this.pageDimensions,[C,x]=this.pageTranslation;let c,b;switch(this.rotation){case 0:c=r+(s[0]-C)/u,b=t+this.height-(s[1]-x)/w;break;case 90:c=r+(s[0]-C)/u,b=t-(s[1]-x)/w,[m,_]=[_,-m];break;case 180:c=r-this.width+(s[0]-C)/u,b=t-(s[1]-x)/w,[m,_]=[-m,-_];break;case 270:c=r+(s[0]-C-this.height*w)/u,b=t+(s[1]-x-this.width*u)/w,[m,_]=[-_,m];break}this.setAt(c*p,b*h,m,_)}else this.setAt(r*p,t*h,this.width*p,this.height*h);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),!!this.#r)for(const r of this.#r.split(`
`)){const t=document.createElement("div");t.append(r?document.createTextNode(r):document.createElement("br")),this.editorDiv.append(t)}}get contentDiv(){return this.editorDiv}static deserialize(r,t,l){let p=null;if(r instanceof v.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:s,fontColor:m},rect:_,rotation:u,id:w},textContent:C,textPosition:x,parent:{page:{pageNumber:c}}}=r;if(!C||C.length===0)return null;p=r={annotationType:i.AnnotationEditorType.FREETEXT,color:Array.from(m),fontSize:s,value:C.join(`
`),position:x,pageIndex:c-1,rect:_,rotation:u,id:w,deleted:!1}}const h=super.deserialize(r,t,l);return h.#l=r.fontSize,h.#o=i.Util.makeHexColor(...r.color),h.#r=r.value,h.annotationElementId=r.id||null,h.#c=p,h}serialize(r=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const t=d._internalPadding*this.parentScale,l=this.getRect(t,t),p=f.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#o),h={annotationType:i.AnnotationEditorType.FREETEXT,color:p,fontSize:this.#l,value:this.#r,pageIndex:this.pageIndex,rect:l,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return r?h:this.annotationElementId&&!this.#g(h)?null:(h.id=this.annotationElementId,h)}#g(r){const{value:t,fontSize:l,color:p,rect:h,pageIndex:s}=this.#c;return r.value!==t||r.fontSize!==l||r.rect.some((m,_)=>Math.abs(m-h[_])>=1)||r.color.some((m,_)=>m!==p[_])||r.pageIndex!==s}#m(r=!1){if(!this.annotationElementId)return;if(this.#f(),!r&&(this.width===0||this.height===0)){setTimeout(()=>this.#m(!0),0);return}const t=d._internalPadding*this.parentScale;this.#c.rect=this.getRect(t,t)}}e.FreeTextEditor=d},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var i=a(1),o=a(6),f=a(3),v=a(30),d=a(31),P=a(32);const r=1e3,t=9,l=new WeakSet;function p(I){return{width:I[2]-I[0],height:I[3]-I[1]}}class h{static create(S){switch(S.data.annotationType){case i.AnnotationType.LINK:return new m(S);case i.AnnotationType.TEXT:return new _(S);case i.AnnotationType.WIDGET:switch(S.data.fieldType){case"Tx":return new w(S);case"Btn":return S.data.radioButton?new c(S):S.data.checkBox?new x(S):new b(S);case"Ch":return new D(S);case"Sig":return new C(S)}return new u(S);case i.AnnotationType.POPUP:return new B(S);case i.AnnotationType.FREETEXT:return new O(S);case i.AnnotationType.LINE:return new j(S);case i.AnnotationType.SQUARE:return new q(S);case i.AnnotationType.CIRCLE:return new ee(S);case i.AnnotationType.POLYLINE:return new W(S);case i.AnnotationType.CARET:return new G(S);case i.AnnotationType.INK:return new T(S);case i.AnnotationType.POLYGON:return new J(S);case i.AnnotationType.HIGHLIGHT:return new E(S);case i.AnnotationType.UNDERLINE:return new y(S);case i.AnnotationType.SQUIGGLY:return new g(S);case i.AnnotationType.STRIKEOUT:return new M(S);case i.AnnotationType.STAMP:return new k(S);case i.AnnotationType.FILEATTACHMENT:return new N(S);default:return new s(S)}}}class s{#e=!1;constructor(S,{isRenderable:F=!1,ignoreBorder:R=!1,createQuadrilaterals:U=!1}={}){this.isRenderable=F,this.data=S.data,this.layer=S.layer,this.linkService=S.linkService,this.downloadManager=S.downloadManager,this.imageResourcesPath=S.imageResourcesPath,this.renderForms=S.renderForms,this.svgFactory=S.svgFactory,this.annotationStorage=S.annotationStorage,this.enableScripting=S.enableScripting,this.hasJSActions=S.hasJSActions,this._fieldObjects=S.fieldObjects,this.parent=S.parent,F&&(this.container=this._createContainer(R)),U&&this._createQuadrilaterals()}static _hasPopupData({titleObj:S,contentsObj:F,richText:R}){return!!(S?.str||F?.str||R?.str)}get hasPopupData(){return s._hasPopupData(this.data)}_createContainer(S){const{data:F,parent:{page:R,viewport:U}}=this,V=document.createElement("section");V.setAttribute("data-annotation-id",F.id),this instanceof u||(V.tabIndex=r),V.style.zIndex=this.parent.zIndex++,this.data.popupRef&&V.setAttribute("aria-haspopup","dialog"),F.noRotate&&V.classList.add("norotate");const{pageWidth:$,pageHeight:X,pageX:ie,pageY:oe}=U.rawDims;if(!F.rect||this instanceof B){const{rotation:Y}=F;return!F.hasOwnCanvas&&Y!==0&&this.setRotation(Y,V),V}const{width:ne,height:z}=p(F.rect),K=i.Util.normalizeRect([F.rect[0],R.view[3]-F.rect[1]+R.view[1],F.rect[2],R.view[3]-F.rect[3]+R.view[1]]);if(!S&&F.borderStyle.width>0){V.style.borderWidth=`${F.borderStyle.width}px`;const Y=F.borderStyle.horizontalCornerRadius,se=F.borderStyle.verticalCornerRadius;if(Y>0||se>0){const ce=`calc(${Y}px * var(--scale-factor)) / calc(${se}px * var(--scale-factor))`;V.style.borderRadius=ce}else if(this instanceof c){const ce=`calc(${ne}px * var(--scale-factor)) / calc(${z}px * var(--scale-factor))`;V.style.borderRadius=ce}switch(F.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:V.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:V.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:V.style.borderBottomStyle="solid";break}const ae=F.borderColor||null;ae?(this.#e=!0,V.style.borderColor=i.Util.makeHexColor(ae[0]|0,ae[1]|0,ae[2]|0)):V.style.borderWidth=0}V.style.left=`${100*(K[0]-ie)/$}%`,V.style.top=`${100*(K[1]-oe)/X}%`;const{rotation:Q}=F;return F.hasOwnCanvas||Q===0?(V.style.width=`${100*ne/$}%`,V.style.height=`${100*z/X}%`):this.setRotation(Q,V),V}setRotation(S,F=this.container){if(!this.data.rect)return;const{pageWidth:R,pageHeight:U}=this.parent.viewport.rawDims,{width:V,height:$}=p(this.data.rect);let X,ie;S%180===0?(X=100*V/R,ie=100*$/U):(X=100*$/R,ie=100*V/U),F.style.width=`${X}%`,F.style.height=`${ie}%`,F.setAttribute("data-main-rotation",(360-S)%360)}get _commonActions(){const S=(F,R,U)=>{const V=U.detail[F],$=V[0],X=V.slice(1);U.target.style[R]=v.ColorConverters[`${$}_HTML`](X),this.annotationStorage.setValue(this.data.id,{[R]:v.ColorConverters[`${$}_rgb`](X)})};return(0,i.shadow)(this,"_commonActions",{display:F=>{const{display:R}=F.detail,U=R%2===1;this.container.style.visibility=U?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:U,noPrint:R===1||R===2})},print:F=>{this.annotationStorage.setValue(this.data.id,{noPrint:!F.detail.print})},hidden:F=>{const{hidden:R}=F.detail;this.container.style.visibility=R?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:R,noView:R})},focus:F=>{setTimeout(()=>F.target.focus({preventScroll:!1}),0)},userName:F=>{F.target.title=F.detail.userName},readonly:F=>{F.target.disabled=F.detail.readonly},required:F=>{this._setRequired(F.target,F.detail.required)},bgColor:F=>{S("bgColor","backgroundColor",F)},fillColor:F=>{S("fillColor","backgroundColor",F)},fgColor:F=>{S("fgColor","color",F)},textColor:F=>{S("textColor","color",F)},borderColor:F=>{S("borderColor","borderColor",F)},strokeColor:F=>{S("strokeColor","borderColor",F)},rotation:F=>{const R=F.detail.rotation;this.setRotation(R),this.annotationStorage.setValue(this.data.id,{rotation:R})}})}_dispatchEventFromSandbox(S,F){const R=this._commonActions;for(const U of Object.keys(F.detail))(S[U]||R[U])?.(F)}_setDefaultPropertiesFromJS(S){if(!this.enableScripting)return;const F=this.annotationStorage.getRawValue(this.data.id);if(!F)return;const R=this._commonActions;for(const[U,V]of Object.entries(F)){const $=R[U];if($){const X={detail:{[U]:V},target:S};$(X),delete F[U]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:S}=this.data;if(!S)return;const[F,R,U,V]=this.data.rect;if(S.length===1){const[,{x:se,y:ae},{x:ce,y:he}]=S[0];if(U===se&&V===ae&&F===ce&&R===he)return}const{style:$}=this.container;let X;if(this.#e){const{borderColor:se,borderWidth:ae}=$;$.borderWidth=0,X=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${se}" stroke-width="${ae}">`],this.container.classList.add("hasBorder")}const ie=U-F,oe=V-R,{svgFactory:ne}=this,z=ne.createElement("svg");z.classList.add("quadrilateralsContainer"),z.setAttribute("width",0),z.setAttribute("height",0);const K=ne.createElement("defs");z.append(K);const Q=ne.createElement("clipPath"),Y=`clippath_${this.data.id}`;Q.setAttribute("id",Y),Q.setAttribute("clipPathUnits","objectBoundingBox"),K.append(Q);for(const[,{x:se,y:ae},{x:ce,y:he}]of S){const de=ne.createElement("rect"),ue=(ce-F)/ie,pe=(V-ae)/oe,ge=(se-ce)/ie,Ee=(ae-he)/oe;de.setAttribute("x",ue),de.setAttribute("y",pe),de.setAttribute("width",ge),de.setAttribute("height",Ee),Q.append(de),X?.push(`<rect vector-effect="non-scaling-stroke" x="${ue}" y="${pe}" width="${ge}" height="${Ee}"/>`)}this.#e&&(X.push("</g></svg>')"),$.backgroundImage=X.join("")),this.container.append(z),this.container.style.clipPath=`url(#${Y})`}_createPopup(){const{container:S,data:F}=this;S.setAttribute("aria-haspopup","dialog");const R=new B({data:{color:F.color,titleObj:F.titleObj,modificationDate:F.modificationDate,contentsObj:F.contentsObj,richText:F.richText,parentRect:F.rect,borderStyle:0,id:`popup_${F.id}`,rotation:F.rotation},parent:this.parent,elements:[this]});this.parent.div.append(R.render())}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(S,F=null){const R=[];if(this._fieldObjects){const U=this._fieldObjects[S];if(U)for(const{page:V,id:$,exportValues:X}of U){if(V===-1||$===F)continue;const ie=typeof X=="string"?X:null,oe=document.querySelector(`[data-element-id="${$}"]`);if(oe&&!l.has(oe)){(0,i.warn)(`_getElementsByName - element not allowed: ${$}`);continue}R.push({id:$,exportValue:ie,domElement:oe})}return R}for(const U of document.getElementsByName(S)){const{exportValue:V}=U,$=U.getAttribute("data-element-id");$!==F&&l.has(U)&&R.push({id:$,exportValue:V,domElement:U})}return R}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const S=this.getElementsToTriggerPopup();if(Array.isArray(S))for(const F of S)F.classList.add("highlightArea");else S.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:S,data:{id:F}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:S,editId:F})})}}class m extends s{constructor(S,F=null){super(S,{isRenderable:!0,ignoreBorder:!!F?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=S.data.isTooltipOnly}render(){const{data:S,linkService:F}=this,R=document.createElement("a");R.setAttribute("data-element-id",S.id);let U=!1;return S.url?(F.addLinkAttributes(R,S.url,S.newWindow),U=!0):S.action?(this._bindNamedAction(R,S.action),U=!0):S.attachment?(this._bindAttachment(R,S.attachment),U=!0):S.setOCGState?(this.#t(R,S.setOCGState),U=!0):S.dest?(this._bindLink(R,S.dest),U=!0):(S.actions&&(S.actions.Action||S.actions["Mouse Up"]||S.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(R,S),U=!0),S.resetForm?(this._bindResetFormAction(R,S.resetForm),U=!0):this.isTooltipOnly&&!U&&(this._bindLink(R,""),U=!0)),this.container.classList.add("linkAnnotation"),U&&this.container.append(R),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(S,F){S.href=this.linkService.getDestinationHash(F),S.onclick=()=>(F&&this.linkService.goToDestination(F),!1),(F||F==="")&&this.#e()}_bindNamedAction(S,F){S.href=this.linkService.getAnchorUrl(""),S.onclick=()=>(this.linkService.executeNamedAction(F),!1),this.#e()}_bindAttachment(S,F){S.href=this.linkService.getAnchorUrl(""),S.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,F.content,F.filename),!1),this.#e()}#t(S,F){S.href=this.linkService.getAnchorUrl(""),S.onclick=()=>(this.linkService.executeSetOCGState(F),!1),this.#e()}_bindJSAction(S,F){S.href=this.linkService.getAnchorUrl("");const R=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const U of Object.keys(F.actions)){const V=R.get(U);V&&(S[V]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:F.id,name:U}}),!1))}S.onclick||(S.onclick=()=>!1),this.#e()}_bindResetFormAction(S,F){const R=S.onclick;if(R||(S.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),R||(S.onclick=()=>!1);return}S.onclick=()=>{R?.();const{fields:U,refs:V,include:$}=F,X=[];if(U.length!==0||V.length!==0){const ne=new Set(V);for(const z of U){const K=this._fieldObjects[z]||[];for(const{id:Q}of K)ne.add(Q)}for(const z of Object.values(this._fieldObjects))for(const K of z)ne.has(K.id)===$&&X.push(K)}else for(const ne of Object.values(this._fieldObjects))X.push(...ne);const ie=this.annotationStorage,oe=[];for(const ne of X){const{id:z}=ne;switch(oe.push(z),ne.type){case"text":{const Q=ne.defaultValue||"";ie.setValue(z,{value:Q});break}case"checkbox":case"radiobutton":{const Q=ne.defaultValue===ne.exportValues;ie.setValue(z,{value:Q});break}case"combobox":case"listbox":{const Q=ne.defaultValue||"";ie.setValue(z,{value:Q});break}default:continue}const K=document.querySelector(`[data-element-id="${z}"]`);if(K){if(!l.has(K)){(0,i.warn)(`_bindResetFormAction - element not allowed: ${z}`);continue}}else continue;K.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:oe,name:"ResetForm"}}),!1}}}class _ extends s{constructor(S){super(S,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const S=document.createElement("img");return S.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",S.alt="[{{type}} Annotation]",S.dataset.l10nId="text_annotation_type",S.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(S),this.container}}class u extends s{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(S){this.data.hasOwnCanvas&&(S.previousSibling?.nodeName==="CANVAS"&&(S.previousSibling.hidden=!0),S.hidden=!1)}_getKeyModifier(S){const{isWin:F,isMac:R}=i.FeatureTest.platform;return F&&S.ctrlKey||R&&S.metaKey}_setEventListener(S,F,R,U,V){R.includes("mouse")?S.addEventListener(R,$=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:U,value:V($),shift:$.shiftKey,modifier:this._getKeyModifier($)}})}):S.addEventListener(R,$=>{if(R==="blur"){if(!F.focused||!$.relatedTarget)return;F.focused=!1}else if(R==="focus"){if(F.focused)return;F.focused=!0}V&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:U,value:V($)}})})}_setEventListeners(S,F,R,U){for(const[V,$]of R)($==="Action"||this.data.actions?.[$])&&(($==="Focus"||$==="Blur")&&(F||={focused:!1}),this._setEventListener(S,F,V,$,U),$==="Focus"&&!this.data.actions?.Blur?this._setEventListener(S,F,"blur","Blur",null):$==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(S,F,"focus","Focus",null))}_setBackgroundColor(S){const F=this.data.backgroundColor||null;S.style.backgroundColor=F===null?"transparent":i.Util.makeHexColor(F[0],F[1],F[2])}_setTextStyle(S){const F=["left","center","right"],{fontColor:R}=this.data.defaultAppearanceData,U=this.data.defaultAppearanceData.fontSize||t,V=S.style;let $;const X=2,ie=oe=>Math.round(10*oe)/10;if(this.data.multiLine){const oe=Math.abs(this.data.rect[3]-this.data.rect[1]-X),ne=Math.round(oe/(i.LINE_FACTOR*U))||1,z=oe/ne;$=Math.min(U,ie(z/i.LINE_FACTOR))}else{const oe=Math.abs(this.data.rect[3]-this.data.rect[1]-X);$=Math.min(U,ie(oe/i.LINE_FACTOR))}V.fontSize=`calc(${$}px * var(--scale-factor))`,V.color=i.Util.makeHexColor(R[0],R[1],R[2]),this.data.textAlignment!==null&&(V.textAlign=F[this.data.textAlignment])}_setRequired(S,F){F?S.setAttribute("required",!0):S.removeAttribute("required"),S.setAttribute("aria-required",F)}}class w extends u{constructor(S){const F=S.renderForms||!S.data.hasAppearance&&!!S.data.fieldValue;super(S,{isRenderable:F})}setPropertyOnSiblings(S,F,R,U){const V=this.annotationStorage;for(const $ of this._getElementsByName(S.name,S.id))$.domElement&&($.domElement[F]=R),V.setValue($.id,{[U]:R})}render(){const S=this.annotationStorage,F=this.data.id;this.container.classList.add("textWidgetAnnotation");let R=null;if(this.renderForms){const U=S.getValue(F,{value:this.data.fieldValue});let V=U.value||"";const $=S.getValue(F,{charLimit:this.data.maxLen}).charLimit;$&&V.length>$&&(V=V.slice(0,$));let X=U.formattedValue||this.data.textContent?.join(`
`)||null;X&&this.data.comb&&(X=X.replaceAll(/\s+/g,""));const ie={userValue:V,formattedValue:X,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(R=document.createElement("textarea"),R.textContent=X??V,this.data.doNotScroll&&(R.style.overflowY="hidden")):(R=document.createElement("input"),R.type="text",R.setAttribute("value",X??V),this.data.doNotScroll&&(R.style.overflowX="hidden")),this.data.hasOwnCanvas&&(R.hidden=!0),l.add(R),R.setAttribute("data-element-id",F),R.disabled=this.data.readOnly,R.name=this.data.fieldName,R.tabIndex=r,this._setRequired(R,this.data.required),$&&(R.maxLength=$),R.addEventListener("input",ne=>{S.setValue(F,{value:ne.target.value}),this.setPropertyOnSiblings(R,"value",ne.target.value,"value"),ie.formattedValue=null}),R.addEventListener("resetform",ne=>{const z=this.data.defaultFieldValue??"";R.value=ie.userValue=z,ie.formattedValue=null});let oe=ne=>{const{formattedValue:z}=ie;z!=null&&(ne.target.value=z),ne.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){R.addEventListener("focus",z=>{if(ie.focused)return;const{target:K}=z;ie.userValue&&(K.value=ie.userValue),ie.lastCommittedValue=K.value,ie.commitKey=1,ie.focused=!0}),R.addEventListener("updatefromsandbox",z=>{this.showElementAndHideCanvas(z.target);const K={value(Q){ie.userValue=Q.detail.value??"",S.setValue(F,{value:ie.userValue.toString()}),Q.target.value=ie.userValue},formattedValue(Q){const{formattedValue:Y}=Q.detail;ie.formattedValue=Y,Y!=null&&Q.target!==document.activeElement&&(Q.target.value=Y),S.setValue(F,{formattedValue:Y})},selRange(Q){Q.target.setSelectionRange(...Q.detail.selRange)},charLimit:Q=>{const{charLimit:Y}=Q.detail,{target:se}=Q;if(Y===0){se.removeAttribute("maxLength");return}se.setAttribute("maxLength",Y);let ae=ie.userValue;!ae||ae.length<=Y||(ae=ae.slice(0,Y),se.value=ie.userValue=ae,S.setValue(F,{value:ae}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:F,name:"Keystroke",value:ae,willCommit:!0,commitKey:1,selStart:se.selectionStart,selEnd:se.selectionEnd}}))}};this._dispatchEventFromSandbox(K,z)}),R.addEventListener("keydown",z=>{ie.commitKey=1;let K=-1;if(z.key==="Escape"?K=0:z.key==="Enter"&&!this.data.multiLine?K=2:z.key==="Tab"&&(ie.commitKey=3),K===-1)return;const{value:Q}=z.target;ie.lastCommittedValue!==Q&&(ie.lastCommittedValue=Q,ie.userValue=Q,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:F,name:"Keystroke",value:Q,willCommit:!0,commitKey:K,selStart:z.target.selectionStart,selEnd:z.target.selectionEnd}}))});const ne=oe;oe=null,R.addEventListener("blur",z=>{if(!ie.focused||!z.relatedTarget)return;ie.focused=!1;const{value:K}=z.target;ie.userValue=K,ie.lastCommittedValue!==K&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:F,name:"Keystroke",value:K,willCommit:!0,commitKey:ie.commitKey,selStart:z.target.selectionStart,selEnd:z.target.selectionEnd}}),ne(z)}),this.data.actions?.Keystroke&&R.addEventListener("beforeinput",z=>{ie.lastCommittedValue=null;const{data:K,target:Q}=z,{value:Y,selectionStart:se,selectionEnd:ae}=Q;let ce=se,he=ae;switch(z.inputType){case"deleteWordBackward":{const de=Y.substring(0,se).match(/\w*[^\w]*$/);de&&(ce-=de[0].length);break}case"deleteWordForward":{const de=Y.substring(se).match(/^[^\w]*\w*/);de&&(he+=de[0].length);break}case"deleteContentBackward":se===ae&&(ce-=1);break;case"deleteContentForward":se===ae&&(he+=1);break}z.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:F,name:"Keystroke",value:Y,change:K||"",willCommit:!1,selStart:ce,selEnd:he}})}),this._setEventListeners(R,ie,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],z=>z.target.value)}if(oe&&R.addEventListener("blur",oe),this.data.comb){const z=(this.data.rect[2]-this.data.rect[0])/$;R.classList.add("comb"),R.style.letterSpacing=`calc(${z}px * var(--scale-factor) - 1ch)`}}else R=document.createElement("div"),R.textContent=this.data.fieldValue,R.style.verticalAlign="middle",R.style.display="table-cell";return this._setTextStyle(R),this._setBackgroundColor(R),this._setDefaultPropertiesFromJS(R),this.container.append(R),this.container}}class C extends u{constructor(S){super(S,{isRenderable:!!S.data.hasOwnCanvas})}}class x extends u{constructor(S){super(S,{isRenderable:S.renderForms})}render(){const S=this.annotationStorage,F=this.data,R=F.id;let U=S.getValue(R,{value:F.exportValue===F.fieldValue}).value;typeof U=="string"&&(U=U!=="Off",S.setValue(R,{value:U})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const V=document.createElement("input");return l.add(V),V.setAttribute("data-element-id",R),V.disabled=F.readOnly,this._setRequired(V,this.data.required),V.type="checkbox",V.name=F.fieldName,U&&V.setAttribute("checked",!0),V.setAttribute("exportValue",F.exportValue),V.tabIndex=r,V.addEventListener("change",$=>{const{name:X,checked:ie}=$.target;for(const oe of this._getElementsByName(X,R)){const ne=ie&&oe.exportValue===F.exportValue;oe.domElement&&(oe.domElement.checked=ne),S.setValue(oe.id,{value:ne})}S.setValue(R,{value:ie})}),V.addEventListener("resetform",$=>{const X=F.defaultFieldValue||"Off";$.target.checked=X===F.exportValue}),this.enableScripting&&this.hasJSActions&&(V.addEventListener("updatefromsandbox",$=>{const X={value(ie){ie.target.checked=ie.detail.value!=="Off",S.setValue(R,{value:ie.target.checked})}};this._dispatchEventFromSandbox(X,$)}),this._setEventListeners(V,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],$=>$.target.checked)),this._setBackgroundColor(V),this._setDefaultPropertiesFromJS(V),this.container.append(V),this.container}}class c extends u{constructor(S){super(S,{isRenderable:S.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const S=this.annotationStorage,F=this.data,R=F.id;let U=S.getValue(R,{value:F.fieldValue===F.buttonValue}).value;typeof U=="string"&&(U=U!==F.buttonValue,S.setValue(R,{value:U}));const V=document.createElement("input");if(l.add(V),V.setAttribute("data-element-id",R),V.disabled=F.readOnly,this._setRequired(V,this.data.required),V.type="radio",V.name=F.fieldName,U&&V.setAttribute("checked",!0),V.tabIndex=r,V.addEventListener("change",$=>{const{name:X,checked:ie}=$.target;for(const oe of this._getElementsByName(X,R))S.setValue(oe.id,{value:!1});S.setValue(R,{value:ie})}),V.addEventListener("resetform",$=>{const X=F.defaultFieldValue;$.target.checked=X!=null&&X===F.buttonValue}),this.enableScripting&&this.hasJSActions){const $=F.buttonValue;V.addEventListener("updatefromsandbox",X=>{const ie={value:oe=>{const ne=$===oe.detail.value;for(const z of this._getElementsByName(oe.target.name)){const K=ne&&z.id===R;z.domElement&&(z.domElement.checked=K),S.setValue(z.id,{value:K})}}};this._dispatchEventFromSandbox(ie,X)}),this._setEventListeners(V,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],X=>X.target.checked)}return this._setBackgroundColor(V),this._setDefaultPropertiesFromJS(V),this.container.append(V),this.container}}class b extends m{constructor(S){super(S,{ignoreBorder:S.data.hasAppearance})}render(){const S=super.render();S.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(S.title=this.data.alternativeText);const F=S.lastChild;return this.enableScripting&&this.hasJSActions&&F&&(this._setDefaultPropertiesFromJS(F),F.addEventListener("updatefromsandbox",R=>{this._dispatchEventFromSandbox({},R)})),S}}class D extends u{constructor(S){super(S,{isRenderable:S.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const S=this.annotationStorage,F=this.data.id,R=S.getValue(F,{value:this.data.fieldValue}),U=document.createElement("select");l.add(U),U.setAttribute("data-element-id",F),U.disabled=this.data.readOnly,this._setRequired(U,this.data.required),U.name=this.data.fieldName,U.tabIndex=r;let V=this.data.combo&&this.data.options.length>0;this.data.combo||(U.size=this.data.options.length,this.data.multiSelect&&(U.multiple=!0)),U.addEventListener("resetform",ne=>{const z=this.data.defaultFieldValue;for(const K of U.options)K.selected=K.value===z});for(const ne of this.data.options){const z=document.createElement("option");z.textContent=ne.displayValue,z.value=ne.exportValue,R.value.includes(ne.exportValue)&&(z.setAttribute("selected",!0),V=!1),U.append(z)}let $=null;if(V){const ne=document.createElement("option");ne.value=" ",ne.setAttribute("hidden",!0),ne.setAttribute("selected",!0),U.prepend(ne),$=()=>{ne.remove(),U.removeEventListener("input",$),$=null},U.addEventListener("input",$)}const X=ne=>{const z=ne?"value":"textContent",{options:K,multiple:Q}=U;return Q?Array.prototype.filter.call(K,Y=>Y.selected).map(Y=>Y[z]):K.selectedIndex===-1?null:K[K.selectedIndex][z]};let ie=X(!1);const oe=ne=>{const z=ne.target.options;return Array.prototype.map.call(z,K=>({displayValue:K.textContent,exportValue:K.value}))};return this.enableScripting&&this.hasJSActions?(U.addEventListener("updatefromsandbox",ne=>{const z={value(K){$?.();const Q=K.detail.value,Y=new Set(Array.isArray(Q)?Q:[Q]);for(const se of U.options)se.selected=Y.has(se.value);S.setValue(F,{value:X(!0)}),ie=X(!1)},multipleSelection(K){U.multiple=!0},remove(K){const Q=U.options,Y=K.detail.remove;Q[Y].selected=!1,U.remove(Y),Q.length>0&&Array.prototype.findIndex.call(Q,ae=>ae.selected)===-1&&(Q[0].selected=!0),S.setValue(F,{value:X(!0),items:oe(K)}),ie=X(!1)},clear(K){for(;U.length!==0;)U.remove(0);S.setValue(F,{value:null,items:[]}),ie=X(!1)},insert(K){const{index:Q,displayValue:Y,exportValue:se}=K.detail.insert,ae=U.children[Q],ce=document.createElement("option");ce.textContent=Y,ce.value=se,ae?ae.before(ce):U.append(ce),S.setValue(F,{value:X(!0),items:oe(K)}),ie=X(!1)},items(K){const{items:Q}=K.detail;for(;U.length!==0;)U.remove(0);for(const Y of Q){const{displayValue:se,exportValue:ae}=Y,ce=document.createElement("option");ce.textContent=se,ce.value=ae,U.append(ce)}U.options.length>0&&(U.options[0].selected=!0),S.setValue(F,{value:X(!0),items:oe(K)}),ie=X(!1)},indices(K){const Q=new Set(K.detail.indices);for(const Y of K.target.options)Y.selected=Q.has(Y.index);S.setValue(F,{value:X(!0)}),ie=X(!1)},editable(K){K.target.disabled=!K.detail.editable}};this._dispatchEventFromSandbox(z,ne)}),U.addEventListener("input",ne=>{const z=X(!0);S.setValue(F,{value:z}),ne.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:F,name:"Keystroke",value:ie,changeEx:z,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(U,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],ne=>ne.target.value)):U.addEventListener("input",function(ne){S.setValue(F,{value:X(!0)})}),this.data.combo&&this._setTextStyle(U),this._setBackgroundColor(U),this._setDefaultPropertiesFromJS(U),this.container.append(U),this.container}}class B extends s{constructor(S){const{data:F,elements:R}=S;super(S,{isRenderable:s._hasPopupData(F)}),this.elements=R}render(){this.container.classList.add("popupAnnotation");const S=new L({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),F=[];for(const R of this.elements)R.popup=S,F.push(R.data.id),R.addHighlightArea();return this.container.setAttribute("aria-controls",F.map(R=>`${i.AnnotationPrefix}${R}`).join(",")),this.container}}class L{#e=null;#t=this.#u.bind(this);#i=this.#y.bind(this);#n=this.#w.bind(this);#o=this.#v.bind(this);#r=null;#a=null;#l=null;#c=null;#s=null;#h=null;#d=!1;#f=null;#p=null;#g=null;#m=null;#_=!1;constructor({container:S,color:F,elements:R,titleObj:U,modificationDate:V,contentsObj:$,richText:X,parent:ie,rect:oe,parentRect:ne,open:z}){this.#a=S,this.#m=U,this.#l=$,this.#g=X,this.#s=ie,this.#r=F,this.#p=oe,this.#h=ne,this.#c=R;const K=o.PDFDateString.toDateObject(V);K&&(this.#e=ie.l10n.get("annotation_date_string",{date:K.toLocaleDateString(),time:K.toLocaleTimeString()})),this.trigger=R.flatMap(Q=>Q.getElementsToTriggerPopup());for(const Q of this.trigger)Q.addEventListener("click",this.#o),Q.addEventListener("mouseenter",this.#n),Q.addEventListener("mouseleave",this.#i),Q.classList.add("popupTriggerArea");for(const Q of R)Q.container?.addEventListener("keydown",this.#t);this.#a.hidden=!0,z&&this.#v()}render(){if(this.#f)return;const{page:{view:S},viewport:{rawDims:{pageWidth:F,pageHeight:R,pageX:U,pageY:V}}}=this.#s,$=this.#f=document.createElement("div");if($.className="popup",this.#r){const de=$.style.outlineColor=i.Util.makeHexColor(...this.#r);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?$.style.backgroundColor=`color-mix(in srgb, ${de} 30%, white)`:$.style.backgroundColor=i.Util.makeHexColor(...this.#r.map(pe=>Math.floor(.7*(255-pe)+pe)))}const X=document.createElement("span");X.className="header";const ie=document.createElement("h1");if(X.append(ie),{dir:ie.dir,str:ie.textContent}=this.#m,$.append(X),this.#e){const de=document.createElement("span");de.classList.add("popupDate"),this.#e.then(ue=>{de.textContent=ue}),X.append(de)}const oe=this.#l,ne=this.#g;if(ne?.str&&(!oe?.str||oe.str===ne.str))P.XfaLayer.render({xfaHtml:ne.html,intent:"richText",div:$}),$.lastChild.classList.add("richText","popupContent");else{const de=this._formatContents(oe);$.append(de)}let z=!!this.#h,K=z?this.#h:this.#p;for(const de of this.#c)if(!K||i.Util.intersect(de.data.rect,K)!==null){K=de.data.rect,z=!0;break}const Q=i.Util.normalizeRect([K[0],S[3]-K[1]+S[1],K[2],S[3]-K[3]+S[1]]),Y=5,se=z?K[2]-K[0]+Y:0,ae=Q[0]+se,ce=Q[1],{style:he}=this.#a;he.left=`${100*(ae-U)/F}%`,he.top=`${100*(ce-V)/R}%`,this.#a.append($)}_formatContents({str:S,dir:F}){const R=document.createElement("p");R.classList.add("popupContent"),R.dir=F;const U=S.split(/(?:\r\n?|\n)/);for(let V=0,$=U.length;V<$;++V){const X=U[V];R.append(document.createTextNode(X)),V<$-1&&R.append(document.createElement("br"))}return R}#u(S){S.altKey||S.shiftKey||S.ctrlKey||S.metaKey||(S.key==="Enter"||S.key==="Escape"&&this.#d)&&this.#v()}#v(){this.#d=!this.#d,this.#d?(this.#w(),this.#a.addEventListener("click",this.#o),this.#a.addEventListener("keydown",this.#t)):(this.#y(),this.#a.removeEventListener("click",this.#o),this.#a.removeEventListener("keydown",this.#t))}#w(){this.#f||this.render(),this.isVisible?this.#d&&this.#a.classList.add("focused"):(this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#y(){this.#a.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#_=this.isVisible,this.#_&&(this.#a.hidden=!0)}maybeShow(){this.#_&&(this.#_=!1,this.#a.hidden=!1)}get isVisible(){return this.#a.hidden===!1}}class O extends s{constructor(S){super(S,{isRenderable:!0,ignoreBorder:!0}),this.textContent=S.data.textContent,this.textPosition=S.data.textPosition,this.annotationEditorType=i.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const S=document.createElement("div");S.classList.add("annotationTextContent"),S.setAttribute("role","comment");for(const F of this.textContent){const R=document.createElement("span");R.textContent=F,S.append(R)}this.container.append(S)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=O;class j extends s{#e=null;constructor(S){super(S,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const S=this.data,{width:F,height:R}=p(S.rect),U=this.svgFactory.create(F,R,!0),V=this.#e=this.svgFactory.createElement("svg:line");return V.setAttribute("x1",S.rect[2]-S.lineCoordinates[0]),V.setAttribute("y1",S.rect[3]-S.lineCoordinates[1]),V.setAttribute("x2",S.rect[2]-S.lineCoordinates[2]),V.setAttribute("y2",S.rect[3]-S.lineCoordinates[3]),V.setAttribute("stroke-width",S.borderStyle.width||1),V.setAttribute("stroke","transparent"),V.setAttribute("fill","transparent"),U.append(V),this.container.append(U),!S.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class q extends s{#e=null;constructor(S){super(S,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const S=this.data,{width:F,height:R}=p(S.rect),U=this.svgFactory.create(F,R,!0),V=S.borderStyle.width,$=this.#e=this.svgFactory.createElement("svg:rect");return $.setAttribute("x",V/2),$.setAttribute("y",V/2),$.setAttribute("width",F-V),$.setAttribute("height",R-V),$.setAttribute("stroke-width",V||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),U.append($),this.container.append(U),!S.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class ee extends s{#e=null;constructor(S){super(S,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const S=this.data,{width:F,height:R}=p(S.rect),U=this.svgFactory.create(F,R,!0),V=S.borderStyle.width,$=this.#e=this.svgFactory.createElement("svg:ellipse");return $.setAttribute("cx",F/2),$.setAttribute("cy",R/2),$.setAttribute("rx",F/2-V/2),$.setAttribute("ry",R/2-V/2),$.setAttribute("stroke-width",V||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),U.append($),this.container.append(U),!S.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class W extends s{#e=null;constructor(S){super(S,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const S=this.data,{width:F,height:R}=p(S.rect),U=this.svgFactory.create(F,R,!0);let V=[];for(const X of S.vertices){const ie=X.x-S.rect[0],oe=S.rect[3]-X.y;V.push(ie+","+oe)}V=V.join(" ");const $=this.#e=this.svgFactory.createElement(this.svgElementName);return $.setAttribute("points",V),$.setAttribute("stroke-width",S.borderStyle.width||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),U.append($),this.container.append(U),!S.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class J extends W{constructor(S){super(S),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class G extends s{constructor(S){super(S,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class T extends s{#e=[];constructor(S){super(S,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=i.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const S=this.data,{width:F,height:R}=p(S.rect),U=this.svgFactory.create(F,R,!0);for(const V of S.inkLists){let $=[];for(const ie of V){const oe=ie.x-S.rect[0],ne=S.rect[3]-ie.y;$.push(`${oe},${ne}`)}$=$.join(" ");const X=this.svgFactory.createElement(this.svgElementName);this.#e.push(X),X.setAttribute("points",$),X.setAttribute("stroke-width",S.borderStyle.width||1),X.setAttribute("stroke","transparent"),X.setAttribute("fill","transparent"),!S.popupRef&&this.hasPopupData&&this._createPopup(),U.append(X)}return this.container.append(U),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}e.InkAnnotationElement=T;class E extends s{constructor(S){super(S,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class y extends s{constructor(S){super(S,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class g extends s{constructor(S){super(S,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class M extends s{constructor(S){super(S,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class k extends s{constructor(S){super(S,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=k;class N extends s{#e=null;constructor(S){super(S,{isRenderable:!0});const{filename:F,content:R}=this.data.file;this.filename=(0,o.getFilenameFromUrl)(F,!0),this.content=R,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:F,content:R})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:S,data:F}=this;let R;F.hasAppearance||F.fillAlpha===0?R=document.createElement("div"):(R=document.createElement("img"),R.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(F.name)?"paperclip":"pushpin"}.svg`,F.fillAlpha&&F.fillAlpha<1&&(R.style=`filter: opacity(${Math.round(F.fillAlpha*100)}%);`)),R.addEventListener("dblclick",this.#t.bind(this)),this.#e=R;const{isMac:U}=i.FeatureTest.platform;return S.addEventListener("keydown",V=>{V.key==="Enter"&&(U?V.metaKey:V.ctrlKey)&&this.#t()}),!F.popupRef&&this.hasPopupData?this._createPopup():R.classList.add("popupTriggerArea"),S.append(R),S}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class H{#e=null;#t=null;#i=new Map;constructor({div:S,accessibilityManager:F,annotationCanvasMap:R,l10n:U,page:V,viewport:$}){this.div=S,this.#e=F,this.#t=R,this.l10n=U,this.page=V,this.viewport=$,this.zIndex=0,this.l10n||=d.NullL10n}#n(S,F){const R=S.firstChild||S;R.id=`${i.AnnotationPrefix}${F}`,this.div.append(S),this.#e?.moveElementInDOM(this.div,S,R,!1)}async render(S){const{annotations:F}=S,R=this.div;(0,o.setLayerDimensions)(R,this.viewport);const U=new Map,V={data:null,layer:R,linkService:S.linkService,downloadManager:S.downloadManager,imageResourcesPath:S.imageResourcesPath||"",renderForms:S.renderForms!==!1,svgFactory:new o.DOMSVGFactory,annotationStorage:S.annotationStorage||new f.AnnotationStorage,enableScripting:S.enableScripting===!0,hasJSActions:S.hasJSActions,fieldObjects:S.fieldObjects,parent:this,elements:null};for(const $ of F){if($.noHTML)continue;const X=$.annotationType===i.AnnotationType.POPUP;if(X){const ne=U.get($.id);if(!ne)continue;V.elements=ne}else{const{width:ne,height:z}=p($.rect);if(ne<=0||z<=0)continue}V.data=$;const ie=h.create(V);if(!ie.isRenderable)continue;if(!X&&$.popupRef){const ne=U.get($.popupRef);ne?ne.push(ie):U.set($.popupRef,[ie])}ie.annotationEditorType>0&&this.#i.set(ie.data.id,ie);const oe=ie.render();$.hidden&&(oe.style.visibility="hidden"),this.#n(oe,$.id)}this.#o(),await this.l10n.translate(R)}update({viewport:S}){const F=this.div;this.viewport=S,(0,o.setLayerDimensions)(F,{rotation:S.rotation}),this.#o(),F.hidden=!1}#o(){if(!this.#t)return;const S=this.div;for(const[F,R]of this.#t){const U=S.querySelector(`[data-annotation-id="${F}"]`);if(!U)continue;const{firstChild:V}=U;V?V.nodeName==="CANVAS"?V.replaceWith(R):V.before(R):U.append(R)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(S){return this.#i.get(S)}}e.AnnotationLayer=H},(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function a(f){return Math.floor(Math.max(0,Math.min(1,f))*255).toString(16).padStart(2,"0")}function i(f){return Math.max(0,Math.min(255,255*f))}class o{static CMYK_G([v,d,P,r]){return["G",1-Math.min(1,.3*v+.59*P+.11*d+r)]}static G_CMYK([v]){return["CMYK",0,0,0,1-v]}static G_RGB([v]){return["RGB",v,v,v]}static G_rgb([v]){return v=i(v),[v,v,v]}static G_HTML([v]){const d=a(v);return`#${d}${d}${d}`}static RGB_G([v,d,P]){return["G",.3*v+.59*d+.11*P]}static RGB_rgb(v){return v.map(i)}static RGB_HTML(v){return`#${v.map(a).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([v,d,P,r]){return["RGB",1-Math.min(1,v+r),1-Math.min(1,P+r),1-Math.min(1,d+r)]}static CMYK_rgb([v,d,P,r]){return[i(1-Math.min(1,v+r)),i(1-Math.min(1,P+r)),i(1-Math.min(1,d+r))]}static CMYK_HTML(v){const d=this.CMYK_RGB(v).slice(1);return this.RGB_HTML(d)}static RGB_CMYK([v,d,P]){const r=1-v,t=1-d,l=1-P,p=Math.min(r,t,l);return["CMYK",r,t,l,p]}}e.ColorConverters=o},(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=i;const a={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} Ã {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} Ã {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typingâ¦",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};a.print_progress_percent="{{progress}}%";function i(v,d){switch(v){case"find_match_count":v=`find_match_count[${d.total===1?"one":"other"}]`;break;case"find_match_count_limit":v=`find_match_count_limit[${d.limit===1?"one":"other"}]`;break}return a[v]||""}function o(v,d){return d?v.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(P,r)=>r in d?d[r]:"{{"+r+"}}"):v}const f={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(v,d=null,P=i(v,d)){return o(P,d)},async translate(v){}};e.NullL10n=f},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var i=a(25);class o{static setupStorage(v,d,P,r,t){const l=r.getValue(d,{value:null});switch(P.name){case"textarea":if(l.value!==null&&(v.textContent=l.value),t==="print")break;v.addEventListener("input",p=>{r.setValue(d,{value:p.target.value})});break;case"input":if(P.attributes.type==="radio"||P.attributes.type==="checkbox"){if(l.value===P.attributes.xfaOn?v.setAttribute("checked",!0):l.value===P.attributes.xfaOff&&v.removeAttribute("checked"),t==="print")break;v.addEventListener("change",p=>{r.setValue(d,{value:p.target.checked?p.target.getAttribute("xfaOn"):p.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&v.setAttribute("value",l.value),t==="print")break;v.addEventListener("input",p=>{r.setValue(d,{value:p.target.value})})}break;case"select":if(l.value!==null){v.setAttribute("value",l.value);for(const p of P.children)p.attributes.value===l.value?p.attributes.selected=!0:p.attributes.hasOwnProperty("selected")&&delete p.attributes.selected}v.addEventListener("input",p=>{const h=p.target.options,s=h.selectedIndex===-1?"":h[h.selectedIndex].value;r.setValue(d,{value:s})});break}}static setAttributes({html:v,element:d,storage:P=null,intent:r,linkService:t}){const{attributes:l}=d,p=v instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${r}`);for(const[h,s]of Object.entries(l))if(s!=null)switch(h){case"class":s.length&&v.setAttribute(h,s.join(" "));break;case"dataId":break;case"id":v.setAttribute("data-element-id",s);break;case"style":Object.assign(v.style,s);break;case"textContent":v.textContent=s;break;default:(!p||h!=="href"&&h!=="newWindow")&&v.setAttribute(h,s)}p&&t.addLinkAttributes(v,l.href,l.newWindow),P&&l.dataId&&this.setupStorage(v,l.dataId,d,P)}static render(v){const d=v.annotationStorage,P=v.linkService,r=v.xfaHtml,t=v.intent||"display",l=document.createElement(r.name);r.attributes&&this.setAttributes({html:l,element:r,intent:t,linkService:P});const p=[[r,-1,l]],h=v.div;if(h.append(l),v.viewport){const m=`matrix(${v.viewport.transform.join(",")})`;h.style.transform=m}t!=="richText"&&h.setAttribute("class","xfaLayer xfaFont");const s=[];for(;p.length>0;){const[m,_,u]=p.at(-1);if(_+1===m.children.length){p.pop();continue}const w=m.children[++p.at(-1)[1]];if(w===null)continue;const{name:C}=w;if(C==="#text"){const c=document.createTextNode(w.value);s.push(c),u.append(c);continue}const x=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,C):document.createElement(C);if(u.append(x),w.attributes&&this.setAttributes({html:x,element:w,storage:d,intent:t,linkService:P}),w.children&&w.children.length>0)p.push([w,-1,x]);else if(w.value){const c=document.createTextNode(w.value);i.XfaText.shouldBuildText(C)&&s.push(c),x.append(c)}}for(const m of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:s}}static update(v){const d=`matrix(${v.viewport.transform.join(",")})`;v.div.style.transform=d,v.div.hidden=!1}}e.XfaLayer=o},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var i=a(1),o=a(4),f=a(29),v=a(6),d=a(5);class P extends o.AnnotationEditor{#e=0;#t=0;#i=this.canvasPointermove.bind(this);#n=this.canvasPointerleave.bind(this);#o=this.canvasPointerup.bind(this);#r=this.canvasPointerdown.bind(this);#a=new Path2D;#l=!1;#c=!1;#s=!1;#h=null;#d=0;#f=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(t){super({...t,name:"inkEditor"}),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t){o.AnnotationEditor.initialize(t,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(t,l){switch(t){case i.AnnotationEditorParamsType.INK_THICKNESS:P._defaultThickness=l;break;case i.AnnotationEditorParamsType.INK_COLOR:P._defaultColor=l;break;case i.AnnotationEditorParamsType.INK_OPACITY:P._defaultOpacity=l/100;break}}updateParams(t,l){switch(t){case i.AnnotationEditorParamsType.INK_THICKNESS:this.#g(l);break;case i.AnnotationEditorParamsType.INK_COLOR:this.#m(l);break;case i.AnnotationEditorParamsType.INK_OPACITY:this.#_(l);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,P._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,P._defaultColor||o.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(P._defaultOpacity*100)]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||P._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||P._defaultColor||o.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??P._defaultOpacity))]]}#g(t){const l=this.thickness;this.addCommands({cmd:()=>{this.thickness=t,this.#F()},undo:()=>{this.thickness=l,this.#F()},mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#m(t){const l=this.color;this.addCommands({cmd:()=>{this.color=t,this.#b()},undo:()=>{this.color=l,this.#b()},mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#_(t){t/=100;const l=this.opacity;this.addCommands({cmd:()=>{this.opacity=t,this.#b()},undo:()=>{this.opacity=l,this.#b()},mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#x(),this.#M()),this.isAttachedToDOM||(this.parent.add(this),this.#A()),this.#F()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#h.disconnect(),this.#h=null,super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,l]=this.parentDimensions,p=this.width*t,h=this.height*l;this.setDimensions(p,h)}enableEditMode(){this.#l||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#r))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#r))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#u(){const{parentRotation:t,parentDimensions:[l,p]}=this;switch(t){case 90:return[0,p,p,l];case 180:return[l,p,l,p];case 270:return[l,0,p,l];default:return[0,0,l,p]}}#v(){const{ctx:t,color:l,opacity:p,thickness:h,parentScale:s,scaleFactor:m}=this;t.lineWidth=h*s/m,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${l}${(0,d.opacityToHex)(p)}`}#w(t,l){this.canvas.addEventListener("contextmenu",v.noContextMenu),this.canvas.addEventListener("pointerleave",this.#n),this.canvas.addEventListener("pointermove",this.#i),this.canvas.addEventListener("pointerup",this.#o),this.canvas.removeEventListener("pointerdown",this.#r),this.isEditing=!0,this.#s||(this.#s=!0,this.#A(),this.thickness||=P._defaultThickness,this.color||=P._defaultColor||o.AnnotationEditor._defaultLineColor,this.opacity??=P._defaultOpacity),this.currentPath.push([t,l]),this.#c=!1,this.#v(),this.#p=()=>{this.#D(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#y(t,l){const[p,h]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===p&&l===h)return;const s=this.currentPath;let m=this.#a;if(s.push([t,l]),this.#c=!0,s.length<=2){m.moveTo(...s[0]),m.lineTo(t,l);return}s.length===3&&(this.#a=m=new Path2D,m.moveTo(...s[0])),this.#R(m,...s.at(-3),...s.at(-2),t,l)}#S(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);this.#a.lineTo(...t)}#P(t,l){this.#p=null,t=Math.min(Math.max(t,0),this.canvas.width),l=Math.min(Math.max(l,0),this.canvas.height),this.#y(t,l),this.#S();let p;if(this.currentPath.length!==1)p=this.#k();else{const u=[t,l];p=[[u,u.slice(),u.slice(),u]]}const h=this.#a,s=this.currentPath;this.currentPath=[],this.#a=new Path2D;const m=()=>{this.allRawPaths.push(s),this.paths.push(p),this.bezierPath2D.push(h),this.rebuild()},_=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#x(),this.#M()),this.#F())};this.addCommands({cmd:m,undo:_,mustExec:!0})}#D(){if(!this.#c)return;this.#c=!1;const t=Math.ceil(this.thickness*this.parentScale),l=this.currentPath.slice(-3),p=l.map(m=>m[0]),h=l.map(m=>m[1]);Math.min(...p)-t,Math.max(...p)+t,Math.min(...h)-t,Math.max(...h)+t;const{ctx:s}=this;s.save(),s.clearRect(0,0,this.canvas.width,this.canvas.height);for(const m of this.bezierPath2D)s.stroke(m);s.stroke(this.#a),s.restore()}#R(t,l,p,h,s,m,_){const u=(l+h)/2,w=(p+s)/2,C=(h+m)/2,x=(s+_)/2;t.bezierCurveTo(u+2*(h-u)/3,w+2*(s-w)/3,C+2*(h-C)/3,x+2*(s-x)/3,C,x)}#k(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const l=[];let p,[h,s]=t[0];for(p=1;p<t.length-2;p++){const[c,b]=t[p],[D,B]=t[p+1],L=(c+D)/2,O=(b+B)/2,j=[h+2*(c-h)/3,s+2*(b-s)/3],q=[L+2*(c-L)/3,O+2*(b-O)/3];l.push([[h,s],j,q,[L,O]]),[h,s]=[L,O]}const[m,_]=t[p],[u,w]=t[p+1],C=[h+2*(m-h)/3,s+2*(_-s)/3],x=[u+2*(m-u)/3,w+2*(_-w)/3];return l.push([[h,s],C,x,[u,w]]),l}#b(){if(this.isEmpty()){this.#L();return}this.#v();const{canvas:t,ctx:l}=this;l.setTransform(1,0,0,1,0,0),l.clearRect(0,0,t.width,t.height),this.#L();for(const p of this.bezierPath2D)l.stroke(p)}commit(){this.#l||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#l=!0,this.div.classList.add("disabled"),this.#F(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||this.#l||(this.setInForeground(),t.preventDefault(),t.type!=="mouse"&&this.div.focus(),this.#w(t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),this.#y(t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),this.#T(t)}canvasPointerleave(t){this.#T(t)}#T(t){this.canvas.removeEventListener("pointerleave",this.#n),this.canvas.removeEventListener("pointermove",this.#i),this.canvas.removeEventListener("pointerup",this.#o),this.canvas.addEventListener("pointerdown",this.#r),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",v.noContextMenu)},10),this.#P(t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#x(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",o.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(t=>this.canvas?.setAttribute("aria-label",t)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#M(){this.#h=new ResizeObserver(t=>{const l=t[0].contentRect;l.width&&l.height&&this.setDimensions(l.width,l.height)}),this.#h.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#l}render(){if(this.div)return this.div;let t,l;this.width&&(t=this.x,l=this.y),super.render(),o.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(_=>this.div?.setAttribute("aria-label",_));const[p,h,s,m]=this.#u();if(this.setAt(p,h,0,0),this.setDims(s,m),this.#x(),this.width){const[_,u]=this.parentDimensions;this.setAspectRatio(this.width*_,this.height*u),this.setAt(t*_,l*u,this.width*_,this.height*u),this.#s=!0,this.#A(),this.setDims(this.width*_,this.height*u),this.#b(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#M(),this.div}#A(){if(!this.#s)return;const[t,l]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*l),this.#L()}setDimensions(t,l){const p=Math.round(t),h=Math.round(l);if(this.#d===p&&this.#f===h)return;this.#d=p,this.#f=h,this.canvas.style.visibility="hidden";const[s,m]=this.parentDimensions;this.width=t/s,this.height=l/m,this.fixAndSetPosition(),this.#l&&this.#C(t,l),this.#A(),this.#b(),this.canvas.style.visibility="visible",this.fixDims()}#C(t,l){const p=this.#O(),h=(t-p)/this.#t,s=(l-p)/this.#e;this.scaleFactor=Math.min(h,s)}#L(){const t=this.#O()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}static#N(t){const l=new Path2D;for(let p=0,h=t.length;p<h;p++){const[s,m,_,u]=t[p];p===0&&l.moveTo(...s),l.bezierCurveTo(m[0],m[1],_[0],_[1],u[0],u[1])}return l}static#B(t,l,p){const[h,s,m,_]=l;switch(p){case 0:for(let u=0,w=t.length;u<w;u+=2)t[u]+=h,t[u+1]=_-t[u+1];break;case 90:for(let u=0,w=t.length;u<w;u+=2){const C=t[u];t[u]=t[u+1]+h,t[u+1]=C+s}break;case 180:for(let u=0,w=t.length;u<w;u+=2)t[u]=m-t[u],t[u+1]+=s;break;case 270:for(let u=0,w=t.length;u<w;u+=2){const C=t[u];t[u]=m-t[u+1],t[u+1]=_-C}break;default:throw new Error("Invalid rotation")}return t}static#V(t,l,p){const[h,s,m,_]=l;switch(p){case 0:for(let u=0,w=t.length;u<w;u+=2)t[u]-=h,t[u+1]=_-t[u+1];break;case 90:for(let u=0,w=t.length;u<w;u+=2){const C=t[u];t[u]=t[u+1]-s,t[u+1]=C-h}break;case 180:for(let u=0,w=t.length;u<w;u+=2)t[u]=m-t[u],t[u+1]-=s;break;case 270:for(let u=0,w=t.length;u<w;u+=2){const C=t[u];t[u]=_-t[u+1],t[u+1]=m-C}break;default:throw new Error("Invalid rotation")}return t}#U(t,l,p,h){const s=[],m=this.thickness/2,_=t*l+m,u=t*p+m;for(const w of this.paths){const C=[],x=[];for(let c=0,b=w.length;c<b;c++){const[D,B,L,O]=w[c],j=t*D[0]+_,q=t*D[1]+u,ee=t*B[0]+_,W=t*B[1]+u,J=t*L[0]+_,G=t*L[1]+u,T=t*O[0]+_,E=t*O[1]+u;c===0&&(C.push(j,q),x.push(j,q)),C.push(ee,W,J,G,T,E),x.push(ee,W),c===b-1&&x.push(T,E)}s.push({bezier:P.#B(C,h,this.rotation),points:P.#B(x,h,this.rotation)})}return s}#I(){let t=1/0,l=-1/0,p=1/0,h=-1/0;for(const s of this.paths)for(const[m,_,u,w]of s){const C=i.Util.bezierBoundingBox(...m,..._,...u,...w);t=Math.min(t,C[0]),p=Math.min(p,C[1]),l=Math.max(l,C[2]),h=Math.max(h,C[3])}return[t,p,l,h]}#O(){return this.#l?Math.ceil(this.thickness*this.parentScale):0}#F(t=!1){if(this.isEmpty())return;if(!this.#l){this.#b();return}const l=this.#I(),p=this.#O();this.#t=Math.max(o.AnnotationEditor.MIN_SIZE,l[2]-l[0]),this.#e=Math.max(o.AnnotationEditor.MIN_SIZE,l[3]-l[1]);const h=Math.ceil(p+this.#t*this.scaleFactor),s=Math.ceil(p+this.#e*this.scaleFactor),[m,_]=this.parentDimensions;this.width=h/m,this.height=s/_,this.setAspectRatio(h,s);const u=this.translationX,w=this.translationY;this.translationX=-l[0],this.translationY=-l[1],this.#A(),this.#b(),this.#d=h,this.#f=s,this.setDims(h,s);const C=t?p/this.scaleFactor/2:0;this.translate(u-this.translationX-C,w-this.translationY-C)}static deserialize(t,l,p){if(t instanceof f.InkAnnotationElement)return null;const h=super.deserialize(t,l,p);h.thickness=t.thickness,h.color=i.Util.makeHexColor(...t.color),h.opacity=t.opacity;const[s,m]=h.pageDimensions,_=h.width*s,u=h.height*m,w=h.parentScale,C=t.thickness/2;h.#l=!0,h.#d=Math.round(_),h.#f=Math.round(u);const{paths:x,rect:c,rotation:b}=t;for(let{bezier:B}of x){B=P.#V(B,c,b);const L=[];h.paths.push(L);let O=w*(B[0]-C),j=w*(B[1]-C);for(let ee=2,W=B.length;ee<W;ee+=6){const J=w*(B[ee]-C),G=w*(B[ee+1]-C),T=w*(B[ee+2]-C),E=w*(B[ee+3]-C),y=w*(B[ee+4]-C),g=w*(B[ee+5]-C);L.push([[O,j],[J,G],[T,E],[y,g]]),O=y,j=g}const q=this.#N(L);h.bezierPath2D.push(q)}const D=h.#I();return h.#t=Math.max(o.AnnotationEditor.MIN_SIZE,D[2]-D[0]),h.#e=Math.max(o.AnnotationEditor.MIN_SIZE,D[3]-D[1]),h.#C(_,u),h}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),l=o.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:i.AnnotationEditorType.INK,color:l,thickness:this.thickness,opacity:this.opacity,paths:this.#U(this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}e.InkEditor=P},(n,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var i=a(1),o=a(4),f=a(6),v=a(29);class d extends o.AnnotationEditor{#e=null;#t=null;#i=null;#n=null;#o=null;#r=null;#a=null;#l=null;#c=!1;#s=!1;static _type="stamp";constructor(r){super({...r,name:"stampEditor"}),this.#n=r.bitmapUrl,this.#o=r.bitmapFile}static initialize(r){o.AnnotationEditor.initialize(r)}static get supportedTypes(){const r=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,i.shadow)(this,"supportedTypes",r.map(t=>`image/${t}`))}static get supportedTypesStr(){return(0,i.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(r){return this.supportedTypes.includes(r)}static paste(r,t){t.pasteEditor(i.AnnotationEditorType.STAMP,{bitmapFile:r.getAsFile()})}#h(r,t=!1){if(!r){this.remove();return}this.#e=r.bitmap,t||(this.#t=r.id,this.#c=r.isSvg),this.#p()}#d(){this.#i=null,this._uiManager.enableWaiting(!1),this.#r&&this.div.focus()}#f(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(t=>this.#h(t,!0)).finally(()=>this.#d());return}if(this.#n){const t=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(t).then(l=>this.#h(l)).finally(()=>this.#d());return}if(this.#o){const t=this.#o;this.#o=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(t).then(l=>this.#h(l)).finally(()=>this.#d());return}const r=document.createElement("input");r.type="file",r.accept=d.supportedTypesStr,this.#i=new Promise(t=>{r.addEventListener("change",async()=>{if(!r.files||r.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const l=await this._uiManager.imageManager.getFromFile(r.files[0]);this.#h(l)}t()}),r.addEventListener("cancel",()=>{this.remove(),t()})}).finally(()=>this.#d()),r.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#r?.remove(),this.#r=null,this.#a?.disconnect(),this.#a=null),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#f();return}super.rebuild(),this.div!==null&&(this.#t&&this.#f(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#i||this.#e||this.#n||this.#o)}get isResizable(){return!0}render(){if(this.div)return this.div;let r,t;if(this.width&&(r=this.x,t=this.y),super.render(),this.div.hidden=!0,this.#e?this.#p():this.#f(),this.width){const[l,p]=this.parentDimensions;this.setAt(r*l,t*p,this.width*l,this.height*p)}return this.div}#p(){const{div:r}=this;let{width:t,height:l}=this.#e;const[p,h]=this.pageDimensions,s=.75;if(this.width)t=this.width*p,l=this.height*h;else if(t>s*p||l>s*h){const w=Math.min(s*p/t,s*h/l);t*=w,l*=w}const[m,_]=this.parentDimensions;this.setDims(t*m/p,l*_/h),this._uiManager.enableWaiting(!1);const u=this.#r=document.createElement("canvas");r.append(u),r.hidden=!1,this.#_(t,l),this.#v(),this.#s||(this.parent.addUndoableEditor(this),this.#s=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#g(r,t){const[l,p]=this.parentDimensions;this.width=r/l,this.height=t/p,this.setDims(r,t),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#l!==null&&clearTimeout(this.#l);const h=200;this.#l=setTimeout(()=>{this.#l=null,this.#_(r,t)},h)}#m(r,t){const{width:l,height:p}=this.#e;let h=l,s=p,m=this.#e;for(;h>2*r||s>2*t;){const _=h,u=s;h>2*r&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2)),s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2));const w=new OffscreenCanvas(h,s);w.getContext("2d").drawImage(m,0,0,_,u,0,0,h,s),m=w.transferToImageBitmap()}return m}#_(r,t){r=Math.ceil(r),t=Math.ceil(t);const l=this.#r;if(!l||l.width===r&&l.height===t)return;l.width=r,l.height=t;const p=this.#c?this.#e:this.#m(r,t),h=l.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(p,0,0,p.width,p.height,0,0,r,t)}#u(r){if(r){if(this.#c){const p=this._uiManager.imageManager.getSvgUrl(this.#t);if(p)return p}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#c){const[t,l]=this.pageDimensions,p=Math.round(this.width*t*f.PixelsPerInch.PDF_TO_CSS_UNITS),h=Math.round(this.height*l*f.PixelsPerInch.PDF_TO_CSS_UNITS),s=new OffscreenCanvas(p,h);return s.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,p,h),s.transferToImageBitmap()}return structuredClone(this.#e)}#v(){this.#a=new ResizeObserver(r=>{const t=r[0].contentRect;t.width&&t.height&&this.#g(t.width,t.height)}),this.#a.observe(this.div)}static deserialize(r,t,l){if(r instanceof v.StampAnnotationElement)return null;const p=super.deserialize(r,t,l),{rect:h,bitmapUrl:s,bitmapId:m,isSvg:_,accessibilityData:u}=r;m&&l.imageManager.isValidId(m)?p.#t=m:p.#n=s,p.#c=_;const[w,C]=p.pageDimensions;return p.width=(h[2]-h[0])/w,p.height=(h[3]-h[1])/C,u&&(p.altTextData=u),p}serialize(r=!1,t=null){if(this.isEmpty())return null;const l={annotationType:i.AnnotationEditorType.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(r)return l.bitmapUrl=this.#u(!0),l.accessibilityData=this.altTextData,l;const{decorative:p,altText:h}=this.altTextData;if(!p&&h&&(l.accessibilityData={type:"Figure",alt:h}),t===null)return l;t.stamps||=new Map;const s=this.#c?(l.rect[2]-l.rect[0])*(l.rect[3]-l.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:s,serialized:l}),l.bitmap=this.#u(!1);else if(this.#c){const m=t.stamps.get(this.#t);s>m.area&&(m.area=s,m.serialized.bitmap.close(),m.serialized.bitmap=this.#u(!1))}return l}}e.StampEditor=d}],__webpack_module_cache__={};function __w_pdfjs_require__(n){var e=__webpack_module_cache__[n];if(e!==void 0)return e.exports;var a=__webpack_module_cache__[n]={exports:{}};return __webpack_modules__[n](a,a.exports,__w_pdfjs_require__),a.exports}var __webpack_exports__={};return(()=>{var n=__webpack_exports__;Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(n,"AnnotationEditorLayer",{enumerable:!0,get:function(){return f.AnnotationEditorLayer}}),Object.defineProperty(n,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(n,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(n,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return v.AnnotationEditorUIManager}}),Object.defineProperty(n,"AnnotationLayer",{enumerable:!0,get:function(){return d.AnnotationLayer}}),Object.defineProperty(n,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(n,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(n,"DOMSVGFactory",{enumerable:!0,get:function(){return i.DOMSVGFactory}}),Object.defineProperty(n,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(n,"GlobalWorkerOptions",{enumerable:!0,get:function(){return P.GlobalWorkerOptions}}),Object.defineProperty(n,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(n,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(n,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(n,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(n,"PDFDataRangeTransport",{enumerable:!0,get:function(){return a.PDFDataRangeTransport}}),Object.defineProperty(n,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(n,"PDFWorker",{enumerable:!0,get:function(){return a.PDFWorker}}),Object.defineProperty(n,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(n,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(n,"PixelsPerInch",{enumerable:!0,get:function(){return i.PixelsPerInch}}),Object.defineProperty(n,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(n,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(n,"SVGGraphics",{enumerable:!0,get:function(){return a.SVGGraphics}}),Object.defineProperty(n,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(n,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(n,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(n,"XfaLayer",{enumerable:!0,get:function(){return r.XfaLayer}}),Object.defineProperty(n,"build",{enumerable:!0,get:function(){return a.build}}),Object.defineProperty(n,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(n,"getDocument",{enumerable:!0,get:function(){return a.getDocument}}),Object.defineProperty(n,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(n,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return i.getPdfFilenameFromUrl}}),Object.defineProperty(n,"getXfaPageViewport",{enumerable:!0,get:function(){return i.getXfaPageViewport}}),Object.defineProperty(n,"isDataScheme",{enumerable:!0,get:function(){return i.isDataScheme}}),Object.defineProperty(n,"isPdfFile",{enumerable:!0,get:function(){return i.isPdfFile}}),Object.defineProperty(n,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(n,"noContextMenu",{enumerable:!0,get:function(){return i.noContextMenu}}),Object.defineProperty(n,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(n,"renderTextLayer",{enumerable:!0,get:function(){return o.renderTextLayer}}),Object.defineProperty(n,"setLayerDimensions",{enumerable:!0,get:function(){return i.setLayerDimensions}}),Object.defineProperty(n,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(n,"updateTextLayer",{enumerable:!0,get:function(){return o.updateTextLayer}}),Object.defineProperty(n,"version",{enumerable:!0,get:function(){return a.version}});var e=__w_pdfjs_require__(1),a=__w_pdfjs_require__(2),i=__w_pdfjs_require__(6),o=__w_pdfjs_require__(26),f=__w_pdfjs_require__(27),v=__w_pdfjs_require__(5),d=__w_pdfjs_require__(29),P=__w_pdfjs_require__(14),r=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports,pdf_viewer$1={exports:{}};(function(n,e){(function(i,o){n.exports=i.pdfjsViewer=o()})(globalThis,()=>(()=>{var a=[,(v,d,P)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFFindController=d.FindState=void 0;var r=P(2),t=P(3),l=P(4);const p={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};d.FindState=p;const h=250,s=-50,m=-400,_={"â":"-","â":"'","â":"'","â":"'","â":"'","â":'"',"â":'"',"â":'"',"â":'"',"Â¼":"1/4","Â½":"1/2","Â¾":"3/4"},u=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let w;const C=/\p{M}+/gu,x=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,c=/([^\p{M}])\p{M}*$/u,b=/^\p{M}*([^\p{M}])/u,D=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,B=new Map,L="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",O=new Map;let j=null,q=null;function ee(G){const T=[];let E;for(;(E=D.exec(G))!==null;){let{index:U}=E;for(const V of E[0]){let $=B.get(V);$||($=V.normalize("NFD").length,B.set(V,$)),T.push([$,U++])}}let y;if(T.length===0&&j)y=j;else if(T.length>0&&q)y=q;else{const U=Object.keys(_).join(""),V=(0,t.getNormalizeWithNFKC)(),ie=`([${U}])|([${V}])|((?:ã|ã)\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|((?:\\p{Ideographic}|[ã-ã¿])\\n)|(\\n)`;T.length===0?y=j=new RegExp(ie+"|(\\u0000)","gum"):y=q=new RegExp(ie+`|(${L})`,"gum")}const g=[];for(;(E=C.exec(G))!==null;)g.push([E[0].length,E.index]);let M=G.normalize("NFD");const k=[[0,0]];let N=0,H=0,I=0,S=0,F=0,R=!1;return M=M.replace(y,(U,V,$,X,ie,oe,ne,z,K,Q)=>{if(Q-=S,V){const Y=_[V],se=Y.length;for(let ae=1;ae<se;ae++)k.push([Q-I+ae,I-ae]);return I-=se-1,Y}if($){let Y=O.get($);Y||(Y=$.normalize("NFKC"),O.set($,Y));const se=Y.length;for(let ae=1;ae<se;ae++)k.push([Q-I+ae,I-ae]);return I-=se-1,Y}if(X)return R=!0,Q+F===g[N]?.[1]?++N:(k.push([Q-1-I+1,I-1]),I-=1,S+=1),k.push([Q-I+1,I]),S+=1,F+=1,X.charAt(0);if(ie){const Y=ie.endsWith(`
`),se=Y?ie.length-2:ie.length;R=!0;let ae=se;Q+F===g[N]?.[1]&&(ae-=g[N][0],++N);for(let ce=1;ce<=ae;ce++)k.push([Q-1-I+ce,I-ce]);return I-=ae,S+=ae,Y?(Q+=se-1,k.push([Q-I+1,1+I]),I+=1,S+=1,F+=1,ie.slice(0,se)):ie}if(oe){const Y=oe.length-2;return k.push([Q-I+Y,1+I]),I+=1,S+=1,F+=1,oe.slice(0,-2)}if(ne){const Y=ne.length-1;return k.push([Q-I+Y,I]),S+=1,F+=1,ne.slice(0,-1)}if(z)return k.push([Q-I+1,I-1]),I-=1,S+=1,F+=1," ";if(Q+F===T[H]?.[1]){const Y=T[H][0]-1;++H;for(let se=1;se<=Y;se++)k.push([Q-(I-se),I-se]);I-=Y,S+=Y}return K}),k.push([M.length,I]),[M,k,R]}function W(G,T,E){if(!G)return[T,E];const y=T,g=T+E-1;let M=(0,r.binarySearchFirstItem)(G,S=>S[0]>=y);G[M][0]>y&&--M;let k=(0,r.binarySearchFirstItem)(G,S=>S[0]>=g,M);G[k][0]>g&&--k;const N=y+G[M][1],I=g+G[k][1]+1-N;return[N,I]}class J{#e=null;#t=!0;#i=0;constructor({linkService:T,eventBus:E,updateMatchesCountOnProgress:y=!0}){this._linkService=T,this._eventBus=E,this.#t=y,this.onIsPageVisible=null,this.#o(),E._on("find",this.#n.bind(this)),E._on("findbarclose",this.#w.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this.#e}setDocument(T){this._pdfDocument&&this.#o(),T&&(this._pdfDocument=T,this._firstPageCapability.resolve())}#n(T){if(!T)return;T.phraseSearch===!1&&(console.error("The `phraseSearch`-parameter was removed, please provide an Array of strings in the `query`-parameter instead."),typeof T.query=="string"&&(T.query=T.query.match(/\S+/g)));const E=this._pdfDocument,{type:y}=T;(this.#e===null||this.#a(T))&&(this._dirtyMatch=!0),this.#e=T,y!=="highlightallchange"&&this.#P(p.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||E&&this._pdfDocument!==E)return;this.#d();const g=!this._highlightMatches,M=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),y?this._dirtyMatch?this.#g():y==="again"?(this.#g(),g&&this.#e.highlightAll&&this.#p()):y==="highlightallchange"?(M?this.#g():this._highlightMatches=!0,this.#p()):this.#g():this._findTimeout=setTimeout(()=>{this.#g(),this._findTimeout=null},h)})}scrollMatchIntoView({element:T=null,selectedLeft:E=0,pageIndex:y=-1,matchIndex:g=-1}){if(!this._scrollMatches||!T)return;if(g===-1||g!==this._selected.matchIdx)return;if(y===-1||y!==this._selected.pageIdx)return;this._scrollMatches=!1;const M={top:s,left:E+m};(0,r.scrollIntoView)(T,M,!0)}#o(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this.#i=0,this.#e=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=new l.PromiseCapability}get#r(){const{query:T}=this.#e;return typeof T=="string"?(T!==this._rawQuery&&(this._rawQuery=T,[this._normalizedQuery]=ee(T)),this._normalizedQuery):(T||[]).filter(E=>!!E).map(E=>ee(E)[0])}#a(T){const E=T.query,y=this.#e.query,g=typeof E;if(g!==typeof y)return!0;if(g==="string"){if(E!==y)return!0}else if(JSON.stringify(E)!==JSON.stringify(y))return!0;switch(T.type){case"again":const k=this._selected.pageIdx+1,N=this._linkService;return k>=1&&k<=N.pagesCount&&k!==N.page&&!(this.onIsPageVisible?.(k)??!0);case"highlightallchange":return!1}return!0}#l(T,E,y){let g=T.slice(0,E).match(c);if(g){const M=T.charCodeAt(E),k=g[1].charCodeAt(0);if((0,t.getCharacterType)(M)===(0,t.getCharacterType)(k))return!1}if(g=T.slice(E+y).match(b),g){const M=T.charCodeAt(E+y-1),k=g[1].charCodeAt(0);if((0,t.getCharacterType)(M)===(0,t.getCharacterType)(k))return!1}return!0}#c(T,E,y,g){const M=this._pageMatches[y]=[],k=this._pageMatchesLength[y]=[];if(!T)return;const N=this._pageDiffs[y];let H;for(;(H=T.exec(g))!==null;){if(E&&!this.#l(g,H.index,H[0].length))continue;const[I,S]=W(N,H.index,H[0].length);S&&(M.push(I),k.push(S))}}#s(T,E){const{matchDiacritics:y}=this.#e;let g=!1;T=T.replaceAll(x,(k,N,H,I,S,F)=>N?`[ ]*\\${N}[ ]*`:H?`[ ]*${H}[ ]*`:I?"[ ]+":y?S||F:S?u.has(S.charCodeAt(0))?S:"":E?(g=!0,`${F}\\p{M}*`):F);const M="[ ]*";return T.endsWith(M)&&(T=T.slice(0,T.length-M.length)),y&&E&&(w||=String.fromCharCode(...u),g=!0,T=`${T}(?=[${w}]|[^\\p{M}]|$)`),[g,T]}#h(T){let E=this.#r;if(E.length===0)return;const{caseSensitive:y,entireWord:g}=this.#e,M=this._pageContents[T],k=this._hasDiacritics[T];let N=!1;typeof E=="string"?[N,E]=this.#s(E,k):E=E.sort().reverse().map(S=>{const[F,R]=this.#s(S,k);return N||=F,`(${R})`}).join("|");const H=`g${N?"u":""}${y?"":"i"}`;E=E?new RegExp(E,H):null,this.#c(E,g,T,M),this.#e.highlightAll&&this.#f(T),this._resumePageIdx===T&&(this._resumePageIdx=null,this.#_());const I=this._pageMatches[T].length;this._matchesCountTotal+=I,this.#t?I>0&&this.#S():++this.#i===this._linkService.pagesCount&&this.#S()}#d(){if(this._extractTextPromises.length>0)return;let T=Promise.resolve();const E={disableNormalization:!0};for(let y=0,g=this._linkService.pagesCount;y<g;y++){const M=new l.PromiseCapability;this._extractTextPromises[y]=M.promise,T=T.then(()=>this._pdfDocument.getPage(y+1).then(k=>k.getTextContent(E)).then(k=>{const N=[];for(const H of k.items)N.push(H.str),H.hasEOL&&N.push(`
`);[this._pageContents[y],this._pageDiffs[y],this._hasDiacritics[y]]=ee(N.join("")),M.resolve()},k=>{console.error(`Unable to get text content for page ${y+1}`,k),this._pageContents[y]="",this._pageDiffs[y]=null,this._hasDiacritics[y]=!1,M.resolve()}))}}#f(T){this._scrollMatches&&this._selected.pageIdx===T&&(this._linkService.page=T+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:T})}#p(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}#g(){const T=this.#e.findPrevious,E=this._linkService.page-1,y=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=E,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this.#i=0,this._matchesCountTotal=0,this.#p();for(let k=0;k<y;k++)this._pendingFindMatches.has(k)||(this._pendingFindMatches.add(k),this._extractTextPromises[k].then(()=>{this._pendingFindMatches.delete(k),this.#h(k)}))}if(this.#r.length===0){this.#P(p.FOUND);return}if(this._resumePageIdx)return;const M=this._offset;if(this._pagesToSearch=y,M.matchIdx!==null){const k=this._pageMatches[M.pageIdx].length;if(!T&&M.matchIdx+1<k||T&&M.matchIdx>0){M.matchIdx=T?M.matchIdx-1:M.matchIdx+1,this.#v(!0);return}this.#u(T)}this.#_()}#m(T){const E=this._offset,y=T.length,g=this.#e.findPrevious;return y?(E.matchIdx=g?y-1:0,this.#v(!0),!0):(this.#u(g),E.wrapped&&(E.matchIdx=null,this._pagesToSearch<0)?(this.#v(!1),!0):!1)}#_(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let T=null;do{const E=this._offset.pageIdx;if(T=this._pageMatches[E],!T){this._resumePageIdx=E;break}}while(!this.#m(T))}#u(T){const E=this._offset,y=this._linkService.pagesCount;E.pageIdx=T?E.pageIdx-1:E.pageIdx+1,E.matchIdx=null,this._pagesToSearch--,(E.pageIdx>=y||E.pageIdx<0)&&(E.pageIdx=T?y-1:0,E.wrapped=!0)}#v(T=!1){let E=p.NOT_FOUND;const y=this._offset.wrapped;if(this._offset.wrapped=!1,T){const g=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,E=y?p.WRAPPED:p.FOUND,g!==-1&&g!==this._selected.pageIdx&&this.#f(g)}this.#P(E,this.#e.findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,this.#f(this._selected.pageIdx))}#w(T){const E=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||E&&this._pdfDocument!==E||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this.#P(p.FOUND),this._highlightMatches=!1,this.#p())})}#y(){const{pageIdx:T,matchIdx:E}=this._selected;let y=0,g=this._matchesCountTotal;if(E!==-1){for(let M=0;M<T;M++)y+=this._pageMatches[M]?.length||0;y+=E+1}return(y<1||y>g)&&(y=g=0),{current:y,total:g}}#S(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this.#y()})}#P(T,E=!1){!this.#t&&(this.#i!==this._linkService.pagesCount||T===p.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:T,previous:E,matchesCount:this.#y(),rawQuery:this.#e?.query??null})}}d.PDFFindController=J},(v,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.animationStarted=d.VERTICAL_PADDING=d.UNKNOWN_SCALE=d.TextLayerMode=d.SpreadMode=d.SidebarView=d.ScrollMode=d.SCROLLBAR_PADDING=d.RenderingStates=d.ProgressBar=d.PresentationModeState=d.OutputScale=d.MIN_SCALE=d.MAX_SCALE=d.MAX_AUTO_SCALE=d.DEFAULT_SCALE_VALUE=d.DEFAULT_SCALE_DELTA=d.DEFAULT_SCALE=d.CursorTool=d.AutoPrintRegExp=void 0,d.apiPageLayoutToViewerModes=X,d.apiPageModeToSidebarView=ie,d.approximateFraction=G,d.backtrackBeforeAllVisibleElements=y,d.binarySearchFirstItem=J,d.docStyle=void 0,d.getActiveOrFocusedElement=$,d.getPageSizeInches=E,d.getVisibleElements=g,d.isPortraitOrientation=S,d.isValidRotation=N,d.isValidScrollMode=H,d.isValidSpreadMode=I,d.normalizeWheelEventDelta=k,d.normalizeWheelEventDirection=M,d.parseQueryString=q,d.removeNullCharacters=W,d.roundToDivide=T,d.scrollIntoView=O,d.toggleCheckedBtn=oe,d.toggleExpandedBtn=ne,d.watchScroll=j;const P="auto";d.DEFAULT_SCALE_VALUE=P;const r=1;d.DEFAULT_SCALE=r;const t=1.1;d.DEFAULT_SCALE_DELTA=t;const l=.1;d.MIN_SCALE=l;const p=10;d.MAX_SCALE=p;const h=0;d.UNKNOWN_SCALE=h;const s=1.25;d.MAX_AUTO_SCALE=s;const m=40;d.SCROLLBAR_PADDING=m;const _=5;d.VERTICAL_PADDING=_;const u={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};d.RenderingStates=u;const w={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};d.PresentationModeState=w;const C={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};d.SidebarView=C;const x={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2};d.TextLayerMode=x;const c={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};d.ScrollMode=c;const b={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};d.SpreadMode=b;const D={SELECT:0,HAND:1,ZOOM:2};d.CursorTool=D;const B=/\bprint\s*\(/;d.AutoPrintRegExp=B;class L{constructor(){const K=window.devicePixelRatio||1;this.sx=K,this.sy=K}get scaled(){return this.sx!==1||this.sy!==1}}d.OutputScale=L;function O(z,K,Q=!1){let Y=z.offsetParent;if(!Y){console.error("offsetParent is not set -- cannot scroll");return}let se=z.offsetTop+z.clientTop,ae=z.offsetLeft+z.clientLeft;for(;Y.clientHeight===Y.scrollHeight&&Y.clientWidth===Y.scrollWidth||Q&&(Y.classList.contains("markedContent")||getComputedStyle(Y).overflow==="hidden");)if(se+=Y.offsetTop,ae+=Y.offsetLeft,Y=Y.offsetParent,!Y)return;K&&(K.top!==void 0&&(se+=K.top),K.left!==void 0&&(ae+=K.left,Y.scrollLeft=ae)),Y.scrollTop=se}function j(z,K){const Q=function(ae){se||(se=window.requestAnimationFrame(function(){se=null;const he=z.scrollLeft,de=Y.lastX;he!==de&&(Y.right=he>de),Y.lastX=he;const ue=z.scrollTop,pe=Y.lastY;ue!==pe&&(Y.down=ue>pe),Y.lastY=ue,K(Y)}))},Y={right:!0,down:!0,lastX:z.scrollLeft,lastY:z.scrollTop,_eventHandler:Q};let se=null;return z.addEventListener("scroll",Q,!0),Y}function q(z){const K=new Map;for(const[Q,Y]of new URLSearchParams(z))K.set(Q.toLowerCase(),Y);return K}const ee=/[\x01-\x1F]/g;function W(z,K=!1){return typeof z!="string"?(console.error("The argument must be a string."),z):(K&&(z=z.replaceAll(ee," ")),z.replaceAll("\0",""))}function J(z,K,Q=0){let Y=Q,se=z.length-1;if(se<0||!K(z[se]))return z.length;if(K(z[Y]))return Y;for(;Y<se;){const ae=Y+se>>1,ce=z[ae];K(ce)?se=ae:Y=ae+1}return Y}function G(z){if(Math.floor(z)===z)return[z,1];const K=1/z,Q=8;if(K>Q)return[1,Q];if(Math.floor(K)===K)return[1,K];const Y=z>1?K:z;let se=0,ae=1,ce=1,he=1;for(;;){const ue=se+ce,pe=ae+he;if(pe>Q)break;Y<=ue/pe?(ce=ue,he=pe):(se=ue,ae=pe)}let de;return Y-se/ae<ce/he-Y?de=Y===z?[se,ae]:[ae,se]:de=Y===z?[ce,he]:[he,ce],de}function T(z,K){const Q=z%K;return Q===0?z:Math.round(z-Q+K)}function E({view:z,userUnit:K,rotate:Q}){const[Y,se,ae,ce]=z,he=Q%180!==0,de=(ae-Y)/72*K,ue=(ce-se)/72*K;return{width:he?ue:de,height:he?de:ue}}function y(z,K,Q){if(z<2)return z;let Y=K[z].div,se=Y.offsetTop+Y.clientTop;se>=Q&&(Y=K[z-1].div,se=Y.offsetTop+Y.clientTop);for(let ae=z-2;ae>=0&&(Y=K[ae].div,!(Y.offsetTop+Y.clientTop+Y.clientHeight<=se));--ae)z=ae;return z}function g({scrollEl:z,views:K,sortByVisibility:Q=!1,horizontal:Y=!1,rtl:se=!1}){const ae=z.scrollTop,ce=ae+z.clientHeight,he=z.scrollLeft,de=he+z.clientWidth;function ue(re){const te=re.div;return te.offsetTop+te.clientTop+te.clientHeight>ae}function pe(re){const te=re.div,Z=te.offsetLeft+te.clientLeft,le=Z+te.clientWidth;return se?Z<de:le>he}const ge=[],Ee=new Set,ve=K.length;let Se=J(K,Y?pe:ue);Se>0&&Se<ve&&!Y&&(Se=y(Se,K,ae));let Me=Y?de:-1;for(let re=Se;re<ve;re++){const te=K[re],Z=te.div,le=Z.offsetLeft+Z.clientLeft,fe=Z.offsetTop+Z.clientTop,me=Z.clientWidth,_e=Z.clientHeight,Ce=le+me,Ae=fe+_e;if(Me===-1)Ae>=ce&&(Me=Ae);else if((Y?le:fe)>Me)break;if(Ae<=ae||fe>=ce||Ce<=he||le>=de)continue;const Te=Math.max(0,ae-fe)+Math.max(0,Ae-ce),ye=Math.max(0,he-le)+Math.max(0,Ce-de),xe=(_e-Te)/_e,we=(me-ye)/me,Le=xe*we*100|0;ge.push({id:te.id,x:le,y:fe,view:te,percent:Le,widthPercent:we*100|0}),Ee.add(te.id)}const Ie=ge[0],Oe=ge.at(-1);return Q&&ge.sort(function(re,te){const Z=re.percent-te.percent;return Math.abs(Z)>.001?-Z:re.id-te.id}),{first:Ie,last:Oe,views:ge,ids:Ee}}function M(z){let K=Math.hypot(z.deltaX,z.deltaY);const Q=Math.atan2(z.deltaY,z.deltaX);return-.25*Math.PI<Q&&Q<.75*Math.PI&&(K=-K),K}function k(z){const K=z.deltaMode;let Q=M(z);const Y=30,se=30;return K===WheelEvent.DOM_DELTA_PIXEL?Q/=Y*se:K===WheelEvent.DOM_DELTA_LINE&&(Q/=se),Q}function N(z){return Number.isInteger(z)&&z%90===0}function H(z){return Number.isInteger(z)&&Object.values(c).includes(z)&&z!==c.UNKNOWN}function I(z){return Number.isInteger(z)&&Object.values(b).includes(z)&&z!==b.UNKNOWN}function S(z){return z.width<=z.height}const F=new Promise(function(z){window.requestAnimationFrame(z)});d.animationStarted=F;const R=document.documentElement.style;d.docStyle=R;function U(z,K,Q){return Math.min(Math.max(z,K),Q)}class V{#e=null;#t=null;#i=0;#n=null;#o=!0;constructor(K){this.#e=K.classList,this.#n=K.style}get percent(){return this.#i}set percent(K){if(this.#i=U(K,0,100),isNaN(K)){this.#e.add("indeterminate");return}this.#e.remove("indeterminate"),this.#n.setProperty("--progressBar-percent",`${this.#i}%`)}setWidth(K){if(!K)return;const Y=K.parentNode.offsetWidth-K.offsetWidth;Y>0&&this.#n.setProperty("--progressBar-end-offset",`${Y}px`)}setDisableAutoFetch(K=5e3){isNaN(this.#i)||(this.#t&&clearTimeout(this.#t),this.show(),this.#t=setTimeout(()=>{this.#t=null,this.hide()},K))}hide(){this.#o&&(this.#o=!1,this.#e.add("hidden"))}show(){this.#o||(this.#o=!0,this.#e.remove("hidden"))}}d.ProgressBar=V;function $(){let z=document,K=z.activeElement||z.querySelector(":focus");for(;K?.shadowRoot;)z=K.shadowRoot,K=z.activeElement||z.querySelector(":focus");return K}function X(z){let K=c.VERTICAL,Q=b.NONE;switch(z){case"SinglePage":K=c.PAGE;break;case"OneColumn":break;case"TwoPageLeft":K=c.PAGE;case"TwoColumnLeft":Q=b.ODD;break;case"TwoPageRight":K=c.PAGE;case"TwoColumnRight":Q=b.EVEN;break}return{scrollMode:K,spreadMode:Q}}function ie(z){switch(z){case"UseNone":return C.NONE;case"UseThumbs":return C.THUMBS;case"UseOutlines":return C.OUTLINE;case"UseAttachments":return C.ATTACHMENTS;case"UseOC":return C.LAYERS}return C.NONE}function oe(z,K,Q=null){z.classList.toggle("toggled",K),z.setAttribute("aria-checked",K),Q?.classList.toggle("hidden",!K)}function ne(z,K,Q=null){z.classList.toggle("toggled",K),z.setAttribute("aria-expanded",K),Q?.classList.toggle("hidden",!K)}},(v,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.CharacterType=void 0,d.getCharacterType=C,d.getNormalizeWithNFKC=c;const P={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};d.CharacterType=P;function r(b){return b<11904}function t(b){return(b&65408)===0}function l(b){return b>=97&&b<=122||b>=65&&b<=90}function p(b){return b>=48&&b<=57}function h(b){return b===32||b===9||b===13||b===10}function s(b){return b>=13312&&b<=40959||b>=63744&&b<=64255}function m(b){return b>=12448&&b<=12543}function _(b){return b>=12352&&b<=12447}function u(b){return b>=65376&&b<=65439}function w(b){return(b&65408)===3584}function C(b){return r(b)?t(b)?h(b)?P.SPACE:l(b)||p(b)||b===95?P.ALPHA_LETTER:P.PUNCT:w(b)?P.THAI_LETTER:b===160?P.SPACE:P.ALPHA_LETTER:s(b)?P.HAN_LETTER:m(b)?P.KATAKANA_LETTER:_(b)?P.HIRAGANA_LETTER:u(b)?P.HALFWIDTH_KATAKANA_LETTER:P.ALPHA_LETTER}let x;function c(){return x||="Â Â¨ÂªÂ¯Â²-ÂµÂ¸-ÂºÂ¼-Â¾Ä²-Ä³Ä¿-ÅÅÅ¿Ç-ÇÇ±-Ç³Ê°-Ê¸Ë-ËË -Ë¤Í´ÍºÍ¾Î-ÎÎÏ-ÏÏ°-Ï²Ï´-ÏµÏ¹ÖÙµ-Ù¸à¥-à¥à§-à§à§à¨³à¨¶à©-à©à©à­-à­à¸³àº³à»-à»à¼à½à½à½à½à½à½©á¼á´¬-á´®á´°-á´ºá´¼-áµáµ-áµªáµ¸á¶-á¶¿áº-áºá½±á½³á½µá½·á½¹á½»á½½á¾»á¾½-á¿á¿á¿á¿-á¿á¿á¿á¿-á¿á¿£á¿«á¿­-á¿¯á¿¹á¿»á¿½-á¿¾â-ââââ¤-â¦â¯â³-â´â¶-â·â¼â¾â-ââââ°-â±â´-ââ-ââ¨â-ââ-ââ-ââ-ââ-ââ -â¢â¤â¦â¨âª-â­â¯-â±â³-â¹â»-ââ-ââ-â¿ââ¬-â­â¯-â°â©-âªâ -âªâ¨â©´-â©¶â«â±¼-â±½âµ¯âºâ»³â¼-â¿ãã¶ã¸-ãºã-ããã¿ã±-ãã-ãã-ãã -ãã-ã¾ã-ã¿ê-êê°ê²-ê´ê¸-ê¹ê­-ê­ê­©ï¤-ï¨ï¨ï¨ï¨-ï¨ï¨ ï¨¢ï¨¥-ï¨¦ï¨ª-ï©­ï©°-ï«ï¬-ï¬ï¬-ï¬ï¬ï¬-ï¬¶ï¬¸-ï¬¼ï¬¾ï­-ï­ï­-ï­ï­-ï®±ï¯-ï´½ïµ-ï¶ï¶-ï·ï·°-ï·¼ï¸-ï¸ï¸°-ï¹ï¹-ï¹ï¹-ï¹¦ï¹¨-ï¹«ï¹°-ï¹²ï¹´ï¹¶-ï»¼ï¼-ï¾¾ï¿-ï¿ï¿-ï¿ï¿-ï¿ï¿-ï¿ï¿ -ï¿¦",x}},v=>{v.exports=globalThis.pdfjsLib},(v,d,P)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.SimpleLinkService=d.PDFLinkService=d.LinkTarget=void 0;var r=P(2);const t="noopener noreferrer nofollow",l={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};d.LinkTarget=l;function p(m,{url:_,target:u,rel:w,enabled:C=!0}={}){if(!_||typeof _!="string")throw new Error('A valid "url" parameter must provided.');C?m.href=m.title=_:(m.href="",m.title=`Disabled: ${_}`,m.onclick=()=>!1);let x="";switch(u){case l.NONE:break;case l.SELF:x="_self";break;case l.BLANK:x="_blank";break;case l.PARENT:x="_parent";break;case l.TOP:x="_top";break}m.target=x,m.rel=typeof w=="string"?w:t}class h{#e=new Map;constructor({eventBus:_,externalLinkTarget:u=null,externalLinkRel:w=null,ignoreDestinationZoom:C=!1}={}){this.eventBus=_,this.externalLinkTarget=u,this.externalLinkRel=w,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=C,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(_,u=null){this.baseUrl=u,this.pdfDocument=_,this.#e.clear()}setViewer(_){this.pdfViewer=_}setHistory(_){this.pdfHistory=_}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(_){this.pdfViewer.currentPageNumber=_}get rotation(){return this.pdfViewer.pagesRotation}set rotation(_){this.pdfViewer.pagesRotation=_}get isInPresentationMode(){return this.pdfViewer.isInPresentationMode}#t(_,u=null,w){const C=w[0];let x;if(typeof C=="object"&&C!==null){if(x=this._cachedPageNumber(C),!x){this.pdfDocument.getPageIndex(C).then(c=>{this.cachePageRef(c+1,C),this.#t(_,u,w)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${C}" is not a valid page reference, for dest="${_}".`)});return}}else if(Number.isInteger(C))x=C+1;else{console.error(`PDFLinkService.#goToDestinationHelper: "${C}" is not a valid destination reference, for dest="${_}".`);return}if(!x||x<1||x>this.pagesCount){console.error(`PDFLinkService.#goToDestinationHelper: "${x}" is not a valid page number, for dest="${_}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:u,explicitDest:w,pageNumber:x})),this.pdfViewer.scrollPageIntoView({pageNumber:x,destArray:w,ignoreDestinationZoom:this._ignoreDestinationZoom})}async goToDestination(_){if(!this.pdfDocument)return;let u,w;if(typeof _=="string"?(u=_,w=await this.pdfDocument.getDestination(_)):(u=null,w=await _),!Array.isArray(w)){console.error(`PDFLinkService.goToDestination: "${w}" is not a valid destination array, for dest="${_}".`);return}this.#t(_,u,w)}goToPage(_){if(!this.pdfDocument)return;const u=typeof _=="string"&&this.pdfViewer.pageLabelToPageNumber(_)||_|0;if(!(Number.isInteger(u)&&u>0&&u<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${_}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(u)),this.pdfViewer.scrollPageIntoView({pageNumber:u})}addLinkAttributes(_,u,w=!1){p(_,{url:u,target:w?l.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(_){if(typeof _=="string"){if(_.length>0)return this.getAnchorUrl("#"+escape(_))}else if(Array.isArray(_)){const u=JSON.stringify(_);if(u.length>0)return this.getAnchorUrl("#"+escape(u))}return this.getAnchorUrl("")}getAnchorUrl(_){return this.baseUrl?this.baseUrl+_:_}setHash(_){if(!this.pdfDocument)return;let u,w;if(_.includes("=")){const C=(0,r.parseQueryString)(_);if(C.has("search")){const x=C.get("search").replaceAll('"',""),c=C.get("phrase")==="true";this.eventBus.dispatch("findfromurlhash",{source:this,query:c?x:x.match(/\S+/g)})}if(C.has("page")&&(u=C.get("page")|0||1),C.has("zoom")){const x=C.get("zoom").split(","),c=x[0],b=parseFloat(c);c.includes("Fit")?c==="Fit"||c==="FitB"?w=[null,{name:c}]:c==="FitH"||c==="FitBH"||c==="FitV"||c==="FitBV"?w=[null,{name:c},x.length>1?x[1]|0:null]:c==="FitR"?x.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):w=[null,{name:c},x[1]|0,x[2]|0,x[3]|0,x[4]|0]:console.error(`PDFLinkService.setHash: "${c}" is not a valid zoom value.`):w=[null,{name:"XYZ"},x.length>1?x[1]|0:null,x.length>2?x[2]|0:null,b?b/100:c]}w?this.pdfViewer.scrollPageIntoView({pageNumber:u||this.page,destArray:w,allowNegativeOffset:!0}):u&&(this.page=u),C.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:C.get("pagemode")}),C.has("nameddest")&&this.goToDestination(C.get("nameddest"))}else{w=unescape(_);try{w=JSON.parse(w),Array.isArray(w)||(w=w.toString())}catch{}if(typeof w=="string"||h.#i(w)){this.goToDestination(w);return}console.error(`PDFLinkService.setHash: "${unescape(_)}" is not a valid destination.`)}}executeNamedAction(_){switch(_){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break}this.eventBus.dispatch("namedaction",{source:this,action:_})}async executeSetOCGState(_){const u=this.pdfDocument,w=await this.pdfViewer.optionalContentConfigPromise;if(u!==this.pdfDocument)return;let C;for(const x of _.state){switch(x){case"ON":case"OFF":case"Toggle":C=x;continue}switch(C){case"ON":w.setVisibility(x,!0);break;case"OFF":w.setVisibility(x,!1);break;case"Toggle":const c=w.getGroup(x);c&&w.setVisibility(x,!c.visible);break}}this.pdfViewer.optionalContentConfigPromise=Promise.resolve(w)}cachePageRef(_,u){if(!u)return;const w=u.gen===0?`${u.num}R`:`${u.num}R${u.gen}`;this.#e.set(w,_)}_cachedPageNumber(_){if(!_)return null;const u=_.gen===0?`${_.num}R`:`${_.num}R${_.gen}`;return this.#e.get(u)||null}static#i(_){if(!Array.isArray(_))return!1;const u=_.length;if(u<2)return!1;const w=_[0];if(!(typeof w=="object"&&Number.isInteger(w.num)&&Number.isInteger(w.gen))&&!(Number.isInteger(w)&&w>=0))return!1;const C=_[1];if(!(typeof C=="object"&&typeof C.name=="string"))return!1;let x=!0;switch(C.name){case"XYZ":if(u!==5)return!1;break;case"Fit":case"FitB":return u===2;case"FitH":case"FitBH":case"FitV":case"FitBV":if(u!==3)return!1;break;case"FitR":if(u!==6)return!1;x=!1;break;default:return!1}for(let c=2;c<u;c++){const b=_[c];if(!(typeof b=="number"||x&&b===null))return!1}return!0}}d.PDFLinkService=h;class s{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(_){}get rotation(){return 0}set rotation(_){}get isInPresentationMode(){return!1}async goToDestination(_){}goToPage(_){}addLinkAttributes(_,u,w=!1){p(_,{url:u,enabled:this.externalLinkEnabled})}getDestinationHash(_){return"#"}getAnchorUrl(_){return"#"}setHash(_){}executeNamedAction(_){}executeSetOCGState(_){}cachePageRef(_,u){}}d.SimpleLinkService=s},(v,d,P)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.AnnotationLayerBuilder=void 0;var r=P(4),t=P(7),l=P(2);class p{#e=null;constructor({pageDiv:s,pdfPage:m,linkService:_,downloadManager:u,annotationStorage:w=null,imageResourcesPath:C="",renderForms:x=!0,l10n:c=t.NullL10n,enableScripting:b=!1,hasJSActionsPromise:D=null,fieldObjectsPromise:B=null,annotationCanvasMap:L=null,accessibilityManager:O=null}){this.pageDiv=s,this.pdfPage=m,this.linkService=_,this.downloadManager=u,this.imageResourcesPath=C,this.renderForms=x,this.l10n=c,this.annotationStorage=w,this.enableScripting=b,this._hasJSActionsPromise=D||Promise.resolve(!1),this._fieldObjectsPromise=B||Promise.resolve(null),this._annotationCanvasMap=L,this._accessibilityManager=O,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=_.eventBus}async render(s,m="display"){if(this.div){if(this._cancelled||!this.annotationLayer)return;this.annotationLayer.update({viewport:s.clone({dontFlip:!0})});return}const[_,u,w]=await Promise.all([this.pdfPage.getAnnotations({intent:m}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled)return;const C=this.div=document.createElement("div");if(C.className="annotationLayer",this.pageDiv.append(C),_.length===0){this.hide();return}this.annotationLayer=new r.AnnotationLayer({div:C,accessibilityManager:this._accessibilityManager,annotationCanvasMap:this._annotationCanvasMap,l10n:this.l10n,page:this.pdfPage,viewport:s.clone({dontFlip:!0})}),await this.annotationLayer.render({annotations:_,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:u,fieldObjects:w}),this.linkService.isInPresentationMode&&this.#t(l.PresentationModeState.FULLSCREEN),this.#e||(this.#e=x=>{this.#t(x.state)},this._eventBus?._on("presentationmodechanged",this.#e))}cancel(){this._cancelled=!0,this.#e&&(this._eventBus?._off("presentationmodechanged",this.#e),this.#e=null)}hide(){this.div&&(this.div.hidden=!0)}#t(s){if(!this.div)return;let m=!1;switch(s){case l.PresentationModeState.FULLSCREEN:m=!0;break;case l.PresentationModeState.NORMAL:break;default:return}for(const _ of this.div.childNodes)_.hasAttribute("data-internal-link")||(_.inert=m)}}d.AnnotationLayerBuilder=p},(v,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.NullL10n=void 0,d.getL10nFallback=r;const P={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} Ã {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} Ã {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typingâ¦",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};P.print_progress_percent="{{progress}}%";function r(p,h){switch(p){case"find_match_count":p=`find_match_count[${h.total===1?"one":"other"}]`;break;case"find_match_count_limit":p=`find_match_count_limit[${h.limit===1?"one":"other"}]`;break}return P[p]||""}function t(p,h){return h?p.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(s,m)=>m in h?h[m]:"{{"+m+"}}"):p}const l={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(p,h=null,s=r(p,h)){return t(s,h)},async translate(p){}};d.NullL10n=l},(v,d,P)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.DownloadManager=void 0;var r=P(4);function t(p,h){const s=document.createElement("a");if(!s.click)throw new Error('DownloadManager: "a.click()" is not supported.');s.href=p,s.target="_parent","download"in s&&(s.download=h),(document.body||document.documentElement).append(s),s.click(),s.remove()}class l{#e=new WeakMap;downloadUrl(h,s,m){if(!(0,r.createValidAbsoluteUrl)(h,"http://example.com")){console.error(`downloadUrl - not a valid URL: ${h}`);return}t(h+"#pdfjs.action=download",s)}downloadData(h,s,m){const _=URL.createObjectURL(new Blob([h],{type:m}));t(_,s)}openOrDownloadData(h,s,m){const u=(0,r.isPdfFile)(m)?"application/pdf":"";return this.downloadData(s,m,u),!1}download(h,s,m,_){const u=URL.createObjectURL(h);t(u,m)}}d.DownloadManager=l},(v,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.WaitOnType=d.EventBus=d.AutomationEventBus=void 0,d.waitOnEventOrTimeout=r;const P={EVENT:"event",TIMEOUT:"timeout"};d.WaitOnType=P;function r({target:p,name:h,delay:s=0}){return new Promise(function(m,_){if(typeof p!="object"||!(h&&typeof h=="string")||!(Number.isInteger(s)&&s>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function u(c){p instanceof t?p._off(h,w):p.removeEventListener(h,w),x&&clearTimeout(x),m(c)}const w=u.bind(null,P.EVENT);p instanceof t?p._on(h,w):p.addEventListener(h,w);const C=u.bind(null,P.TIMEOUT),x=setTimeout(C,s)})}class t{#e=Object.create(null);on(h,s,m=null){this._on(h,s,{external:!0,once:m?.once})}off(h,s,m=null){this._off(h,s,{external:!0,once:m?.once})}dispatch(h,s){const m=this.#e[h];if(!m||m.length===0)return;let _;for(const{listener:u,external:w,once:C}of m.slice(0)){if(C&&this._off(h,u),w){(_||=[]).push(u);continue}u(s)}if(_){for(const u of _)u(s);_=null}}_on(h,s,m=null){(this.#e[h]||=[]).push({listener:s,external:m?.external===!0,once:m?.once===!0})}_off(h,s,m=null){const _=this.#e[h];if(_){for(let u=0,w=_.length;u<w;u++)if(_[u].listener===s){_.splice(u,1);return}}}}d.EventBus=t;class l extends t{dispatch(h,s){throw new Error("Not implemented: AutomationEventBus.dispatch")}}d.AutomationEventBus=l},(v,d,P)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.GenericL10n=void 0,P(11);var r=P(7);const t={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function l(h){return t[h?.toLowerCase()]||h}class p{constructor(s){const{webL10n:m}=document;this._lang=s,this._ready=new Promise((_,u)=>{m.setLanguage(l(s),()=>{_(m)})})}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(s,m=null,_=(0,r.getL10nFallback)(s,m)){return(await this._ready).get(s,m,_)}async translate(s){return(await this._ready).translate(s)}}d.GenericL10n=p},()=>{document.webL10n=function(v,d){var P={},r="",t="textContent",l="",p={},h="loading",s=!0;function m(){return d.querySelectorAll('link[type="application/l10n"]')}function _(){var W=d.querySelector('script[type="application/l10n"]');return W?JSON.parse(W.innerHTML):null}function u(W){return W?W.querySelectorAll("*[data-l10n-id]"):[]}function w(W){if(!W)return{};var J=W.getAttribute("data-l10n-id"),G=W.getAttribute("data-l10n-args"),T={};if(G)try{T=JSON.parse(G)}catch{console.warn("could not parse arguments for #"+J)}return{id:J,args:T}}function C(W,J,G){J=J||function(y){},G=G||function(){};var T=new XMLHttpRequest;T.open("GET",W,s),T.overrideMimeType&&T.overrideMimeType("text/plain; charset=utf-8"),T.onreadystatechange=function(){T.readyState==4&&(T.status==200||T.status===0?J(T.responseText):G())},T.onerror=G,T.ontimeout=G;try{T.send(null)}catch{G()}}function x(W,J,G,T){var E=W.replace(/[^\/]*$/,"")||"./";function y(M){return M.lastIndexOf("\\")<0?M:M.replace(/\\\\/g,"\\").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function g(M,k){var N={},H=/^\s*|\s*$/,I=/^\s*#|^\s*$/,S=/^\s*\[(.*)\]\s*$/,F=/^\s*@import\s+url\((.*)\)\s*$/i,R=/^([^=\s]*)\s*=\s*(.+)$/;function U($,X,ie){var oe=$.replace(H,"").split(/[\r\n]+/),ne="*",z=J.split("-",1)[0],K=!1,Q="";function Y(){for(;;){if(!oe.length){ie();return}var se=oe.shift();if(!I.test(se)){if(X){if(Q=S.exec(se),Q){ne=Q[1].toLowerCase(),K=ne!=="*"&&ne!==J&&ne!==z;continue}else if(K)continue;if(Q=F.exec(se),Q){V(E+Q[1],Y);return}}var ae=se.match(R);ae&&ae.length==3&&(N[ae[1]]=y(ae[2]))}}}Y()}function V($,X){C($,function(ie){U(ie,!1,X)},function(){console.warn($+" not found."),X()})}U(M,!0,function(){k(N)})}C(W,function(M){r+=M,g(M,function(k){for(var N in k){var H,I,S=N.lastIndexOf(".");S>0?(H=N.substring(0,S),I=N.substring(S+1)):(H=N,I=t),P[H]||(P[H]={}),P[H][I]=k[N]}G&&G()})},T)}function c(W,J){W&&(W=W.toLowerCase()),J=J||function(){},b(),l=W;var G=m(),T=G.length;if(T===0){var E=_();if(E&&E.locales&&E.default_locale){if(console.log("using the embedded JSON directory, early way out"),P=E.locales[W],!P){var y=E.default_locale.toLowerCase();for(var g in E.locales)if(g=g.toLowerCase(),g===W){P=E.locales[W];break}else g===y&&(P=E.locales[y])}J()}else console.log("no resource to load, early way out");h="complete";return}var M=null,k=0;M=function(){k++,k>=T&&(J(),h="complete")};function N(S){var F=S.href;this.load=function(R,U){x(F,R,U,function(){console.warn(F+" not found."),console.warn('"'+R+'" resource not found'),l="",U()})}}for(var H=0;H<T;H++){var I=new N(G[H]);I.load(W,M)}}function b(){P={},r="",l=""}function D(W){var J={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3};function G(g,M){return M.indexOf(g)!==-1}function T(g,M,k){return M<=g&&g<=k}var E={0:function(g){return"other"},1:function(g){return T(g%100,3,10)?"few":g===0?"zero":T(g%100,11,99)?"many":g==2?"two":g==1?"one":"other"},2:function(g){return g!==0&&g%10===0?"many":g==2?"two":g==1?"one":"other"},3:function(g){return g==1?"one":"other"},4:function(g){return T(g,0,1)?"one":"other"},5:function(g){return T(g,0,2)&&g!=2?"one":"other"},6:function(g){return g===0?"zero":g%10==1&&g%100!=11?"one":"other"},7:function(g){return g==2?"two":g==1?"one":"other"},8:function(g){return T(g,3,6)?"few":T(g,7,10)?"many":g==2?"two":g==1?"one":"other"},9:function(g){return g===0||g!=1&&T(g%100,1,19)?"few":g==1?"one":"other"},10:function(g){return T(g%10,2,9)&&!T(g%100,11,19)?"few":g%10==1&&!T(g%100,11,19)?"one":"other"},11:function(g){return T(g%10,2,4)&&!T(g%100,12,14)?"few":g%10===0||T(g%10,5,9)||T(g%100,11,14)?"many":g%10==1&&g%100!=11?"one":"other"},12:function(g){return T(g,2,4)?"few":g==1?"one":"other"},13:function(g){return T(g%10,2,4)&&!T(g%100,12,14)?"few":g!=1&&T(g%10,0,1)||T(g%10,5,9)||T(g%100,12,14)?"many":g==1?"one":"other"},14:function(g){return T(g%100,3,4)?"few":g%100==2?"two":g%100==1?"one":"other"},15:function(g){return g===0||T(g%100,2,10)?"few":T(g%100,11,19)?"many":g==1?"one":"other"},16:function(g){return g%10==1&&g!=11?"one":"other"},17:function(g){return g==3?"few":g===0?"zero":g==6?"many":g==2?"two":g==1?"one":"other"},18:function(g){return g===0?"zero":T(g,0,2)&&g!==0&&g!=2?"one":"other"},19:function(g){return T(g,2,10)?"few":T(g,0,1)?"one":"other"},20:function(g){return(T(g%10,3,4)||g%10==9)&&!(T(g%100,10,19)||T(g%100,70,79)||T(g%100,90,99))?"few":g%1e6===0&&g!==0?"many":g%10==2&&!G(g%100,[12,72,92])?"two":g%10==1&&!G(g%100,[11,71,91])?"one":"other"},21:function(g){return g===0?"zero":g==1?"one":"other"},22:function(g){return T(g,0,1)||T(g,11,99)?"one":"other"},23:function(g){return T(g%10,1,2)||g%20===0?"one":"other"},24:function(g){return T(g,3,10)||T(g,13,19)?"few":G(g,[2,12])?"two":G(g,[1,11])?"one":"other"}},y=J[W.replace(/-.*$/,"")];return y in E?E[y]:(console.warn("plural form unknown for ["+W+"]"),function(){return"other"})}p.plural=function(W,J,G,T){var E=parseFloat(J);if(isNaN(E)||T!=t)return W;p._pluralRules||(p._pluralRules=D(l));var y="["+p._pluralRules(E)+"]";return E===0&&G+"[zero]"in P?W=P[G+"[zero]"][T]:E==1&&G+"[one]"in P?W=P[G+"[one]"][T]:E==2&&G+"[two]"in P?W=P[G+"[two]"][T]:G+y in P?W=P[G+y][T]:G+"[other]"in P&&(W=P[G+"[other]"][T]),W};function B(W,J,G){var T=P[W];if(!T){if(console.warn("#"+W+" is undefined."),!G)return null;T=G}var E={};for(var y in T){var g=T[y];g=L(g,J,W,y),g=O(g,J,W),E[y]=g}return E}function L(W,J,G,T){var E=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/,y=E.exec(W);if(!y||!y.length)return W;var g=y[1],M=y[2],k;if(J&&M in J?k=J[M]:M in P&&(k=P[M]),g in p){var N=p[g];W=N(W,k,G,T)}return W}function O(W,J,G){var T=/\{\{\s*(.+?)\s*\}\}/g;return W.replace(T,function(E,y){return J&&y in J?J[y]:y in P?P[y]:(console.log("argument {{"+y+"}} for #"+G+" is undefined."),E)})}function j(W){var J=w(W);if(J.id){var G=B(J.id,J.args);if(!G){console.warn("#"+J.id+" is undefined.");return}if(G[t]){if(q(W)===0)W[t]=G[t];else{for(var T=W.childNodes,E=!1,y=0,g=T.length;y<g;y++)T[y].nodeType===3&&/\S/.test(T[y].nodeValue)&&(E?T[y].nodeValue="":(T[y].nodeValue=G[t],E=!0));if(!E){var M=d.createTextNode(G[t]);W.prepend(M)}}delete G[t]}for(var k in G)W[k]=G[k]}}function q(W){if(W.children)return W.children.length;if(typeof W.childElementCount<"u")return W.childElementCount;for(var J=0,G=0;G<W.childNodes.length;G++)J+=W.nodeType===1?1:0;return J}function ee(W){W=W||d.documentElement;for(var J=u(W),G=J.length,T=0;T<G;T++)j(J[T]);j(W)}return{get:function(W,J,G){var T=W.lastIndexOf("."),E=t;T>0&&(E=W.substring(T+1),W=W.substring(0,T));var y;G&&(y={},y[E]=G);var g=B(W,J,y);return g&&E in g?g[E]:"{{"+W+"}}"},getData:function(){return P},getText:function(){return r},getLanguage:function(){return l},setLanguage:function(W,J){c(W,function(){J&&J()})},getDirection:function(){var W=["ar","he","fa","ps","ur"],J=l.split("-",1)[0];return W.indexOf(J)>=0?"rtl":"ltr"},translate:ee,getReadyState:function(){return h},ready:function(W){if(W)h=="complete"||h=="interactive"?v.setTimeout(function(){W()}):d.addEventListener&&d.addEventListener("localized",function J(){d.removeEventListener("localized",J),W()});else return}}}(window,document)},(v,d,P)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFHistory=void 0,d.isDestArraysEqual=u,d.isDestHashesEqual=_;var r=P(2),t=P(9);const l=1e3,p=50,h=1e3;function s(){return document.location.hash}class m{constructor({linkService:C,eventBus:x}){this.linkService=C,this.eventBus=x,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",c=>{this._isPagesLoaded=!!c.pagesCount},{once:!0})})}initialize({fingerprint:C,resetHistory:x=!1,updateUrl:c=!1}){if(!C||typeof C!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();const b=this._fingerprint!==""&&this._fingerprint!==C;this._fingerprint=C,this._updateUrl=c===!0,this._initialized=!0,this._bindEvents();const D=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=s(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(D,!0)||x){const{hash:L,page:O,rotation:j}=this._parseCurrentHash(!0);if(!L||b||x){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:L,page:O,rotation:j},!0);return}const B=D.destination;this._updateInternalState(B,D.uid,!0),B.rotation!==void 0&&(this._initialRotation=B.rotation),B.dest?(this._initialBookmark=JSON.stringify(B.dest),this._destination.page=null):B.hash?this._initialBookmark=B.hash:B.page&&(this._initialBookmark=`page=${B.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:C=null,explicitDest:x,pageNumber:c}){if(!this._initialized)return;if(C&&typeof C!="string"){console.error(`PDFHistory.push: "${C}" is not a valid namedDest parameter.`);return}else if(Array.isArray(x)){if(!this._isValidPage(c)&&(c!==null||this._destination)){console.error(`PDFHistory.push: "${c}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${x}" is not a valid explicitDest parameter.`);return}const b=C||JSON.stringify(x);if(!b)return;let D=!1;if(this._destination&&(_(this._destination.hash,b)||u(this._destination.dest,x))){if(this._destination.page)return;D=!0}this._popStateInProgress&&!D||(this._pushOrReplaceState({dest:x,hash:b,page:c,rotation:this.linkService.rotation},D),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(C){if(this._initialized){if(!this._isValidPage(C)){console.error(`PDFHistory.pushPage: "${C}" is not a valid page number.`);return}this._destination?.page!==C&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${C}`,page:C,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const C=window.history.state;this._isValidState(C)&&C.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const C=window.history.state;this._isValidState(C)&&C.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(C,x=!1){const c=x||!this._destination,b={fingerprint:this._fingerprint,uid:c?this._uid:this._uid+1,destination:C};this._updateInternalState(C,b.uid);let D;if(this._updateUrl&&C?.hash){const B=document.location.href.split("#")[0];B.startsWith("file://")||(D=`${B}#${C.hash}`)}c?window.history.replaceState(b,"",D):window.history.pushState(b,"",D)}_tryPushCurrentPosition(C=!1){if(!this._position)return;let x=this._position;if(C&&(x=Object.assign(Object.create(null),this._position),x.temporary=!0),!this._destination){this._pushOrReplaceState(x);return}if(this._destination.temporary){this._pushOrReplaceState(x,!0);return}if(this._destination.hash===x.hash||!this._destination.page&&this._numPositionUpdates<=p)return;let c=!1;if(this._destination.page>=x.first&&this._destination.page<=x.page){if(this._destination.dest!==void 0||!this._destination.first)return;c=!0}this._pushOrReplaceState(x,c)}_isValidPage(C){return Number.isInteger(C)&&C>0&&C<=this.linkService.pagesCount}_isValidState(C,x=!1){if(!C)return!1;if(C.fingerprint!==this._fingerprint)if(x){if(typeof C.fingerprint!="string"||C.fingerprint.length!==this._fingerprint.length)return!1;const[c]=performance.getEntriesByType("navigation");if(c?.type!=="reload")return!1}else return!1;return!(!Number.isInteger(C.uid)||C.uid<0||C.destination===null||typeof C.destination!="object")}_updateInternalState(C,x,c=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),c&&C?.temporary&&delete C.temporary,this._destination=C,this._uid=x,this._maxUid=Math.max(this._maxUid,x),this._numPositionUpdates=0}_parseCurrentHash(C=!1){const x=unescape(s()).substring(1),c=(0,r.parseQueryString)(x),b=c.get("nameddest")||"";let D=c.get("page")|0;return(!this._isValidPage(D)||C&&b.length>0)&&(D=null),{hash:x,page:D,rotation:this.linkService.rotation}}_updateViewarea({location:C}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:C.pdfOpenParams.substring(1),page:this.linkService.page,first:C.pageNumber,rotation:C.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},h))}_popState({state:C}){const x=s(),c=this._currentHash!==x;if(this._currentHash=x,!C){this._uid++;const{hash:D,page:B,rotation:L}=this._parseCurrentHash();this._pushOrReplaceState({hash:D,page:B,rotation:L},!0);return}if(!this._isValidState(C))return;this._popStateInProgress=!0,c&&(this._blockHashChange++,(0,t.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:l}).then(()=>{this._blockHashChange--}));const b=C.destination;this._updateInternalState(b,C.uid,!0),(0,r.isValidRotation)(b.rotation)&&(this.linkService.rotation=b.rotation),b.dest?this.linkService.goToDestination(b.dest):b.hash?this.linkService.setHash(b.hash):b.page&&(this.linkService.page=b.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}d.PDFHistory=m;function _(w,C){return typeof w!="string"||typeof C!="string"?!1:w===C||(0,r.parseQueryString)(w).get("nameddest")===C}function u(w,C){function x(c,b){if(typeof c!=typeof b||Array.isArray(c)||Array.isArray(b))return!1;if(c!==null&&typeof c=="object"&&b!==null){if(Object.keys(c).length!==Object.keys(b).length)return!1;for(const D in c)if(!x(c[D],b[D]))return!1;return!0}return c===b||Number.isNaN(c)&&Number.isNaN(b)}if(!(Array.isArray(w)&&Array.isArray(C))||w.length!==C.length)return!1;for(let c=0,b=w.length;c<b;c++)if(!x(w[c],C[c]))return!1;return!0}},(v,d,P)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFPageView=void 0;var r=P(4),t=P(2),l=P(14),p=P(6),h=P(15),s=P(7),m=P(5),_=P(16),u=P(17),w=P(18),C=P(19),x=P(20);const c=h.compatibilityParams.maxCanvasPixels||16777216,b=()=>({annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new m.SimpleLinkService}});class D{#e=r.AnnotationMode.ENABLE_FORMS;#t=!1;#i=null;#n=null;#o=null;#r=null;#a=t.RenderingStates.INITIAL;#l=t.TextLayerMode.ENABLE;#c={directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0};#s=new WeakMap;constructor(L){const O=L.container,j=L.defaultViewport;this.id=L.id,this.renderingId="page"+this.id,this.#i=L.layerProperties||b,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=L.scale||t.DEFAULT_SCALE,this.viewport=j,this.pdfPageRotate=j.rotation,this._optionalContentConfigPromise=L.optionalContentConfigPromise||null,this.#l=L.textLayerMode??t.TextLayerMode.ENABLE,this.#e=L.annotationMode??r.AnnotationMode.ENABLE_FORMS,this.imageResourcesPath=L.imageResourcesPath||"",this.isOffscreenCanvasSupported=L.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=L.maxCanvasPixels??c,this.pageColors=L.pageColors||null,this.eventBus=L.eventBus,this.renderingQueue=L.renderingQueue,this.l10n=L.l10n||s.NullL10n,this.renderTask=null,this.resume=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._container=O,L.useOnlyCssZoom&&(console.error("useOnlyCssZoom was removed, please use `maxCanvasPixels = 0` instead."),this.maxCanvasPixels=0),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const q=document.createElement("div");if(q.className="page",q.setAttribute("data-page-number",this.id),q.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(ee=>{q.setAttribute("aria-label",ee)}),this.div=q,this.#h(),O?.append(q),this._isStandalone){O?.style.setProperty("--scale-factor",this.scale*r.PixelsPerInch.PDF_TO_CSS_UNITS);const{optionalContentConfigPromise:ee}=L;ee&&ee.then(W=>{ee===this._optionalContentConfigPromise&&(this.#c.initialOptionalContent=W.hasInitialVisibility)})}}get renderingState(){return this.#a}set renderingState(L){if(L!==this.#a)switch(this.#a=L,this.#n&&(clearTimeout(this.#n),this.#n=null),L){case t.RenderingStates.PAUSED:this.div.classList.remove("loading");break;case t.RenderingStates.RUNNING:this.div.classList.add("loadingIcon"),this.#n=setTimeout(()=>{this.div.classList.add("loading"),this.#n=null},0);break;case t.RenderingStates.INITIAL:case t.RenderingStates.FINISHED:this.div.classList.remove("loadingIcon","loading");break}}#h(){const{viewport:L}=this;if(this.pdfPage){if(this.#o===L.rotation)return;this.#o=L.rotation}(0,r.setLayerDimensions)(this.div,L,!0,!1)}setPdfPage(L){this._isStandalone&&(this.pageColors?.foreground==="CanvasText"||this.pageColors?.background==="Canvas")&&this._container?.style.setProperty("--hcm-highligh-filter",L.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight")),this.pdfPage=L,this.pdfPageRotate=L.rotate;const O=(this.rotation+this.pdfPageRotate)%360;this.viewport=L.getViewport({scale:this.scale*r.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:O}),this.#h(),this.reset()}destroy(){this.reset(),this.pdfPage?.cleanup()}get _textHighlighter(){return(0,r.shadow)(this,"_textHighlighter",new w.TextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus,findController:this.#i().findController}))}async#d(){let L=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(O){console.error(`#renderAnnotationLayer: "${O}".`),L=O}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:L})}}async#f(){let L=null;try{await this.annotationEditorLayer.render(this.viewport,"display")}catch(O){console.error(`#renderAnnotationEditorLayer: "${O}".`),L=O}finally{this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:L})}}async#p(){let L=null;try{const O=await this.xfaLayer.render(this.viewport,"display");O?.textDivs&&this._textHighlighter&&this.#_(O.textDivs)}catch(O){console.error(`#renderXfaLayer: "${O}".`),L=O}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:L})}}async#g(){const{pdfPage:L,textLayer:O,viewport:j}=this;if(!O)return;let q=null;try{if(!O.renderingDone){const ee=L.streamTextContent({includeMarkedContent:!0,disableNormalization:!0});O.setTextContentSource(ee)}await O.render(j)}catch(ee){if(ee instanceof r.AbortException)return;console.error(`#renderTextLayer: "${ee}".`),q=ee}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.id,numTextDivs:O.numTextDivs,error:q}),this.#m()}async#m(){if(!this.textLayer)return;this.structTreeLayer||=new _.StructTreeLayerBuilder;const L=await(this.structTreeLayer.renderingDone?null:this.pdfPage.getStructTree()),O=this.structTreeLayer?.render(L);O&&this.canvas?.append(O),this.structTreeLayer?.show()}async#_(L){const O=await this.pdfPage.getTextContent(),j=[];for(const q of O.items)j.push(q.str);this._textHighlighter.setTextMapping(L,j),this._textHighlighter.enable()}_resetZoomLayer(L=!1){if(!this.zoomLayer)return;const O=this.zoomLayer.firstChild;this.#s.delete(O),O.width=0,O.height=0,L&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:L=!1,keepAnnotationLayer:O=!1,keepAnnotationEditorLayer:j=!1,keepXfaLayer:q=!1,keepTextLayer:ee=!1}={}){this.cancelRendering({keepAnnotationLayer:O,keepAnnotationEditorLayer:j,keepXfaLayer:q,keepTextLayer:ee}),this.renderingState=t.RenderingStates.INITIAL;const W=this.div,J=W.childNodes,G=L&&this.zoomLayer||null,T=O&&this.annotationLayer?.div||null,E=j&&this.annotationEditorLayer?.div||null,y=q&&this.xfaLayer?.div||null,g=ee&&this.textLayer?.div||null;for(let M=J.length-1;M>=0;M--){const k=J[M];switch(k){case G:case T:case E:case y:case g:continue}k.remove()}W.removeAttribute("data-loaded"),T&&this.annotationLayer.hide(),E&&this.annotationEditorLayer.hide(),y&&this.xfaLayer.hide(),g&&this.textLayer.hide(),this.structTreeLayer?.hide(),G||(this.canvas&&(this.#s.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}update({scale:L=0,rotation:O=null,optionalContentConfigPromise:j=null,drawingDelay:q=-1}){this.scale=L||this.scale,typeof O=="number"&&(this.rotation=O),j instanceof Promise&&(this._optionalContentConfigPromise=j,j.then(W=>{j===this._optionalContentConfigPromise&&(this.#c.initialOptionalContent=W.hasInitialVisibility)})),this.#c.directDrawing=!0;const ee=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*r.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:ee}),this.#h(),this._isStandalone&&this._container?.style.setProperty("--scale-factor",this.viewport.scale),this.canvas){let W=!1;if(this.#t){if(this.maxCanvasPixels===0)W=!0;else if(this.maxCanvasPixels>0){const{width:G,height:T}=this.viewport,{sx:E,sy:y}=this.outputScale;W=(Math.floor(G)*E|0)*(Math.floor(T)*y|0)>this.maxCanvasPixels}}const J=!W&&q>=0&&q<1e3;if(J||W){if(J&&this.renderingState!==t.RenderingStates.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:q}),this.renderingState=t.RenderingStates.FINISHED,this.#c.directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!J,hideTextLayer:J}),J)return;this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this.#r});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:L=!1,keepAnnotationEditorLayer:O=!1,keepXfaLayer:j=!1,keepTextLayer:q=!1,cancelExtraDelay:ee=0}={}){this.renderTask&&(this.renderTask.cancel(ee),this.renderTask=null),this.resume=null,this.textLayer&&(!q||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationLayer&&(!L||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!O||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!j||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this._textHighlighter?.disable())}cssTransform({target:L,redrawAnnotationLayer:O=!1,redrawAnnotationEditorLayer:j=!1,redrawXfaLayer:q=!1,redrawTextLayer:ee=!1,hideTextLayer:W=!1}){if(!L.hasAttribute("zooming")){L.setAttribute("zooming",!0);const{style:G}=L;G.width=G.height=""}const J=this.#s.get(L);if(this.viewport!==J){const G=this.viewport.rotation-J.rotation,T=Math.abs(G);let E=1,y=1;if(T===90||T===270){const{width:g,height:M}=this.viewport;E=M/g,y=g/M}L.style.transform=`rotate(${G}deg) scale(${E}, ${y})`}O&&this.annotationLayer&&this.#d(),j&&this.annotationEditorLayer&&this.#f(),q&&this.xfaLayer&&this.#p(),this.textLayer&&(W?(this.textLayer.hide(),this.structTreeLayer?.hide()):ee&&this.#g())}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(L,O){return this.viewport.convertToPdfPoint(L,O)}async#u(L,O=null){if(L===this.renderTask&&(this.renderTask=null),O instanceof r.RenderingCancelledException){this.#r=null;return}if(this.#r=O,this.renderingState=t.RenderingStates.FINISHED,this._resetZoomLayer(!0),this.#c.regularAnnotations=!L.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:this.#r}),O)throw O}async draw(){this.renderingState!==t.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:L,l10n:O,pageColors:j,pdfPage:q,viewport:ee}=this;if(!q)throw this.renderingState=t.RenderingStates.FINISHED,new Error("pdfPage is not loaded");this.renderingState=t.RenderingStates.RUNNING;const W=document.createElement("div");if(W.classList.add("canvasWrapper"),L.append(W),!this.textLayer&&this.#l!==t.TextLayerMode.DISABLE&&!q.isPureXfa&&(this._accessibilityManager||=new u.TextAccessibilityManager,this.textLayer=new C.TextLayerBuilder({highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,enablePermissions:this.#l===t.TextLayerMode.ENABLE_PERMISSIONS}),L.append(this.textLayer.div)),!this.annotationLayer&&this.#e!==r.AnnotationMode.DISABLE){const{annotationStorage:V,downloadManager:$,enableScripting:X,fieldObjectsPromise:ie,hasJSActionsPromise:oe,linkService:ne}=this.#i();this._annotationCanvasMap||=new Map,this.annotationLayer=new p.AnnotationLayerBuilder({pageDiv:L,pdfPage:q,annotationStorage:V,imageResourcesPath:this.imageResourcesPath,renderForms:this.#e===r.AnnotationMode.ENABLE_FORMS,linkService:ne,downloadManager:$,l10n:O,enableScripting:X,hasJSActionsPromise:oe,fieldObjectsPromise:ie,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})}const J=V=>{if(g?.(!1),this.renderingQueue&&!this.renderingQueue.isHighestPriority(this)){this.renderingState=t.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=t.RenderingStates.RUNNING,V()};return}V()},{width:G,height:T}=ee,E=document.createElement("canvas");E.setAttribute("role","presentation"),E.hidden=!0;const y=!!(j?.background&&j?.foreground);let g=V=>{(!y||V)&&(E.hidden=!1,g=null)};W.append(E),this.canvas=E;const M=E.getContext("2d",{alpha:!1}),k=this.outputScale=new t.OutputScale;if(this.maxCanvasPixels===0){const V=1/this.scale;k.sx*=V,k.sy*=V,this.#t=!0}else if(this.maxCanvasPixels>0){const V=G*T,$=Math.sqrt(this.maxCanvasPixels/V);k.sx>$||k.sy>$?(k.sx=$,k.sy=$,this.#t=!0):this.#t=!1}const N=(0,t.approximateFraction)(k.sx),H=(0,t.approximateFraction)(k.sy);E.width=(0,t.roundToDivide)(G*k.sx,N[0]),E.height=(0,t.roundToDivide)(T*k.sy,H[0]);const{style:I}=E;I.width=(0,t.roundToDivide)(G,N[1])+"px",I.height=(0,t.roundToDivide)(T,H[1])+"px",this.#s.set(E,ee);const S=k.scaled?[k.sx,0,0,k.sy,0,0]:null,F={canvasContext:M,transform:S,viewport:ee,annotationMode:this.#e,optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:j},R=this.renderTask=this.pdfPage.render(F);R.onContinue=J;const U=R.promise.then(async()=>{if(g?.(!0),await this.#u(R),this.#g(),this.annotationLayer&&await this.#d(),!this.annotationEditorLayer){const{annotationEditorUIManager:V}=this.#i();if(!V)return;this.annotationEditorLayer=new l.AnnotationEditorLayerBuilder({uiManager:V,pageDiv:L,pdfPage:q,l10n:O,accessibilityManager:this._accessibilityManager,annotationLayer:this.annotationLayer?.annotationLayer})}this.#f()},V=>(V instanceof r.RenderingCancelledException||g?.(!0),this.#u(R,V)));if(q.isPureXfa){if(this.xfaLayer)this.xfaLayer.div&&L.append(this.xfaLayer.div);else{const{annotationStorage:V,linkService:$}=this.#i();this.xfaLayer=new x.XfaLayerBuilder({pageDiv:L,pdfPage:q,annotationStorage:V,linkService:$})}this.#p()}return L.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),U}setPageLabel(L){this.pageLabel=typeof L=="string"?L:null,this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{directDrawing:L,initialOptionalContent:O,regularAnnotations:j}=this.#c;return L&&O&&j?this.canvas:null}}d.PDFPageView=D},(v,d,P)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.AnnotationEditorLayerBuilder=void 0;var r=P(4),t=P(7);class l{#e=null;#t;constructor(h){this.pageDiv=h.pageDiv,this.pdfPage=h.pdfPage,this.accessibilityManager=h.accessibilityManager,this.l10n=h.l10n||t.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,this.#t=h.uiManager,this.#e=h.annotationLayer||null}async render(h,s="display"){if(s!=="display"||this._cancelled)return;const m=h.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:m}),this.show();return}const _=this.div=document.createElement("div");_.className="annotationEditorLayer",_.tabIndex=0,_.hidden=!0,_.dir=this.#t.direction,this.pageDiv.append(_),this.annotationEditorLayer=new r.AnnotationEditorLayer({uiManager:this.#t,div:_,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:m,annotationLayer:this.#e});const u={viewport:m,div:_,annotations:null,intent:s};this.annotationEditorLayer.render(u),this.show()}cancel(){this._cancelled=!0,this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isEmpty||(this.div.hidden=!1)}}d.AnnotationEditorLayerBuilder=l},(v,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.compatibilityParams=d.OptionKind=d.AppOptions=void 0;const P=Object.create(null);d.compatibilityParams=P;{const h=navigator.userAgent||"",s=navigator.platform||"",m=navigator.maxTouchPoints||1,_=/Android/.test(h),u=/\b(iPad|iPhone|iPod)(?=;)/.test(h)||s==="MacIntel"&&m>1;(function(){(u||_)&&(P.maxCanvasPixels=5242880)})()}const r={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};d.OptionKind=r;const t={annotationEditorMode:{value:0,kind:r.VIEWER+r.PREFERENCE},annotationMode:{value:2,kind:r.VIEWER+r.PREFERENCE},cursorToolOnLoad:{value:0,kind:r.VIEWER+r.PREFERENCE},defaultZoomDelay:{value:400,kind:r.VIEWER+r.PREFERENCE},defaultZoomValue:{value:"",kind:r.VIEWER+r.PREFERENCE},disableHistory:{value:!1,kind:r.VIEWER},disablePageLabels:{value:!1,kind:r.VIEWER+r.PREFERENCE},enablePermissions:{value:!1,kind:r.VIEWER+r.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:r.VIEWER+r.PREFERENCE},enableScripting:{value:!0,kind:r.VIEWER+r.PREFERENCE},enableStampEditor:{value:!0,kind:r.VIEWER+r.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:r.VIEWER},externalLinkTarget:{value:0,kind:r.VIEWER+r.PREFERENCE},historyUpdateUrl:{value:!1,kind:r.VIEWER+r.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:r.VIEWER+r.PREFERENCE},imageResourcesPath:{value:"./images/",kind:r.VIEWER},maxCanvasPixels:{value:16777216,kind:r.VIEWER},forcePageColors:{value:!1,kind:r.VIEWER+r.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:r.VIEWER+r.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:r.VIEWER+r.PREFERENCE},pdfBugEnabled:{value:!1,kind:r.VIEWER+r.PREFERENCE},printResolution:{value:150,kind:r.VIEWER},sidebarViewOnLoad:{value:-1,kind:r.VIEWER+r.PREFERENCE},scrollModeOnLoad:{value:-1,kind:r.VIEWER+r.PREFERENCE},spreadModeOnLoad:{value:-1,kind:r.VIEWER+r.PREFERENCE},textLayerMode:{value:1,kind:r.VIEWER+r.PREFERENCE},viewerCssTheme:{value:0,kind:r.VIEWER+r.PREFERENCE},viewOnLoad:{value:0,kind:r.VIEWER+r.PREFERENCE},cMapPacked:{value:!0,kind:r.API},cMapUrl:{value:"../web/cmaps/",kind:r.API},disableAutoFetch:{value:!1,kind:r.API+r.PREFERENCE},disableFontFace:{value:!1,kind:r.API+r.PREFERENCE},disableRange:{value:!1,kind:r.API+r.PREFERENCE},disableStream:{value:!1,kind:r.API+r.PREFERENCE},docBaseUrl:{value:"",kind:r.API},enableXfa:{value:!0,kind:r.API+r.PREFERENCE},fontExtraProperties:{value:!1,kind:r.API},isEvalSupported:{value:!0,kind:r.API},isOffscreenCanvasSupported:{value:!0,kind:r.API},maxImageSize:{value:-1,kind:r.API},pdfBug:{value:!1,kind:r.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:r.API},verbosity:{value:1,kind:r.API},workerPort:{value:null,kind:r.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:r.WORKER}};t.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:r.VIEWER},t.disablePreferences={value:!1,kind:r.VIEWER},t.locale={value:navigator.language||"en-US",kind:r.VIEWER},t.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:r.VIEWER};const l=Object.create(null);class p{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(s){const m=l[s];if(m!==void 0)return m;const _=t[s];if(_!==void 0)return P[s]??_.value}static getAll(s=null){const m=Object.create(null);for(const _ in t){const u=t[_];if(s){if(!(s&u.kind))continue;if(s===r.PREFERENCE){const C=u.value,x=typeof C;if(x==="boolean"||x==="string"||x==="number"&&Number.isInteger(C)){m[_]=C;continue}throw new Error(`Invalid type for preference: ${_}`)}}const w=l[_];m[_]=w!==void 0?w:P[_]??u.value}return m}static set(s,m){l[s]=m}static setAll(s){for(const m in s)l[m]=s[m]}static remove(s){delete l[s]}}d.AppOptions=p,p._hasUserOptions=function(){return Object.keys(l).length>0}},(v,d,P)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.StructTreeLayerBuilder=void 0;var r=P(2);const t={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},l=/^H(\d+)$/;class p{#e=void 0;get renderingDone(){return this.#e!==void 0}render(s){if(this.#e!==void 0)return this.#e;const m=this.#i(s);return m?.classList.add("structTree"),this.#e=m}hide(){this.#e&&!this.#e.hidden&&(this.#e.hidden=!0)}show(){this.#e?.hidden&&(this.#e.hidden=!1)}#t(s,m){const{alt:_,id:u,lang:w}=s;_!==void 0&&m.setAttribute("aria-label",(0,r.removeNullCharacters)(_)),u!==void 0&&m.setAttribute("aria-owns",u),w!==void 0&&m.setAttribute("lang",(0,r.removeNullCharacters)(w,!0))}#i(s){if(!s)return null;const m=document.createElement("span");if("role"in s){const{role:_}=s,u=_.match(l);u?(m.setAttribute("role","heading"),m.setAttribute("aria-level",u[1])):t[_]&&m.setAttribute("role",t[_])}if(this.#t(s,m),s.children)if(s.children.length===1&&"id"in s.children[0])this.#t(s.children[0],m);else for(const _ of s.children)m.append(this.#i(_));return m}}d.StructTreeLayerBuilder=p},(v,d,P)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.TextAccessibilityManager=void 0;var r=P(2);class t{#e=!1;#t=null;#i=new Map;#n=new Map;setTextMapping(p){this.#t=p}static#o(p,h){const s=p.getBoundingClientRect(),m=h.getBoundingClientRect();if(s.width===0&&s.height===0)return 1;if(m.width===0&&m.height===0)return-1;const _=s.y,u=s.y+s.height,w=s.y+s.height/2,C=m.y,x=m.y+m.height,c=m.y+m.height/2;if(w<=C&&c>=u)return-1;if(c<=_&&w>=x)return 1;const b=s.x+s.width/2,D=m.x+m.width/2;return b-D}enable(){if(this.#e)throw new Error("TextAccessibilityManager is already enabled.");if(!this.#t)throw new Error("Text divs and strings have not been set.");if(this.#e=!0,this.#t=this.#t.slice(),this.#t.sort(t.#o),this.#i.size>0){const p=this.#t;for(const[h,s]of this.#i){if(!document.getElementById(h)){this.#i.delete(h);continue}this.#r(h,p[s])}}for(const[p,h]of this.#n)this.addPointerInTextLayer(p,h);this.#n.clear()}disable(){this.#e&&(this.#n.clear(),this.#t=null,this.#e=!1)}removePointerInTextLayer(p){if(!this.#e){this.#n.delete(p);return}const h=this.#t;if(!h||h.length===0)return;const{id:s}=p,m=this.#i.get(s);if(m===void 0)return;const _=h[m];this.#i.delete(s);let u=_.getAttribute("aria-owns");u?.includes(s)&&(u=u.split(" ").filter(w=>w!==s).join(" "),u?_.setAttribute("aria-owns",u):(_.removeAttribute("aria-owns"),_.setAttribute("role","presentation")))}#r(p,h){const s=h.getAttribute("aria-owns");s?.includes(p)||h.setAttribute("aria-owns",s?`${s} ${p}`:p),h.removeAttribute("role")}addPointerInTextLayer(p,h){const{id:s}=p;if(!s)return null;if(!this.#e)return this.#n.set(p,h),null;h&&this.removePointerInTextLayer(p);const m=this.#t;if(!m||m.length===0)return null;const _=(0,r.binarySearchFirstItem)(m,x=>t.#o(p,x)<0),u=Math.max(0,_-1),w=m[u];this.#r(s,w),this.#i.set(s,u);const C=w.parentNode;return C?.classList.contains("markedContent")?C.id:null}moveElementInDOM(p,h,s,m){const _=this.addPointerInTextLayer(s,m);if(!p.hasChildNodes())return p.append(h),_;const u=Array.from(p.childNodes).filter(x=>x!==h);if(u.length===0)return _;const w=s||h,C=(0,r.binarySearchFirstItem)(u,x=>t.#o(w,x)<0);return C===0?u[0].before(h):u[C-1].after(h),_}}d.TextAccessibilityManager=t},(v,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.TextHighlighter=void 0;class P{constructor({findController:t,eventBus:l,pageIndex:p}){this.findController=t,this.matches=[],this.eventBus=l,this.pageIdx=p,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(t,l){this.textDivs=t,this.textContentItemsStr=l}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=t=>{(t.pageIndex===this.pageIdx||t.pageIndex===-1)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null),this._updateMatches(!0))}_convertMatches(t,l){if(!t)return[];const{textContentItemsStr:p}=this;let h=0,s=0;const m=p.length-1,_=[];for(let u=0,w=t.length;u<w;u++){let C=t[u];for(;h!==m&&C>=s+p[h].length;)s+=p[h].length,h++;h===p.length&&console.error("Could not find a matching mapping");const x={begin:{divIdx:h,offset:C-s}};for(C+=l[u];h!==m&&C>s+p[h].length;)s+=p[h].length,h++;x.end={divIdx:h,offset:C-s},_.push(x)}return _}_renderMatches(t){if(t.length===0)return;const{findController:l,pageIdx:p}=this,{textContentItemsStr:h,textDivs:s}=this,m=p===l.selected.pageIdx,_=l.selected.matchIdx,u=l.state.highlightAll;let w=null;const C={divIdx:-1,offset:void 0};function x(O,j){const q=O.divIdx;return s[q].textContent="",c(q,0,O.offset,j)}function c(O,j,q,ee){let W=s[O];if(W.nodeType===Node.TEXT_NODE){const T=document.createElement("span");W.before(T),T.append(W),s[O]=T,W=T}const J=h[O].substring(j,q),G=document.createTextNode(J);if(ee){const T=document.createElement("span");return T.className=`${ee} appended`,T.append(G),W.append(T),ee.includes("selected")?T.offsetLeft:0}return W.append(G),0}let b=_,D=b+1;if(u)b=0,D=t.length;else if(!m)return;let B=-1,L=-1;for(let O=b;O<D;O++){const j=t[O],q=j.begin;if(q.divIdx===B&&q.offset===L)continue;B=q.divIdx,L=q.offset;const ee=j.end,W=m&&O===_,J=W?" selected":"";let G=0;if(!w||q.divIdx!==w.divIdx?(w!==null&&c(w.divIdx,w.offset,C.offset),x(q)):c(w.divIdx,w.offset,q.offset),q.divIdx===ee.divIdx)G=c(q.divIdx,q.offset,ee.offset,"highlight"+J);else{G=c(q.divIdx,q.offset,C.offset,"highlight begin"+J);for(let T=q.divIdx+1,E=ee.divIdx;T<E;T++)s[T].className="highlight middle"+J;x(ee,"highlight end"+J)}w=ee,W&&l.scrollMatchIntoView({element:s[q.divIdx],selectedLeft:G,pageIndex:p,matchIndex:_})}w&&c(w.divIdx,w.offset,C.offset)}_updateMatches(t=!1){if(!this.enabled&&!t)return;const{findController:l,matches:p,pageIdx:h}=this,{textContentItemsStr:s,textDivs:m}=this;let _=-1;for(const C of p){const x=Math.max(_,C.begin.divIdx);for(let c=x,b=C.end.divIdx;c<=b;c++){const D=m[c];D.textContent=s[c],D.className=""}_=C.end.divIdx+1}if(!l?.highlightMatches||t)return;const u=l.pageMatches[h]||null,w=l.pageMatchesLength[h]||null;this.matches=this._convertMatches(u,w),this._renderMatches(this.matches)}}d.TextHighlighter=P},(v,d,P)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.TextLayerBuilder=void 0;var r=P(4),t=P(2);class l{#e=!1;#t=0;#i=0;#n=null;constructor({highlighter:h=null,accessibilityManager:s=null,isOffscreenCanvasSupported:m=!0,enablePermissions:_=!1}){this.textContentItemsStr=[],this.renderingDone=!1,this.textDivs=[],this.textDivProperties=new WeakMap,this.textLayerRenderTask=null,this.highlighter=h,this.accessibilityManager=s,this.isOffscreenCanvasSupported=m,this.#e=_===!0,this.div=document.createElement("div"),this.div.className="textLayer",this.hide()}#o(){this.renderingDone=!0;const h=document.createElement("div");h.className="endOfContent",this.div.append(h),this.#r()}get numTextDivs(){return this.textDivs.length}async render(h){if(!this.#n)throw new Error('No "textContentSource" parameter specified.');const s=h.scale*(globalThis.devicePixelRatio||1),{rotation:m}=h;if(this.renderingDone){const _=m!==this.#t,u=s!==this.#i;(_||u)&&(this.hide(),(0,r.updateTextLayer)({container:this.div,viewport:h,textDivs:this.textDivs,textDivProperties:this.textDivProperties,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,mustRescale:u,mustRotate:_}),this.#i=s,this.#t=m),this.show();return}this.cancel(),this.highlighter?.setTextMapping(this.textDivs,this.textContentItemsStr),this.accessibilityManager?.setTextMapping(this.textDivs),this.textLayerRenderTask=(0,r.renderTextLayer)({textContentSource:this.#n,container:this.div,viewport:h,textDivs:this.textDivs,textDivProperties:this.textDivProperties,textContentItemsStr:this.textContentItemsStr,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported}),await this.textLayerRenderTask.promise,this.#o(),this.#i=s,this.#t=m,this.show(),this.accessibilityManager?.enable()}hide(){this.div.hidden||(this.highlighter?.disable(),this.div.hidden=!0)}show(){this.div.hidden&&this.renderingDone&&(this.div.hidden=!1,this.highlighter?.enable())}cancel(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.highlighter?.disable(),this.accessibilityManager?.disable(),this.textContentItemsStr.length=0,this.textDivs.length=0,this.textDivProperties=new WeakMap}setTextContentSource(h){this.cancel(),this.#n=h}#r(){const{div:h}=this;h.addEventListener("mousedown",s=>{const m=h.querySelector(".endOfContent");if(!m)return;let _=s.target!==h;if(_&&=getComputedStyle(m).getPropertyValue("-moz-user-select")!=="none",_){const u=h.getBoundingClientRect(),w=Math.max(0,(s.pageY-u.top)/u.height);m.style.top=(w*100).toFixed(2)+"%"}m.classList.add("active")}),h.addEventListener("mouseup",()=>{const s=h.querySelector(".endOfContent");s&&(s.style.top="",s.classList.remove("active"))}),h.addEventListener("copy",s=>{if(!this.#e){const m=document.getSelection();s.clipboardData.setData("text/plain",(0,t.removeNullCharacters)((0,r.normalizeUnicode)(m.toString())))}s.preventDefault(),s.stopPropagation()})}}d.TextLayerBuilder=l},(v,d,P)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.XfaLayerBuilder=void 0;var r=P(4);class t{constructor({pageDiv:p,pdfPage:h,annotationStorage:s=null,linkService:m,xfaHtml:_=null}){this.pageDiv=p,this.pdfPage=h,this.annotationStorage=s,this.linkService=m,this.xfaHtml=_,this.div=null,this._cancelled=!1}async render(p,h="display"){if(h==="print"){const _={viewport:p.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:h},u=document.createElement("div");return this.pageDiv.append(u),_.div=u,r.XfaLayer.render(_)}const s=await this.pdfPage.getXfa();if(this._cancelled||!s)return{textDivs:[]};const m={viewport:p.clone({dontFlip:!0}),div:this.div,xfaHtml:s,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:h};return this.div?r.XfaLayer.update(m):(this.div=document.createElement("div"),this.pageDiv.append(this.div),m.div=this.div,r.XfaLayer.render(m))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}d.XfaLayerBuilder=t},(v,d,P)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFScriptingManager=void 0;var r=P(22),t=P(23);class l extends t.PDFScriptingManager{constructor(h){h.externalServices||window.addEventListener("updatefromsandbox",s=>{h.eventBus.dispatch("updatefromsandbox",{source:window,detail:s.detail})}),h.externalServices||={createScripting:({sandboxBundleSrc:s})=>new r.GenericScripting(s)},h.docProperties||=s=>(0,r.docProperties)(s),super(h)}}d.PDFScriptingManager=l},(v,d,P)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.GenericScripting=void 0,d.docProperties=t;var r=P(4);async function t(p){const h="",s=h.split("#")[0];let{info:m,metadata:_,contentDispositionFilename:u,contentLength:w}=await p.getMetadata();if(!w){const{length:C}=await p.getDownloadInfo();w=C}return{...m,baseURL:s,filesize:w,filename:u||(0,r.getPdfFilenameFromUrl)(h),metadata:_?.getRaw(),authors:_?.get("dc:creator"),numPages:p.numPages,URL:h}}class l{constructor(h){this._ready=(0,r.loadScript)(h,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}async createSandbox(h){(await this._ready).create(h)}async dispatchEventInSandbox(h){const s=await this._ready;setTimeout(()=>s.dispatchEvent(h),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}d.GenericScripting=l},(v,d,P)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFScriptingManager=void 0;var r=P(2),t=P(4);class l{#e=null;#t=null;#i=null;#n=null;#o=null;#r=null;#a=null;#l=!1;#c=null;#s=null;#h=null;constructor({eventBus:h,sandboxBundleSrc:s=null,externalServices:m=null,docProperties:_=null}){this.#n=h,this.#c=s,this.#o=m,this.#i=_}setViewer(h){this.#a=h}async setDocument(h){if(this.#r&&await this.#m(),this.#r=h,!h)return;const[s,m,_]=await Promise.all([h.getFieldObjects(),h.getCalculationOrderIds(),h.getJSActions()]);if(!s&&!_){await this.#m();return}if(h===this.#r){try{this.#s=this.#g()}catch(u){console.error(`setDocument: "${u.message}".`),await this.#m();return}this._internalEvents.set("updatefromsandbox",u=>{u?.source===window&&this.#d(u.detail)}),this._internalEvents.set("dispatcheventinsandbox",u=>{this.#s?.dispatchEventInSandbox(u.detail)}),this._internalEvents.set("pagechanging",({pageNumber:u,previous:w})=>{u!==w&&(this.#p(w),this.#f(u))}),this._internalEvents.set("pagerendered",({pageNumber:u})=>{this._pageOpenPending.has(u)&&u===this.#a.currentPageNumber&&this.#f(u)}),this._internalEvents.set("pagesdestroy",async()=>{await this.#p(this.#a.currentPageNumber),await this.#s?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),this.#e?.resolve()});for(const[u,w]of this._internalEvents)this.#n._on(u,w);try{const u=await this.#i(h);if(h!==this.#r)return;await this.#s.createSandbox({objects:s,calculationOrder:m,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...u,actions:_}}),this.#n.dispatch("sandboxcreated",{source:this})}catch(u){console.error(`setDocument: "${u.message}".`),await this.#m();return}await this.#s?.dispatchEventInSandbox({id:"doc",name:"Open"}),await this.#f(this.#a.currentPageNumber,!0),Promise.resolve().then(()=>{h===this.#r&&(this.#l=!0)})}}async dispatchWillSave(){return this.#s?.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(){return this.#s?.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(){if(this.#s){await this.#h?.promise,this.#h=new t.PromiseCapability;try{await this.#s.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(h){throw this.#h.resolve(),this.#h=null,h}await this.#h.promise}}async dispatchDidPrint(){return this.#s?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get destroyPromise(){return this.#t?.promise||null}get ready(){return this.#l}get _internalEvents(){return(0,t.shadow)(this,"_internalEvents",new Map)}get _pageOpenPending(){return(0,t.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,t.shadow)(this,"_visitedPages",new Map)}async#d(h){const s=this.#a,m=s.isInPresentationMode||s.isChangingPresentationMode,{id:_,siblings:u,command:w,value:C}=h;if(!_){switch(w){case"clear":console.clear();break;case"error":console.error(C);break;case"layout":if(!m){const c=(0,r.apiPageLayoutToViewerModes)(C);s.spreadMode=c.spreadMode}break;case"page-num":s.currentPageNumber=C+1;break;case"print":await s.pagesPromise,this.#n.dispatch("print",{source:this});break;case"println":console.log(C);break;case"zoom":m||(s.currentScaleValue=C);break;case"SaveAs":this.#n.dispatch("download",{source:this});break;case"FirstPage":s.currentPageNumber=1;break;case"LastPage":s.currentPageNumber=s.pagesCount;break;case"NextPage":s.nextPage();break;case"PrevPage":s.previousPage();break;case"ZoomViewIn":m||s.increaseScale();break;case"ZoomViewOut":m||s.decreaseScale();break;case"WillPrintFinished":this.#h?.resolve(),this.#h=null;break}return}if(m&&h.focus)return;delete h.id,delete h.siblings;const x=u?[_,...u]:[_];for(const c of x){const b=document.querySelector(`[data-element-id="${c}"]`);b?b.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:h})):this.#r?.annotationStorage.setValue(c,h)}}async#f(h,s=!1){const m=this.#r,_=this._visitedPages;if(s&&(this.#e=new t.PromiseCapability),!this.#e)return;const u=this.#a.getPageView(h-1);if(u?.renderingState!==r.RenderingStates.FINISHED){this._pageOpenPending.add(h);return}this._pageOpenPending.delete(h);const w=(async()=>{const C=await(_.has(h)?null:u.pdfPage?.getJSActions());m===this.#r&&await this.#s?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:h,actions:C})})();_.set(h,w)}async#p(h){const s=this.#r,m=this._visitedPages;if(!this.#e||this._pageOpenPending.has(h))return;const _=m.get(h);_&&(m.set(h,null),await _,s===this.#r&&await this.#s?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:h}))}#g(){if(this.#t=new t.PromiseCapability,this.#s)throw new Error("#initScripting: Scripting already exists.");return this.#o.createScripting({sandboxBundleSrc:this.#c})}async#m(){if(!this.#s){this.#r=null,this.#t?.resolve();return}this.#e&&(await Promise.race([this.#e.promise,new Promise(h=>{setTimeout(h,1e3)})]).catch(()=>{}),this.#e=null),this.#r=null;try{await this.#s.destroySandbox()}catch{}this.#h?.reject(new Error("Scripting destroyed.")),this.#h=null;for(const[h,s]of this._internalEvents)this.#n._off(h,s);this._internalEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),this.#s=null,this.#l=!1,this.#t?.resolve()}}d.PDFScriptingManager=l},(v,d,P)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFSinglePageViewer=void 0;var r=P(2),t=P(25);class l extends t.PDFViewer{_resetView(){super._resetView(),this._scrollMode=r.ScrollMode.PAGE,this._spreadMode=r.SpreadMode.NONE}set scrollMode(h){}_updateScrollMode(){}set spreadMode(h){}_updateSpreadMode(){}}d.PDFSinglePageViewer=l},(v,d,P)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PagesCountLimit=d.PDFViewer=d.PDFPageViewBuffer=void 0;var r=P(4),t=P(2),l=P(7),p=P(13),h=P(26),s=P(5);const m=10,_={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};d.PagesCountLimit=_;function u(x){return Object.values(r.AnnotationEditorType).includes(x)&&x!==r.AnnotationEditorType.DISABLE}class w{#e=new Set;#t=0;constructor(c){this.#t=c}push(c){const b=this.#e;b.has(c)&&b.delete(c),b.add(c),b.size>this.#t&&this.#i()}resize(c,b=null){this.#t=c;const D=this.#e;if(b){const B=D.size;let L=1;for(const O of D)if(b.has(O.id)&&(D.delete(O),D.add(O)),++L>B)break}for(;D.size>this.#t;)this.#i()}has(c){return this.#e.has(c)}[Symbol.iterator](){return this.#e.keys()}#i(){const c=this.#e.keys().next().value;c?.destroy(),this.#e.delete(c)}}d.PDFPageViewBuffer=w;class C{#e=null;#t=null;#i=r.AnnotationEditorType.NONE;#n=null;#o=r.AnnotationMode.ENABLE_FORMS;#r=null;#a=null;#l=!1;#c=!1;#s=null;#h=!1;#d=0;#f=new ResizeObserver(this.#C.bind(this));#p=null;#g=null;#m=null;#_=t.TextLayerMode.ENABLE;constructor(c){const b="3.11.174";if(r.version!==b)throw new Error(`The API version "${r.version}" does not match the Viewer version "${b}".`);if(this.container=c.container,this.viewer=c.viewer||c.container.firstElementChild,this.container?.tagName!=="DIV"||this.viewer?.tagName!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");this.#f.observe(this.container),this.eventBus=c.eventBus,this.linkService=c.linkService||new s.SimpleLinkService,this.downloadManager=c.downloadManager||null,this.findController=c.findController||null,this.#t=c.altTextManager||null,this.findController&&(this.findController.onIsPageVisible=D=>this._getVisiblePages().ids.has(D)),this._scriptingManager=c.scriptingManager||null,this.#_=c.textLayerMode??t.TextLayerMode.ENABLE,this.#o=c.annotationMode??r.AnnotationMode.ENABLE_FORMS,this.#i=c.annotationEditorMode??r.AnnotationEditorType.NONE,this.imageResourcesPath=c.imageResourcesPath||"",this.enablePrintAutoRotate=c.enablePrintAutoRotate||!1,this.removePageBorders=c.removePageBorders||!1,c.useOnlyCssZoom&&(console.error("useOnlyCssZoom was removed, please use `maxCanvasPixels = 0` instead."),c.maxCanvasPixels=0),this.isOffscreenCanvasSupported=c.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=c.maxCanvasPixels,this.l10n=c.l10n||l.NullL10n,this.#l=c.enablePermissions||!1,this.pageColors=c.pageColors||null,this.defaultRenderingQueue=!c.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new h.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=c.renderingQueue,this.scroll=(0,t.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=t.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.#A(),this.eventBus._on("thumbnailrendered",({pageNumber:D,pdfPage:B})=>{const L=this._pages[D-1];this.#e.has(L)||B?.cleanup()})}get pagesCount(){return this._pages.length}getPageView(c){return this._pages[c]}getCachedPageViews(){return new Set(this.#e)}get pageViewsReady(){return this._pagesCapability.settled&&this._pages.every(c=>c?.pdfPage)}get renderForms(){return this.#o===r.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(c){if(!Number.isInteger(c))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(c,!0)||console.error(`currentPageNumber: "${c}" is not a valid page.`))}_setCurrentPageNumber(c,b=!1){if(this._currentPageNumber===c)return b&&this.#T(),!0;if(!(0<c&&c<=this.pagesCount))return!1;const D=this._currentPageNumber;return this._currentPageNumber=c,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:c,pageLabel:this._pageLabels?.[c-1]??null,previous:D}),b&&this.#T(),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(c){if(!this.pdfDocument)return;let b=c|0;if(this._pageLabels){const D=this._pageLabels.indexOf(c);D>=0&&(b=D+1)}this._setCurrentPageNumber(b,!0)||console.error(`currentPageLabel: "${c}" is not a valid page.`)}get currentScale(){return this._currentScale!==t.UNKNOWN_SCALE?this._currentScale:t.DEFAULT_SCALE}set currentScale(c){if(isNaN(c))throw new Error("Invalid numeric scale.");this.pdfDocument&&this.#b(c,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(c){this.pdfDocument&&this.#b(c,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(c){if(!(0,t.isValidRotation)(c))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(c%=360,c<0&&(c+=360),this._pagesRotation===c))return;this._pagesRotation=c;const b=this._currentPageNumber;this.refresh(!0,{rotation:c}),this._currentScaleValue&&this.#b(this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:c,pageNumber:b}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}#u(){const c=this;return{get annotationEditorUIManager(){return c.#n},get annotationStorage(){return c.pdfDocument?.annotationStorage},get downloadManager(){return c.downloadManager},get enableScripting(){return!!c._scriptingManager},get fieldObjectsPromise(){return c.pdfDocument?.getFieldObjects()},get findController(){return c.findController},get hasJSActionsPromise(){return c.pdfDocument?.hasJSActions()},get linkService(){return c.linkService}}}#v(c){const b={annotationEditorMode:this.#i,annotationMode:this.#o,textLayerMode:this.#_};return c&&(!c.includes(r.PermissionFlag.COPY)&&this.#_===t.TextLayerMode.ENABLE&&(b.textLayerMode=t.TextLayerMode.ENABLE_PERMISSIONS),c.includes(r.PermissionFlag.MODIFY_CONTENTS)||(b.annotationEditorMode=r.AnnotationEditorType.DISABLE),!c.includes(r.PermissionFlag.MODIFY_ANNOTATIONS)&&!c.includes(r.PermissionFlag.FILL_INTERACTIVE_FORMS)&&this.#o===r.AnnotationMode.ENABLE_FORMS&&(b.annotationMode=r.AnnotationMode.ENABLE)),b}#w(){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return Promise.resolve();const c=new Promise(b=>{this.#g=()=>{document.visibilityState==="hidden"&&(b(),document.removeEventListener("visibilitychange",this.#g),this.#g=null)},document.addEventListener("visibilitychange",this.#g)});return Promise.race([this._onePageRenderedCapability.promise,c])}async getAllText(){const c=[],b=[];for(let D=1,B=this.pdfDocument.numPages;D<=B;++D){if(this.#h)return null;b.length=0;const L=await this.pdfDocument.getPage(D),{items:O}=await L.getTextContent();for(const j of O)j.str&&b.push(j.str),j.hasEOL&&b.push(`
`);c.push((0,t.removeNullCharacters)(b.join("")))}return c.join(`
`)}#y(c,b){const D=document.getSelection(),{focusNode:B,anchorNode:L}=D;if(L&&B&&D.containsNode(this.#s)){if(this.#c||c===t.TextLayerMode.ENABLE_PERMISSIONS){b.preventDefault(),b.stopPropagation();return}this.#c=!0;const O=this.container.style.cursor;this.container.style.cursor="wait";const j=q=>this.#h=q.key==="Escape";window.addEventListener("keydown",j),this.getAllText().then(async q=>{q!==null&&await navigator.clipboard.writeText(q)}).catch(q=>{console.warn(`Something goes wrong when extracting the text: ${q.message}`)}).finally(()=>{this.#c=!1,this.#h=!1,window.removeEventListener("keydown",j),this.container.style.cursor=O}),b.preventDefault(),b.stopPropagation()}}setDocument(c){if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController?.setDocument(null),this._scriptingManager?.setDocument(null),this.#n&&(this.#n.destroy(),this.#n=null)),this.pdfDocument=c,!c)return;const b=c.numPages,D=c.getPage(1),B=c.getOptionalContentConfig(),L=this.#l?c.getPermissions():Promise.resolve();if(b>_.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const O=this._scrollMode=t.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:O})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:b})},()=>{}),this._onBeforeDraw=O=>{const j=this._pages[O.pageNumber-1];j&&this.#e.push(j)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=O=>{O.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:O.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,this.#g&&(document.removeEventListener("visibilitychange",this.#g),this.#g=null))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([D,L]).then(([O,j])=>{if(c!==this.pdfDocument)return;this._firstPageCapability.resolve(O),this._optionalContentConfigPromise=B;const{annotationEditorMode:q,annotationMode:ee,textLayerMode:W}=this.#v(j);if(W!==t.TextLayerMode.DISABLE){const g=this.#s=document.createElement("div");g.id="hiddenCopyElement",this.viewer.before(g)}if(q!==r.AnnotationEditorType.DISABLE){const g=q;c.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):u(g)?(this.#n=new r.AnnotationEditorUIManager(this.container,this.viewer,this.#t,this.eventBus,c,this.pageColors),g!==r.AnnotationEditorType.NONE&&this.#n.updateMode(g)):console.error(`Invalid AnnotationEditor mode: ${g}`)}const J=this.#u.bind(this),G=this._scrollMode===t.ScrollMode.PAGE?null:this.viewer,T=this.currentScale,E=O.getViewport({scale:T*r.PixelsPerInch.PDF_TO_CSS_UNITS});this.viewer.style.setProperty("--scale-factor",E.scale),(this.pageColors?.foreground==="CanvasText"||this.pageColors?.background==="Canvas")&&this.viewer.style.setProperty("--hcm-highligh-filter",c.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight"));for(let g=1;g<=b;++g){const M=new p.PDFPageView({container:G,eventBus:this.eventBus,id:g,scale:T,defaultViewport:E.clone(),optionalContentConfigPromise:B,renderingQueue:this.renderingQueue,textLayerMode:W,annotationMode:ee,imageResourcesPath:this.imageResourcesPath,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n,layerProperties:J});this._pages.push(M)}const y=this._pages[0];y&&(y.setPdfPage(O),this.linkService.cachePageRef(1,O.ref)),this._scrollMode===t.ScrollMode.PAGE?this.#S():this._spreadMode!==t.SpreadMode.NONE&&this._updateSpreadMode(),this.#w().then(async()=>{if(this.findController?.setDocument(c),this._scriptingManager?.setDocument(c),this.#s&&(this.#a=this.#y.bind(this,W),document.addEventListener("copy",this.#a)),this.#n&&this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:this.#i}),c.loadingParams.disableAutoFetch||b>_.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let g=b-1;if(g<=0){this._pagesCapability.resolve();return}for(let M=2;M<=b;++M){const k=c.getPage(M).then(N=>{const H=this._pages[M-1];H.pdfPage||H.setPdfPage(N),this.linkService.cachePageRef(M,N.ref),--g===0&&this._pagesCapability.resolve()},N=>{console.error(`Unable to get page ${M} to initialize viewer`,N),--g===0&&this._pagesCapability.resolve()});M%_.PAUSE_EAGER_PAGE_INIT===0&&await k}}),this.eventBus.dispatch("pagesinit",{source:this}),c.getMetadata().then(({info:g})=>{c===this.pdfDocument&&g.Language&&(this.viewer.lang=g.Language)}),this.defaultRenderingQueue&&this.update()}).catch(O=>{console.error("Unable to initialize viewer",O),this._pagesCapability.reject(O)})}setPageLabels(c){if(this.pdfDocument){c?Array.isArray(c)&&this.pdfDocument.numPages===c.length?this._pageLabels=c:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let b=0,D=this._pages.length;b<D;b++)this._pages[b].setPageLabel(this._pageLabels?.[b]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=t.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,this.#e=new w(m),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=new r.PromiseCapability,this._onePageRenderedCapability=new r.PromiseCapability,this._pagesCapability=new r.PromiseCapability,this._scrollMode=t.ScrollMode.VERTICAL,this._previousScrollMode=t.ScrollMode.UNKNOWN,this._spreadMode=t.SpreadMode.NONE,this.#p={previousPageNumber:1,scrollDown:!0,pages:[]},this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),this.#g&&(document.removeEventListener("visibilitychange",this.#g),this.#g=null),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.#s&&(document.removeEventListener("copy",this.#a),this.#a=null,this.#s.remove(),this.#s=null)}#S(){if(this._scrollMode!==t.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const c=this._currentPageNumber,b=this.#p,D=this.viewer;if(D.textContent="",b.pages.length=0,this._spreadMode===t.SpreadMode.NONE&&!this.isInPresentationMode){const B=this._pages[c-1];D.append(B.div),b.pages.push(B)}else{const B=new Set,L=this._spreadMode-1;L===-1?B.add(c-1):c%2!==L?(B.add(c-1),B.add(c)):(B.add(c-2),B.add(c-1));const O=document.createElement("div");if(O.className="spread",this.isInPresentationMode){const j=document.createElement("div");j.className="dummyPage",O.append(j)}for(const j of B){const q=this._pages[j];q&&(O.append(q.div),b.pages.push(q))}D.append(O)}b.scrollDown=c>=b.previousPageNumber,b.previousPageNumber=c}_scrollUpdate(){this.pagesCount!==0&&this.update()}#P(c,b=null){const{div:D,id:B}=c;if(this._currentPageNumber!==B&&this._setCurrentPageNumber(B),this._scrollMode===t.ScrollMode.PAGE&&(this.#S(),this.update()),!b&&!this.isInPresentationMode){const L=D.offsetLeft+D.clientLeft,O=L+D.clientWidth,{scrollLeft:j,clientWidth:q}=this.container;(this._scrollMode===t.ScrollMode.HORIZONTAL||L<j||O>j+q)&&(b={left:0,top:0})}(0,t.scrollIntoView)(D,b),!this._currentScaleValue&&this._location&&(this._location=null)}#D(c){return c===this._currentScale||Math.abs(c-this._currentScale)<1e-15}#R(c,b,{noScroll:D=!1,preset:B=!1,drawingDelay:L=-1}){if(this._currentScaleValue=b.toString(),this.#D(c)){B&&this.eventBus.dispatch("scalechanging",{source:this,scale:c,presetValue:b});return}this.viewer.style.setProperty("--scale-factor",c*r.PixelsPerInch.PDF_TO_CSS_UNITS);const O=L>=0&&L<1e3;if(this.refresh(!0,{scale:c,drawingDelay:O?L:-1}),O&&(this.#m=setTimeout(()=>{this.#m=null,this.refresh()},L)),this._currentScale=c,!D){let j=this._currentPageNumber,q;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(j=this._location.pageNumber,q=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:j,destArray:q,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:c,presetValue:B?b:void 0}),this.defaultRenderingQueue&&this.update()}get#k(){return this._spreadMode!==t.SpreadMode.NONE&&this._scrollMode!==t.ScrollMode.HORIZONTAL?2:1}#b(c,b){let D=parseFloat(c);if(D>0)b.preset=!1,this.#R(D,c,b);else{const B=this._pages[this._currentPageNumber-1];if(!B)return;let L=t.SCROLLBAR_PADDING,O=t.VERTICAL_PADDING;this.isInPresentationMode?(L=O=4,this._spreadMode!==t.SpreadMode.NONE&&(L*=2)):this.removePageBorders?L=O=0:this._scrollMode===t.ScrollMode.HORIZONTAL&&([L,O]=[O,L]);const j=(this.container.clientWidth-L)/B.width*B.scale/this.#k,q=(this.container.clientHeight-O)/B.height*B.scale;switch(c){case"page-actual":D=1;break;case"page-width":D=j;break;case"page-height":D=q;break;case"page-fit":D=Math.min(j,q);break;case"auto":const ee=(0,t.isPortraitOrientation)(B)?j:Math.min(q,j);D=Math.min(t.MAX_AUTO_SCALE,ee);break;default:console.error(`#setScale: "${c}" is an unknown zoom value.`);return}b.preset=!0,this.#R(D,c,b)}}#T(){const c=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this.#b(this._currentScaleValue,{noScroll:!0}),this.#P(c)}pageLabelToPageNumber(c){if(!this._pageLabels)return null;const b=this._pageLabels.indexOf(c);return b<0?null:b+1}scrollPageIntoView({pageNumber:c,destArray:b=null,allowNegativeOffset:D=!1,ignoreDestinationZoom:B=!1}){if(!this.pdfDocument)return;const L=Number.isInteger(c)&&this._pages[c-1];if(!L){console.error(`scrollPageIntoView: "${c}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!b){this._setCurrentPageNumber(c,!0);return}let O=0,j=0,q=0,ee=0,W,J;const G=L.rotation%180!==0,T=(G?L.height:L.width)/L.scale/r.PixelsPerInch.PDF_TO_CSS_UNITS,E=(G?L.width:L.height)/L.scale/r.PixelsPerInch.PDF_TO_CSS_UNITS;let y=0;switch(b[1].name){case"XYZ":O=b[2],j=b[3],y=b[4],O=O!==null?O:0,j=j!==null?j:E;break;case"Fit":case"FitB":y="page-fit";break;case"FitH":case"FitBH":j=b[2],y="page-width",j===null&&this._location?(O=this._location.left,j=this._location.top):(typeof j!="number"||j<0)&&(j=E);break;case"FitV":case"FitBV":O=b[2],q=T,ee=E,y="page-height";break;case"FitR":O=b[2],j=b[3],q=b[4]-O,ee=b[5]-j;let N=t.SCROLLBAR_PADDING,H=t.VERTICAL_PADDING;this.removePageBorders&&(N=H=0),W=(this.container.clientWidth-N)/q/r.PixelsPerInch.PDF_TO_CSS_UNITS,J=(this.container.clientHeight-H)/ee/r.PixelsPerInch.PDF_TO_CSS_UNITS,y=Math.min(Math.abs(W),Math.abs(J));break;default:console.error(`scrollPageIntoView: "${b[1].name}" is not a valid destination type.`);return}if(B||(y&&y!==this._currentScale?this.currentScaleValue=y:this._currentScale===t.UNKNOWN_SCALE&&(this.currentScaleValue=t.DEFAULT_SCALE_VALUE)),y==="page-fit"&&!b[4]){this.#P(L);return}const g=[L.viewport.convertToViewportPoint(O,j),L.viewport.convertToViewportPoint(O+q,j+ee)];let M=Math.min(g[0][0],g[1][0]),k=Math.min(g[0][1],g[1][1]);D||(M=Math.max(M,0),k=Math.max(k,0)),this.#P(L,{left:M,top:k})}_updateLocation(c){const b=this._currentScale,D=this._currentScaleValue,B=parseFloat(D)===b?Math.round(b*1e4)/100:D,L=c.id,O=this._pages[L-1],j=this.container,q=O.getPagePoint(j.scrollLeft-c.x,j.scrollTop-c.y),ee=Math.round(q[0]),W=Math.round(q[1]);let J=`#page=${L}`;this.isInPresentationMode||(J+=`&zoom=${B},${ee},${W}`),this._location={pageNumber:L,scale:B,top:W,left:ee,rotation:this._pagesRotation,pdfOpenParams:J}}update(){const c=this._getVisiblePages(),b=c.views,D=b.length;if(D===0)return;const B=Math.max(m,2*D+1);this.#e.resize(B,c.ids),this.renderingQueue.renderHighestPriority(c);const L=this._spreadMode===t.SpreadMode.NONE&&(this._scrollMode===t.ScrollMode.PAGE||this._scrollMode===t.ScrollMode.VERTICAL),O=this._currentPageNumber;let j=!1;for(const q of b){if(q.percent<100)break;if(q.id===O&&L){j=!0;break}}this._setCurrentPageNumber(j?O:b[0].id),this._updateLocation(c.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(c){return this.container.contains(c)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===t.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===t.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const c=this._scrollMode===t.ScrollMode.PAGE?this.#p.pages:this._pages,b=this._scrollMode===t.ScrollMode.HORIZONTAL,D=b&&this._isContainerRtl;return(0,t.getVisibleElements)({scrollEl:this.container,views:c,sortByVisibility:!0,horizontal:b,rtl:D})}cleanup(){for(const c of this._pages)c.renderingState!==t.RenderingStates.FINISHED&&c.reset()}_cancelRendering(){for(const c of this._pages)c.cancelRendering()}async#x(c){if(c.pdfPage)return c.pdfPage;try{const b=await this.pdfDocument.getPage(c.id);return c.pdfPage||c.setPdfPage(b),this.linkService._cachedPageNumber?.(b.ref)||this.linkService.cachePageRef(c.id,b.ref),b}catch(b){return console.error("Unable to get page for page view",b),null}}#M(c){if(c.first?.id===1)return!0;if(c.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case t.ScrollMode.PAGE:return this.#p.scrollDown;case t.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}forceRendering(c){const b=c||this._getVisiblePages(),D=this.#M(b),B=this._spreadMode!==t.SpreadMode.NONE&&this._scrollMode!==t.ScrollMode.HORIZONTAL,L=this.renderingQueue.getHighestPriority(b,this._pages,D,B);return L?(this.#x(L).then(()=>{this.renderingQueue.renderView(L)}),!0):!1}get hasEqualPageSizes(){const c=this._pages[0];for(let b=1,D=this._pages.length;b<D;++b){const B=this._pages[b];if(B.width!==c.width||B.height!==c.height)return!1}return!0}getPagesOverview(){let c;return this._pages.map(b=>{const D=b.pdfPage.getViewport({scale:1}),B=(0,t.isPortraitOrientation)(D);if(c===void 0)c=B;else if(this.enablePrintAutoRotate&&B!==c)return{width:D.height,height:D.width,rotation:(D.rotation-90)%360};return{width:D.width,height:D.height,rotation:D.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(c){if(!(c instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${c}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=c,this.refresh(!1,{optionalContentConfigPromise:c}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:c}))}get scrollMode(){return this._scrollMode}set scrollMode(c){if(this._scrollMode!==c){if(!(0,t.isValidScrollMode)(c))throw new Error(`Invalid scroll mode: ${c}`);this.pagesCount>_.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=c,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:c}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(c=null){const b=this._scrollMode,D=this.viewer;D.classList.toggle("scrollHorizontal",b===t.ScrollMode.HORIZONTAL),D.classList.toggle("scrollWrapped",b===t.ScrollMode.WRAPPED),!(!this.pdfDocument||!c)&&(b===t.ScrollMode.PAGE?this.#S():this._previousScrollMode===t.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#b(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(c,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(c){if(this._spreadMode!==c){if(!(0,t.isValidSpreadMode)(c))throw new Error(`Invalid spread mode: ${c}`);this._spreadMode=c,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:c}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(c=null){if(!this.pdfDocument)return;const b=this.viewer,D=this._pages;if(this._scrollMode===t.ScrollMode.PAGE)this.#S();else if(b.textContent="",this._spreadMode===t.SpreadMode.NONE)for(const B of this._pages)b.append(B.div);else{const B=this._spreadMode-1;let L=null;for(let O=0,j=D.length;O<j;++O)L===null?(L=document.createElement("div"),L.className="spread",b.append(L)):O%2===B&&(L=L.cloneNode(!1),b.append(L)),L.append(D[O].div)}c&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#b(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(c,!0),this.update())}_getPageAdvance(c,b=!1){switch(this._scrollMode){case t.ScrollMode.WRAPPED:{const{views:D}=this._getVisiblePages(),B=new Map;for(const{id:L,y:O,percent:j,widthPercent:q}of D){if(j===0||q<100)continue;let ee=B.get(O);ee||B.set(O,ee||=[]),ee.push(L)}for(const L of B.values()){const O=L.indexOf(c);if(O===-1)continue;const j=L.length;if(j===1)break;if(b)for(let q=O-1,ee=0;q>=ee;q--){const W=L[q],J=L[q+1]-1;if(W<J)return c-J}else for(let q=O+1,ee=j;q<ee;q++){const W=L[q],J=L[q-1]+1;if(W>J)return J-c}if(b){const q=L[0];if(q<c)return c-q+1}else{const q=L[j-1];if(q>c)return q-c+1}break}break}case t.ScrollMode.HORIZONTAL:break;case t.ScrollMode.PAGE:case t.ScrollMode.VERTICAL:{if(this._spreadMode===t.SpreadMode.NONE)break;const D=this._spreadMode-1;if(b&&c%2!==D)break;if(!b&&c%2===D)break;const{views:B}=this._getVisiblePages(),L=b?c-1:c+1;for(const{id:O,percent:j,widthPercent:q}of B)if(O===L){if(j>0&&q===100)return 2;break}break}}return 1}nextPage(){const c=this._currentPageNumber,b=this.pagesCount;if(c>=b)return!1;const D=this._getPageAdvance(c,!1)||1;return this.currentPageNumber=Math.min(c+D,b),!0}previousPage(){const c=this._currentPageNumber;if(c<=1)return!1;const b=this._getPageAdvance(c,!0)||1;return this.currentPageNumber=Math.max(c-b,1),!0}increaseScale({drawingDelay:c,scaleFactor:b,steps:D}={}){if(!this.pdfDocument)return;let B=this._currentScale;if(b>1)B=Math.round(B*b*100)/100;else{D??=1;do B=Math.ceil((B*t.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--D>0&&B<t.MAX_SCALE)}this.#b(Math.min(t.MAX_SCALE,B),{noScroll:!1,drawingDelay:c})}decreaseScale({drawingDelay:c,scaleFactor:b,steps:D}={}){if(!this.pdfDocument)return;let B=this._currentScale;if(b>0&&b<1)B=Math.round(B*b*100)/100;else{D??=1;do B=Math.floor((B/t.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--D>0&&B>t.MIN_SCALE)}this.#b(Math.max(t.MIN_SCALE,B),{noScroll:!1,drawingDelay:c})}#A(c=this.container.clientHeight){c!==this.#d&&(this.#d=c,t.docStyle.setProperty("--viewer-container-height",`${c}px`))}#C(c){for(const b of c)if(b.target===this.container){this.#A(Math.floor(b.borderBoxSize[0].blockSize)),this.#r=null;break}}get containerTopLeft(){return this.#r||=[this.container.offsetTop,this.container.offsetLeft]}get annotationEditorMode(){return this.#n?this.#i:r.AnnotationEditorType.DISABLE}set annotationEditorMode({mode:c,editId:b=null}){if(!this.#n)throw new Error("The AnnotationEditor is not enabled.");if(this.#i!==c){if(!u(c))throw new Error(`Invalid AnnotationEditor mode: ${c}`);this.pdfDocument&&(this.#i=c,this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:c}),this.#n.updateMode(c,b))}}set annotationEditorParams({type:c,value:b}){if(!this.#n)throw new Error("The AnnotationEditor is not enabled.");this.#n.updateParams(c,b)}refresh(c=!1,b=Object.create(null)){if(this.pdfDocument){for(const D of this._pages)D.update(b);this.#m!==null&&(clearTimeout(this.#m),this.#m=null),c||this.update()}}}d.PDFViewer=C},(v,d,P)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFRenderingQueue=void 0;var r=P(4),t=P(2);const l=3e4;class p{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(s){this.pdfViewer=s}setThumbnailViewer(s){this.pdfThumbnailViewer=s}isHighestPriority(s){return this.highestPriorityPage===s.renderingId}renderHighestPriority(s){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(s)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),l)))}getHighestPriority(s,m,_,u=!1){const w=s.views,C=w.length;if(C===0)return null;for(let B=0;B<C;B++){const L=w[B].view;if(!this.isViewFinished(L))return L}const x=s.first.id,c=s.last.id;if(c-x+1>C){const B=s.ids;for(let L=1,O=c-x;L<O;L++){const j=_?x+L:c-L;if(B.has(j))continue;const q=m[j-1];if(!this.isViewFinished(q))return q}}let b=_?c:x-2,D=m[b];return D&&!this.isViewFinished(D)||u&&(b+=_?1:-1,D=m[b],D&&!this.isViewFinished(D))?D:null}isViewFinished(s){return s.renderingState===t.RenderingStates.FINISHED}renderView(s){switch(s.renderingState){case t.RenderingStates.FINISHED:return!1;case t.RenderingStates.PAUSED:this.highestPriorityPage=s.renderingId,s.resume();break;case t.RenderingStates.RUNNING:this.highestPriorityPage=s.renderingId;break;case t.RenderingStates.INITIAL:this.highestPriorityPage=s.renderingId,s.draw().finally(()=>{this.renderHighestPriority()}).catch(m=>{m instanceof r.RenderingCancelledException||console.error(`renderView: "${m}"`)});break}return!0}}d.PDFRenderingQueue=p}],i={};function o(v){var d=i[v];if(d!==void 0)return d.exports;var P=i[v]={exports:{}};return a[v](P,P.exports,o),P.exports}var f={};return(()=>{var v=f;Object.defineProperty(v,"__esModule",{value:!0}),Object.defineProperty(v,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return t.AnnotationLayerBuilder}}),Object.defineProperty(v,"DownloadManager",{enumerable:!0,get:function(){return l.DownloadManager}}),Object.defineProperty(v,"EventBus",{enumerable:!0,get:function(){return p.EventBus}}),Object.defineProperty(v,"FindState",{enumerable:!0,get:function(){return d.FindState}}),Object.defineProperty(v,"GenericL10n",{enumerable:!0,get:function(){return h.GenericL10n}}),Object.defineProperty(v,"LinkTarget",{enumerable:!0,get:function(){return P.LinkTarget}}),Object.defineProperty(v,"NullL10n",{enumerable:!0,get:function(){return s.NullL10n}}),Object.defineProperty(v,"PDFFindController",{enumerable:!0,get:function(){return d.PDFFindController}}),Object.defineProperty(v,"PDFHistory",{enumerable:!0,get:function(){return m.PDFHistory}}),Object.defineProperty(v,"PDFLinkService",{enumerable:!0,get:function(){return P.PDFLinkService}}),Object.defineProperty(v,"PDFPageView",{enumerable:!0,get:function(){return _.PDFPageView}}),Object.defineProperty(v,"PDFScriptingManager",{enumerable:!0,get:function(){return u.PDFScriptingManager}}),Object.defineProperty(v,"PDFSinglePageViewer",{enumerable:!0,get:function(){return w.PDFSinglePageViewer}}),Object.defineProperty(v,"PDFViewer",{enumerable:!0,get:function(){return C.PDFViewer}}),Object.defineProperty(v,"ProgressBar",{enumerable:!0,get:function(){return r.ProgressBar}}),Object.defineProperty(v,"RenderingStates",{enumerable:!0,get:function(){return r.RenderingStates}}),Object.defineProperty(v,"ScrollMode",{enumerable:!0,get:function(){return r.ScrollMode}}),Object.defineProperty(v,"SimpleLinkService",{enumerable:!0,get:function(){return P.SimpleLinkService}}),Object.defineProperty(v,"SpreadMode",{enumerable:!0,get:function(){return r.SpreadMode}}),Object.defineProperty(v,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return x.StructTreeLayerBuilder}}),Object.defineProperty(v,"TextLayerBuilder",{enumerable:!0,get:function(){return c.TextLayerBuilder}}),Object.defineProperty(v,"XfaLayerBuilder",{enumerable:!0,get:function(){return b.XfaLayerBuilder}}),Object.defineProperty(v,"parseQueryString",{enumerable:!0,get:function(){return r.parseQueryString}});var d=o(1),P=o(5),r=o(2),t=o(6),l=o(8),p=o(9),h=o(10),s=o(7),m=o(12),_=o(13),u=o(21),w=o(24),C=o(25),x=o(16),c=o(19),b=o(20)})(),f})())})(pdf_viewer$1);var pdf_viewerExports=pdf_viewer$1.exports;const createStoreImpl=n=>{let e;const a=new Set,i=(t,l)=>{const p=typeof t=="function"?t(e):t;if(!Object.is(p,e)){const h=e;e=l??(typeof p!="object"||p===null)?p:Object.assign({},e,p),a.forEach(s=>s(e,h))}},o=()=>e,P={setState:i,getState:o,getInitialState:()=>r,subscribe:t=>(a.add(t),()=>a.delete(t)),destroy:()=>{a.clear()}},r=e=n(i,o,P);return P},createStore=n=>n?createStoreImpl(n):createStoreImpl;function __awaiter(n,e,a,i){function o(f){return f instanceof a?f:new a(function(v){v(f)})}return new(a||(a=Promise))(function(f,v){function d(t){try{r(i.next(t))}catch(l){v(l)}}function P(t){try{r(i.throw(t))}catch(l){v(l)}}function r(t){t.done?f(t.value):o(t.value).then(d,P)}r((i=i.apply(n,e||[])).next())})}function __classPrivateFieldGet(n,e,a,i){if(a==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?i:a==="a"?i.call(n):i?i.value:e.get(n)}function __classPrivateFieldSet(n,e,a,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!o:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(n,a):o?o.value=a:e.set(n,a),a}typeof SuppressedError=="function"&&SuppressedError;const RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3},TextLayerMode={DISABLE:0,ENABLE:1},ScrollMode={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},SpreadMode={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};class OutputScale{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}}function scrollIntoView(n,e,a=!1){let i=n.offsetParent;if(!i){console.error("offsetParent is not set -- cannot scroll");return}let o=n.offsetTop+n.clientTop,f=n.offsetLeft+n.clientLeft;for(;i.clientHeight===i.scrollHeight&&i.clientWidth===i.scrollWidth||a&&(i.classList.contains("markedContent")||getComputedStyle(i).overflow==="hidden");)if(o+=i.offsetTop,f+=i.offsetLeft,i=i.offsetParent,!i)return;e&&(e.top!==void 0&&(o+=e.top),e.left!==void 0&&(f+=e.left,i.scrollLeft=f)),i.scrollTop=o,i.scrollLeft=f}function watchScroll(n,e){const a=function(f){o||(o=window.requestAnimationFrame(function(){o=null;const d=n.scrollLeft,P=i.lastX;d!==P&&(i.right=d>P),i.lastX=d;const r=n.scrollTop,t=i.lastY;r!==t&&(i.down=r>t),i.lastY=r,e(i)}))},i={right:!0,down:!0,lastX:n.scrollLeft,lastY:n.scrollTop,_eventHandler:a};let o=null;return n.addEventListener("scroll",a,!0),i}function binarySearchFirstItem(n,e,a=0){let i=a,o=n.length-1;if(o<0||!e(n[o]))return n.length;if(e(n[i]))return i;for(;i<o;){const f=i+o>>1,v=n[f];e(v)?o=f:i=f+1}return i}function getPageSizeInches({view:n,userUnit:e,rotate:a}){const[i,o,f,v]=n,d=a%180!==0,P=(f-i)/72*e,r=(v-o)/72*e;return{width:d?r:P,height:d?P:r}}function backtrackBeforeAllVisibleElements(n,e,a){if(n<2)return n;let i=e[n].div,o=i.offsetTop+i.clientTop;o>=a&&(i=e[n-1].div,o=i.offsetTop+i.clientTop);for(let f=n-2;f>=0&&(i=e[f].div,!(i.offsetTop+i.clientTop+i.clientHeight<=o));--f)n=f;return n}function getVisibleElements({scrollEl:n,views:e,sortByVisibility:a=!1,horizontal:i=!1,rtl:o=!1}){const f=n.scrollTop,v=f+n.clientHeight,d=n.scrollLeft,P=d+n.clientWidth;function r(w){const C=w.div;return C.offsetTop+C.clientTop+C.clientHeight>f}function t(w){const C=w.div,x=C.offsetLeft+C.clientLeft,c=x+C.clientWidth;return o?x<P:c>d}const l=[],p=new Set,h=e.length;let s=binarySearchFirstItem(e,i?t:r);s>0&&s<h&&!i&&(s=backtrackBeforeAllVisibleElements(s,e,f));let m=i?P:-1;for(let w=s;w<h;w++){const C=e[w],x=C.div,c=x.offsetLeft+x.clientLeft,b=x.offsetTop+x.clientTop,D=x.clientWidth,B=x.clientHeight,L=c+D,O=b+B;if(m===-1)O>=v&&(m=O);else if((i?c:b)>m)break;if(O<=f||b>=v||L<=d||c>=P)continue;const j=Math.max(0,f-b)+Math.max(0,O-v),q=Math.max(0,d-c)+Math.max(0,L-P),ee=(B-j)/B,W=(D-q)/D,J=ee*W*100|0;l.push({id:C.id,x:c,y:b,view:C,percent:J,widthPercent:W*100|0}),p.add(C.id)}const _=l[0],u=l.at(-1);return a&&l.sort(function(w,C){const x=w.percent-C.percent;return Math.abs(x)>.001?-x:w.id-C.id}),{first:_,last:u,views:l,ids:p}}function normalizeWheelEventDirection(n){let e=Math.hypot(n.deltaX,n.deltaY);const a=Math.atan2(n.deltaY,n.deltaX);return-.25*Math.PI<a&&a<.75*Math.PI&&(e=-e),e}function normalizeWheelEventDelta(n){const e=n.deltaMode;let a=normalizeWheelEventDirection(n);const i=30,o=30;return e===WheelEvent.DOM_DELTA_PIXEL?a/=i*o:e===WheelEvent.DOM_DELTA_LINE&&(a/=o),a}function isValidRotation(n){return Number.isInteger(n)&&n%90===0}function isValidScrollMode(n){return Number.isInteger(n)&&Object.values(ScrollMode).includes(n)&&n!==ScrollMode.UNKNOWN}function isValidSpreadMode(n){return Number.isInteger(n)&&Object.values(SpreadMode).includes(n)&&n!==SpreadMode.UNKNOWN}function isPortraitOrientation(n){return n.width<=n.height}new Promise(function(n){window.requestAnimationFrame(n)});document.documentElement.style;const CLEANUP_TIMEOUT=3e4;class PDFRenderingQueue{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(e){this.pdfViewer=e}setThumbnailViewer(e){this.pdfThumbnailViewer=e}isHighestPriority(e){return this.highestPriorityPage===e.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(e){var a,i;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!(!((a=this.pdfViewer)===null||a===void 0)&&a.forceRendering(e))&&(this.isThumbnailViewEnabled&&(!((i=this.pdfThumbnailViewer)===null||i===void 0)&&i.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),CLEANUP_TIMEOUT)))}getHighestPriority(e,a,i,o=!1){const f=e.views,v=f.length;if(v===0)return null;for(let l=0;l<v;l++){const p=f[l].view;if(!this.isViewFinished(p))return p}const d=e.first.id,P=e.last.id;if(P-d+1>v){const l=e.ids;for(let p=1,h=P-d;p<h;p++){const s=i?d+p:P-p;if(l.has(s))continue;const m=a[s-1];if(!this.isViewFinished(m))return m}}let r=i?P:d-2,t=a[r];return t&&!this.isViewFinished(t)||o&&(r+=i?1:-1,t=a[r],t&&!this.isViewFinished(t))?t:null}isViewFinished(e){return e.renderingState===RenderingStates.FINISHED}renderView(e){switch(e.renderingState){case RenderingStates.FINISHED:return!1;case RenderingStates.PAUSED:this.highestPriorityPage=e.renderingId,e.resume();break;case RenderingStates.RUNNING:this.highestPriorityPage=e.renderingId;break;case RenderingStates.INITIAL:this.highestPriorityPage=e.renderingId,e.draw().finally(()=>{this.renderHighestPriority()}).catch(a=>{a instanceof pdfExports.RenderingCancelledException||console.error(`renderView: "${a}"`)});break}return!0}}var _a,_TempImageFactory_tempCanvas;const DRAW_UPSCALE_FACTOR=2,MAX_NUM_SCALING_STEPS=3;class TempImageFactory{static getCanvas(e,a){const i=__classPrivateFieldSet(this,_a,__classPrivateFieldGet(this,_a,"f",_TempImageFactory_tempCanvas)||document.createElement("canvas"),"f",_TempImageFactory_tempCanvas);i.width=e,i.height=a;const o=i.getContext("2d",{alpha:!1});o.save(),o.fillStyle="rgb(255, 255, 255)",o.fillRect(0,0,e,a),o.restore();const f=i.getContext("2d");return[i,f]}static destroyCanvas(){const e=__classPrivateFieldGet(this,_a,"f",_TempImageFactory_tempCanvas);e&&(e.width=0,e.height=0),__classPrivateFieldSet(this,_a,null,"f",_TempImageFactory_tempCanvas)}}_a=TempImageFactory;_TempImageFactory_tempCanvas={value:null};class PDFThumbnailView{constructor({container:e,eventBus:a,id:i,defaultViewport:o,optionalContentConfigPromise:f,linkService:v,renderingQueue:d,l10n:P,pageColors:r,store:t,thumbnailWidth:l}){this.container=e,this.eventBus=a,this.id=i,this.renderingId="thumbnail"+i,this.pageLabel=null,this.store=t,this.loaded=!1,this.pdfPage=null,this.rotation=0,this.viewport=o,this.pdfPageRotate=o.rotation,this._optionalContentConfigPromise=f||null,this.pageColors=r||null,this.linkService=v,this.renderingQueue=d,this.renderTask=null,this.renderingState=RenderingStates.INITIAL,this.resume=null;const p=this.viewport.width,h=this.viewport.height,s=p/h;this.canvasWidth=l,this.canvasHeight=this.canvasWidth/s|0,this.scale=this.canvasWidth/p,this.l10n=P,this.canvas=null,this.src=null;const m=document.createElement("div");m.className="thumbnail pdfSlickThumbHolder",m.setAttribute("data-page-number",this.id.toString()),this.div=m,e.append(m)}setPdfPage(e){this.pdfPage=e,this.pdfPageRotate=e.rotate;const a=(this.rotation+this.pdfPageRotate)%360;this.viewport=e.getViewport({scale:1,rotation:a}),this.reset()}reset(){this.cancelRendering(),this.renderingState=RenderingStates.INITIAL;const e=this.viewport.width,a=this.viewport.height,i=e/a;this.canvasHeight=this.canvasWidth/i|0,this.scale=this.canvasWidth/e,this.div.removeAttribute("data-loaded"),this.loaded=!1,this.canvas&&(this.canvas.width=0,this.canvas.height=0,delete this.canvas)}update({rotation:e=null}){typeof e=="number"&&(this.rotation=e);const a=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:a}),this.reset()}cancelRendering(){this.renderTask&&(this.renderTask.cancel(),this.renderTask=null),this.resume=null}_getPageDrawContext(e=1){const a=document.createElement("canvas"),i=a.getContext("2d",{alpha:!1}),o=new OutputScale;a.width=e*this.canvasWidth*o.sx|0,a.height=e*this.canvasHeight*o.sy|0;const f=o.scaled?[o.sx,0,0,o.sy,0,0]:null;return{ctx:i,canvas:a,transform:f}}_convertCanvasToImage(e){if(this.renderingState!==RenderingStates.FINISHED)throw new Error("_convertCanvasToImage: Rendering has not finished.");const a=this._reduceImage(e);this.src=a.toDataURL(),this.div.setAttribute("data-loaded","true"),this.loaded=!0,this.store.getState()._setThumbnailView(this.id,this),a.width=0,a.height=0}draw(){if(this.renderingState!==RenderingStates.INITIAL)return console.error("Must be in new state before drawing"),Promise.resolve();const{pdfPage:e}=this;if(!e)return this.renderingState=RenderingStates.FINISHED,Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=RenderingStates.RUNNING;const a=(l=null)=>__awaiter(this,void 0,void 0,function*(){if(r===this.renderTask&&(this.renderTask=null),!(l instanceof pdfExports.RenderingCancelledException)&&(this.renderingState=RenderingStates.FINISHED,this._convertCanvasToImage(o),l))throw l}),{ctx:i,canvas:o,transform:f}=this._getPageDrawContext(DRAW_UPSCALE_FACTOR),v=this.viewport.clone({scale:DRAW_UPSCALE_FACTOR*this.scale}),d=l=>{if(!this.renderingQueue.isHighestPriority(this)){this.renderingState=RenderingStates.PAUSED,this.resume=()=>{this.renderingState=RenderingStates.RUNNING,l()};return}l()},P={canvasContext:i,transform:f,viewport:v,optionalContentConfigPromise:this._optionalContentConfigPromise,pageColors:this.pageColors},r=this.renderTask=e.render(P);r.onContinue=d;const t=r.promise.then(function(){return a(null)},function(l){return a(l)});return t.finally(()=>{o.width=0,o.height=0,this.eventBus.dispatch("thumbnailrendered",{source:this,pageNumber:this.id,pdfPage:this.pdfPage})}),t}setImage(e){if(this.renderingState!==RenderingStates.INITIAL)return;const{thumbnailCanvas:a,pdfPage:i,scale:o}=e;a&&(this.pdfPage||this.setPdfPage(i),!(o<this.scale)&&(this.renderingState=RenderingStates.FINISHED,this._convertCanvasToImage(a)))}_reduceImage(e){const{ctx:a,canvas:i}=this._getPageDrawContext();if(e.width<=2*i.width)return a.drawImage(e,0,0,e.width,e.height,0,0,i.width,i.height),i;let o=i.width<<MAX_NUM_SCALING_STEPS,f=i.height<<MAX_NUM_SCALING_STEPS;const[v,d]=TempImageFactory.getCanvas(o,f);for(;o>e.width||f>e.height;)o>>=1,f>>=1;for(d.drawImage(e,0,0,e.width,e.height,0,0,o,f);o>2*i.width;)d.drawImage(v,0,0,o,f,0,0,o>>1,f>>1),o>>=1,f>>=1;return a.drawImage(v,0,0,o,f,0,0,i.width,i.height),i}get _thumbPageTitle(){var e;return this.l10n.get("thumb_page_title",{page:(e=this.pageLabel)!==null&&e!==void 0?e:this.id})}get _thumbPageCanvas(){var e;return this.l10n.get("thumb_page_canvas",{page:(e=this.pageLabel)!==null&&e!==void 0?e:this.id})}setPageLabel(e){this.pageLabel=typeof e=="string"?e:null}}var _PDFThumbnailViewer_instances,_PDFThumbnailViewer_ensurePdfPageLoaded,_PDFThumbnailViewer_getScrollAhead;const THUMBNAIL_SCROLL_MARGIN=-19,THUMBNAIL_SELECTED_CLASS="selected";class PDFThumbnailViewer{constructor({container:e,eventBus:a,linkService:i,renderingQueue:o,l10n:f,pageColors:v,store:d,thumbnailWidth:P}){_PDFThumbnailViewer_instances.add(this),this.container=e,this.eventBus=a,this.linkService=i,this.renderingQueue=o,this.l10n=f,this.pageColors=v||null,this._thumbnails=[],this._currentPageNumber=0,this._pagesRotation=0,this._pageLabels=[],this.pdfDocument=null,this.store=d,this.thumbnailWidth=P,this.pageColors&&!(CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground))&&((this.pageColors.background||this.pageColors.foreground)&&console.warn("PDFThumbnailViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.scroll=watchScroll(this.container,this._scrollUpdated.bind(this)),this._resetView()}_scrollUpdated(){this.renderingQueue.renderHighestPriority()}getThumbnail(e){return this._thumbnails[e]}_getVisibleThumbs(){return getVisibleElements({scrollEl:this.container,views:this._thumbnails})}scrollThumbnailIntoView(e){if(!this.pdfDocument)return;const a=this._thumbnails[e-1];if(!a){console.error('scrollThumbnailIntoView: Invalid "pageNumber" parameter.');return}e!==this._currentPageNumber&&(this._thumbnails[this._currentPageNumber-1].div.classList.remove(THUMBNAIL_SELECTED_CLASS),a.div.classList.add(THUMBNAIL_SELECTED_CLASS));const i=this._getVisibleThumbs(),{first:o,last:f,views:v}=i;if(v.length>0){let d=!1;if(e<=o.id||e>=f?.id)d=!0;else for(const{id:P,percent:r}of v)if(P===e){d=r<100;break}d&&scrollIntoView(a.div,{top:THUMBNAIL_SCROLL_MARGIN})}this._currentPageNumber=e,this.forceRendering()}get pagesRotation(){return this._pagesRotation}set pagesRotation(e){if(!isValidRotation(e))throw new Error("Invalid thumbnails rotation angle.");if(!this.pdfDocument||this._pagesRotation===e)return;this._pagesRotation=e;const a={rotation:e};for(const i of this._thumbnails)i.update(a)}cleanup(){for(const e of this._thumbnails)e.renderingState!==RenderingStates.FINISHED&&e.reset();TempImageFactory.destroyCanvas()}_resetView(){this._thumbnails=[],this._currentPageNumber=1,this._pageLabels=[],this._pagesRotation=0,this.container.textContent=""}setDocument(e){if(this.pdfDocument&&(this._cancelRendering(),this._resetView()),this.pdfDocument=e,!e)return;const a=e.getPage(1),i=e.getOptionalContentConfig();a.then(o=>{var f;const v=e.numPages,d=o.getViewport({scale:1});for(let r=1;r<=v;++r){const t=new PDFThumbnailView({container:this.container,eventBus:this.eventBus,id:r,defaultViewport:d.clone(),optionalContentConfigPromise:i,linkService:this.linkService,renderingQueue:this.renderingQueue,l10n:this.l10n,pageColors:this.pageColors,store:this.store,thumbnailWidth:this.thumbnailWidth});this._thumbnails.push(t)}(f=this._thumbnails[0])===null||f===void 0||f.setPdfPage(o),this._thumbnails[this._currentPageNumber-1].div.classList.add(THUMBNAIL_SELECTED_CLASS),this.store.getState()._setThumbnailsViews(this._thumbnails)}).catch(o=>{console.error("Unable to initialize thumbnail viewer",o)})}_cancelRendering(){for(const e of this._thumbnails)e.cancelRendering()}setPageLabels(e){var a,i;if(this.pdfDocument){e?Array.isArray(e)&&this.pdfDocument.numPages===e.length?this._pageLabels=e:(this._pageLabels=[],console.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.")):this._pageLabels=[];for(let o=0,f=this._thumbnails.length;o<f;o++)this._thumbnails[o].setPageLabel((i=(a=this._pageLabels)===null||a===void 0?void 0:a[o])!==null&&i!==void 0?i:null)}}forceRendering(){const e=this._getVisibleThumbs(),a=__classPrivateFieldGet(this,_PDFThumbnailViewer_instances,"m",_PDFThumbnailViewer_getScrollAhead).call(this,e),i=this.renderingQueue.getHighestPriority(e,this._thumbnails,a);return i?(__classPrivateFieldGet(this,_PDFThumbnailViewer_instances,"m",_PDFThumbnailViewer_ensurePdfPageLoaded).call(this,i).then(()=>{this.renderingQueue.renderView(i)}),!0):!1}}_PDFThumbnailViewer_instances=new WeakSet,_PDFThumbnailViewer_ensurePdfPageLoaded=function n(e){var a;return __awaiter(this,void 0,void 0,function*(){if(e?.pdfPage)return e.pdfPage;try{const i=yield(a=this.pdfDocument)===null||a===void 0?void 0:a.getPage(e.id);return e?.pdfPage||e.setPdfPage(i),i}catch(i){return console.error("Unable to get page for thumb view",i),null}})},_PDFThumbnailViewer_getScrollAhead=function n(e){var a,i;return((a=e.first)===null||a===void 0?void 0:a.id)===1?!0:((i=e.last)===null||i===void 0?void 0:i.id)===this._thumbnails.length?!1:this.scroll.down};var _OverlayManager_overlays,_OverlayManager_active;class OverlayManager{constructor(){_OverlayManager_overlays.set(this,new WeakMap),_OverlayManager_active.set(this,null)}get active(){return __classPrivateFieldGet(this,_OverlayManager_active,"f")}register(e,a=!1){return __awaiter(this,void 0,void 0,function*(){if(typeof e!="object")throw new Error("Not enough parameters.");if(__classPrivateFieldGet(this,_OverlayManager_overlays,"f").has(e))throw new Error("The overlay is already registered.");__classPrivateFieldGet(this,_OverlayManager_overlays,"f").set(e,{canForceClose:a}),e.addEventListener("cancel",()=>{__classPrivateFieldSet(this,_OverlayManager_active,null,"f")})})}unregister(e){return __awaiter(this,void 0,void 0,function*(){if(__classPrivateFieldGet(this,_OverlayManager_overlays,"f").has(e)){if(__classPrivateFieldGet(this,_OverlayManager_active,"f")===e)throw new Error("The overlay cannot be removed while it is active.")}else throw new Error("The overlay does not exist.");__classPrivateFieldGet(this,_OverlayManager_overlays,"f").delete(e)})}open(e){return __awaiter(this,void 0,void 0,function*(){if(__classPrivateFieldGet(this,_OverlayManager_overlays,"f").has(e)){if(__classPrivateFieldGet(this,_OverlayManager_active,"f")){if(__classPrivateFieldGet(this,_OverlayManager_active,"f")===e)throw new Error("The overlay is already active.");if(__classPrivateFieldGet(this,_OverlayManager_overlays,"f").get(e).canForceClose)yield this.close();else throw new Error("Another overlay is currently active.")}}else throw new Error("The overlay does not exist.");__classPrivateFieldSet(this,_OverlayManager_active,e,"f"),e.showModal()})}close(e=__classPrivateFieldGet(this,_OverlayManager_active,"f")){return __awaiter(this,void 0,void 0,function*(){if(!e||!__classPrivateFieldGet(this,_OverlayManager_overlays,"f").has(e))throw new Error("The overlay does not exist.");if(__classPrivateFieldGet(this,_OverlayManager_active,"f")){if(__classPrivateFieldGet(this,_OverlayManager_active,"f")!==e)throw new Error("Another overlay is currently active.")}else throw new Error("The overlay is currently not active.");e.close(),__classPrivateFieldSet(this,_OverlayManager_active,null,"f")})}}_OverlayManager_overlays=new WeakMap,_OverlayManager_active=new WeakMap;function getXfaHtmlForPrinting(n,e){const a=e.allXfaHtml,i=new pdf_viewerExports.SimpleLinkService,o=Math.round(pdfExports.PixelsPerInch.PDF_TO_CSS_UNITS*100)/100;for(const f of a?.children){const v=document.createElement("div");v.className="xfaPrintedPage",n.append(v);const d=new pdf_viewerExports.XfaLayerBuilder({pageDiv:v,pdfPage:null,annotationStorage:e.annotationStorage,linkService:i,xfaHtml:f}),P=pdfExports.getXfaPageViewport(f,{scale:o});d.render(P,"print")}}let activeService=null,dialog=null,overlayManager=new OverlayManager;function renderPage(n,e,a,i,o,f,v){const d=activeService.scratchCanvas,P=o/pdfExports.PixelsPerInch.PDF;d.width=Math.floor(i.width*P),d.height=Math.floor(i.height*P);const r=d.getContext("2d");return r.save(),r.fillStyle="rgb(255, 255, 255)",r.fillRect(0,0,d.width,d.height),r.restore(),Promise.all([e.getPage(a),v]).then(function([t,l]){const p={canvasContext:r,transform:[P,0,0,P,0,0],viewport:t.getViewport({scale:1,rotation:i.rotation}),intent:"print",annotationMode:pdfExports.AnnotationMode.ENABLE_STORAGE,optionalContentConfigPromise:f,printAnnotationStorage:l};return t.render(p).promise})}class PDFPrintService{constructor(e,a,i,o,f=null,v=null,d){this.pdfDocument=e,this.pagesOverview=a,this.printContainer=i,this._printResolution=o||150,this._optionalContentConfigPromise=f||e.getOptionalContentConfig(),this._printAnnotationStoragePromise=v||Promise.resolve(),this.l10n=d,this.currentPage=-1,this.scratchCanvas=document.createElement("canvas")}layout(){this.throwIfInactive();const e=document.querySelector("body");e?.setAttribute("data-pdfjsprinting","true"),this.pagesOverview.every(o=>o.width===this.pagesOverview[0].width&&o.height===this.pagesOverview[0].height,this)||console.warn("Not all pages have the same size. The printed result may be incorrect!"),this.pageStyleSheet=document.createElement("style");const i=this.pagesOverview[0];this.pageStyleSheet.textContent="@page { size: "+i.width+"pt "+i.height+"pt;}",e?.append(this.pageStyleSheet)}destroy(){if(activeService!==this)return;this.printContainer.textContent="";const e=document.querySelector("body");e?.removeAttribute("data-pdfjsprinting"),this.pageStyleSheet&&(this.pageStyleSheet.remove(),this.pageStyleSheet=null),this.scratchCanvas.width=this.scratchCanvas.height=0,this.scratchCanvas=null,activeService=null,ensureOverlay().then(function(){overlayManager.active===dialog&&overlayManager.close(dialog)})}renderPages(){if(this.pdfDocument.isPureXfa)return getXfaHtmlForPrinting(this.printContainer,this.pdfDocument),Promise.resolve();const e=this.pagesOverview.length,a=(i,o)=>{if(this.throwIfInactive(),++this.currentPage>=e){renderProgress(e,e,this.l10n),i();return}const f=this.currentPage;renderProgress(f,e,this.l10n),renderPage(this,this.pdfDocument,f+1,this.pagesOverview[f],this._printResolution,this._optionalContentConfigPromise,this._printAnnotationStoragePromise).then(this.useRenderedPage.bind(this)).then(function(){a(i,o)},o)};return new Promise(a)}useRenderedPage(){this.throwIfInactive();const e=document.createElement("img"),a=this.scratchCanvas;"toBlob"in a?a.toBlob(function(o){e.src=URL.createObjectURL(o)}):e.src=a.toDataURL();const i=document.createElement("div");return i.className="printedPage",i.append(e),this.printContainer.append(i),new Promise(function(o,f){e.onload=o,e.onerror=f})}performPrint(){return this.throwIfInactive(),new Promise(e=>{setTimeout(()=>{if(!this.active){e();return}print.call(window),setTimeout(e,20)},0)})}get active(){return this===activeService}throwIfInactive(){if(!this.active)throw new Error("This print request was cancelled or completed.")}}const print=window.print;window.print=function(){if(activeService){console.warn("Ignored window.print() because of a pending print job.");return}ensureOverlay().then(function(){activeService&&overlayManager.open(dialog)});try{dispatchEvent("beforeprint")}finally{if(!activeService){console.error("Expected print service to be initialized."),ensureOverlay().then(function(){overlayManager.active===dialog&&overlayManager.close(dialog)});return}const n=activeService;activeService.renderPages().then(function(){return n.performPrint()}).catch(function(){}).then(function(){n.active&&abort()})}};function dispatchEvent(n){const e=document.createEvent("CustomEvent");e.initCustomEvent(n,!1,!1,"custom"),window.dispatchEvent(e)}function abort(){activeService&&(activeService.destroy(),dispatchEvent("afterprint"))}function renderProgress(n,e,a){dialog||(dialog=document.getElementById("printServiceDialog"));const i=Math.round(100*n/e),o=dialog.querySelector("progress"),f=dialog.querySelector(".relative-progress");o.value=i,a.get("print_progress_percent",{progress:i}).then(v=>{f.textContent=v})}window.addEventListener("keydown",function(n){n.keyCode===80&&(n.ctrlKey||n.metaKey)&&!n.altKey&&!n.shiftKey&&(window.print(),n.preventDefault(),n.stopImmediatePropagation())},!0);if("onbeforeprint"in window){const n=function(e){e.detail!=="custom"&&e.stopImmediatePropagation()};window.addEventListener("beforeprint",n),window.addEventListener("afterprint",n)}let overlayPromise;function ensureOverlay(){if(!overlayPromise){if(!overlayManager)throw new Error("The overlay manager has not yet been initialized.");dialog||(dialog=document.getElementById("printServiceDialog")),overlayPromise=overlayManager.register(dialog,!0),document.getElementById("printCancel").onclick=abort,dialog.addEventListener("close",abort)}return overlayPromise}const PDFPrintServiceFactory={instance:{supportsPrinting:!0,createPrintService(n,e,a,i,o,f,v){if(activeService)throw new Error("The print service is created and active.");return activeService=new PDFPrintService(n,e,a,i,o,f,v),activeService}}};var _PDFPresentationMode_instances,_PDFPresentationMode_state,_PDFPresentationMode_args,_PDFPresentationMode_mouseWheel,_PDFPresentationMode_notifyStateChange,_PDFPresentationMode_enter,_PDFPresentationMode_exit,_PDFPresentationMode_mouseDown,_PDFPresentationMode_contextMenu,_PDFPresentationMode_showControls,_PDFPresentationMode_hideControls,_PDFPresentationMode_resetMouseScrollState,_PDFPresentationMode_touchSwipe,_PDFPresentationMode_addWindowListeners,_PDFPresentationMode_removeWindowListeners,_PDFPresentationMode_fullscreenChange,_PDFPresentationMode_addFullscreenChangeListeners,_PDFPresentationMode_removeFullscreenChangeListeners;const DELAY_BEFORE_HIDING_CONTROLS=3e3,ACTIVE_SELECTOR="pdfPresentationMode",CONTROLS_SELECTOR="pdfPresentationModeControls",MOUSE_SCROLL_COOLDOWN_TIME=50,PAGE_SWITCH_THRESHOLD=.1,SWIPE_MIN_DISTANCE_THRESHOLD=50,SWIPE_ANGLE_THRESHOLD=Math.PI/6;class PDFPresentationMode{constructor({container:e,pdfViewer:a,eventBus:i}){_PDFPresentationMode_instances.add(this),_PDFPresentationMode_state.set(this,PresentationModeState.UNKNOWN),_PDFPresentationMode_args.set(this,null),this.container=e,this.pdfViewer=a,this.eventBus=i,this.contextMenuOpen=!1,this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0,this.touchSwipeState=null}request(){return __awaiter(this,void 0,void 0,function*(){const{container:e,pdfViewer:a}=this;if(this.active||!a.pagesCount||!e.requestFullscreen)return!1;__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_addFullscreenChangeListeners).call(this),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_notifyStateChange).call(this,PresentationModeState.CHANGING);const i=e.requestFullscreen();__classPrivateFieldSet(this,_PDFPresentationMode_args,{pageNumber:a.currentPageNumber,scaleValue:a.currentScaleValue,scrollMode:a.scrollMode,spreadMode:null,annotationEditorMode:null},"f"),a.spreadMode!==SpreadMode.NONE&&!(a.pageViewsReady&&a.hasEqualPageSizes)&&(console.warn("Ignoring Spread modes when entering PresentationMode, since the document may contain varying page sizes."),__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").spreadMode=a.spreadMode),a.annotationEditorMode!==pdfExports.AnnotationEditorType.DISABLE&&(__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").annotationEditorMode=a.annotationEditorMode);try{return yield i,a.focus(),!0}catch{__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_removeFullscreenChangeListeners).call(this),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_notifyStateChange).call(this,PresentationModeState.NORMAL)}return!1})}get active(){return __classPrivateFieldGet(this,_PDFPresentationMode_state,"f")===PresentationModeState.CHANGING||__classPrivateFieldGet(this,_PDFPresentationMode_state,"f")===PresentationModeState.FULLSCREEN}}_PDFPresentationMode_state=new WeakMap,_PDFPresentationMode_args=new WeakMap,_PDFPresentationMode_instances=new WeakSet,_PDFPresentationMode_mouseWheel=function n(e){if(!this.active)return;e.preventDefault();const a=normalizeWheelEventDelta(e),i=Date.now(),o=this.mouseScrollTimeStamp;if(!(i>o&&i-o<MOUSE_SCROLL_COOLDOWN_TIME)&&((this.mouseScrollDelta>0&&a<0||this.mouseScrollDelta<0&&a>0)&&__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_resetMouseScrollState).call(this),this.mouseScrollDelta+=a,Math.abs(this.mouseScrollDelta)>=PAGE_SWITCH_THRESHOLD)){const f=this.mouseScrollDelta;__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_resetMouseScrollState).call(this),(f>0?this.pdfViewer.previousPage():this.pdfViewer.nextPage())&&(this.mouseScrollTimeStamp=i)}},_PDFPresentationMode_notifyStateChange=function n(e){__classPrivateFieldSet(this,_PDFPresentationMode_state,e,"f"),this.eventBus.dispatch("presentationmodechanged",{source:this,state:e})},_PDFPresentationMode_enter=function n(){var e;__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_notifyStateChange).call(this,PresentationModeState.FULLSCREEN),this.container.classList.add(ACTIVE_SELECTOR),setTimeout(()=>{this.pdfViewer.scrollMode=ScrollMode.PAGE,__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").spreadMode!==null&&(this.pdfViewer.spreadMode=SpreadMode.NONE),this.pdfViewer.currentPageNumber=__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").pageNumber,this.pdfViewer.currentScaleValue="page-fit",__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").annotationEditorMode!==null&&(this.pdfViewer.annotationEditorMode=pdfExports.AnnotationEditorType.NONE)},0),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_addWindowListeners).call(this),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_showControls).call(this),this.contextMenuOpen=!1,(e=window.getSelection())===null||e===void 0||e.removeAllRanges()},_PDFPresentationMode_exit=function n(){const e=this.pdfViewer.currentPageNumber;this.container.classList.remove(ACTIVE_SELECTOR),setTimeout(()=>{var a;__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_removeFullscreenChangeListeners).call(this),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_notifyStateChange).call(this,PresentationModeState.NORMAL),this.pdfViewer.scrollMode=__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").scrollMode,((a=__classPrivateFieldGet(this,_PDFPresentationMode_args,"f"))===null||a===void 0?void 0:a.spreadMode)!==null&&(this.pdfViewer.spreadMode=__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").spreadMode),this.pdfViewer.currentScaleValue=__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").scaleValue,this.pdfViewer.currentPageNumber=e,__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").annotationEditorMode!==null&&(this.pdfViewer.annotationEditorMode=__classPrivateFieldGet(this,_PDFPresentationMode_args,"f").annotationEditorMode),__classPrivateFieldSet(this,_PDFPresentationMode_args,null,"f")},0),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_removeWindowListeners).call(this),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_hideControls).call(this),__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_resetMouseScrollState).call(this),this.contextMenuOpen=!1},_PDFPresentationMode_mouseDown=function n(e){var a;if(this.contextMenuOpen){this.contextMenuOpen=!1,e.preventDefault();return}e.button===0&&(e.target.href&&(!((a=e.target.parentNode)===null||a===void 0)&&a.hasAttribute("data-internal-link"))||(e.preventDefault(),e.shiftKey?this.pdfViewer.previousPage():this.pdfViewer.nextPage()))},_PDFPresentationMode_contextMenu=function n(){this.contextMenuOpen=!0},_PDFPresentationMode_showControls=function n(){this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add(CONTROLS_SELECTOR),this.controlsTimeout=setTimeout(()=>{this.container.classList.remove(CONTROLS_SELECTOR),delete this.controlsTimeout},DELAY_BEFORE_HIDING_CONTROLS)},_PDFPresentationMode_hideControls=function n(){this.controlsTimeout&&(clearTimeout(this.controlsTimeout),this.container.classList.remove(CONTROLS_SELECTOR),delete this.controlsTimeout)},_PDFPresentationMode_resetMouseScrollState=function n(){this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0},_PDFPresentationMode_touchSwipe=function n(e){if(this.active){if(e.touches.length>1){this.touchSwipeState=null;return}switch(e.type){case"touchstart":this.touchSwipeState={startX:e.touches[0].pageX,startY:e.touches[0].pageY,endX:e.touches[0].pageX,endY:e.touches[0].pageY};break;case"touchmove":if(this.touchSwipeState===null)return;this.touchSwipeState.endX=e.touches[0].pageX,this.touchSwipeState.endY=e.touches[0].pageY,e.preventDefault();break;case"touchend":if(this.touchSwipeState===null)return;let a=0;const i=this.touchSwipeState.endX-this.touchSwipeState.startX,o=this.touchSwipeState.endY-this.touchSwipeState.startY,f=Math.abs(Math.atan2(o,i));Math.abs(i)>SWIPE_MIN_DISTANCE_THRESHOLD&&(f<=SWIPE_ANGLE_THRESHOLD||f>=Math.PI-SWIPE_ANGLE_THRESHOLD)?a=i:Math.abs(o)>SWIPE_MIN_DISTANCE_THRESHOLD&&Math.abs(f-Math.PI/2)<=SWIPE_ANGLE_THRESHOLD&&(a=o),a>0?this.pdfViewer.previousPage():a<0&&this.pdfViewer.nextPage();break}}},_PDFPresentationMode_addWindowListeners=function n(){this.showControlsBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_showControls).bind(this),this.mouseDownBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_mouseDown).bind(this),this.mouseWheelBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_mouseWheel).bind(this),this.resetMouseScrollStateBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_resetMouseScrollState).bind(this),this.contextMenuBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_contextMenu).bind(this),this.touchSwipeBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_touchSwipe).bind(this),window.addEventListener("mousemove",this.showControlsBind),window.addEventListener("mousedown",this.mouseDownBind),window.addEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.addEventListener("keydown",this.resetMouseScrollStateBind),window.addEventListener("contextmenu",this.contextMenuBind),window.addEventListener("touchstart",this.touchSwipeBind),window.addEventListener("touchmove",this.touchSwipeBind),window.addEventListener("touchend",this.touchSwipeBind)},_PDFPresentationMode_removeWindowListeners=function n(){window.removeEventListener("mousemove",this.showControlsBind),window.removeEventListener("mousedown",this.mouseDownBind),window.removeEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.removeEventListener("keydown",this.resetMouseScrollStateBind),window.removeEventListener("contextmenu",this.contextMenuBind),window.removeEventListener("touchstart",this.touchSwipeBind),window.removeEventListener("touchmove",this.touchSwipeBind),window.removeEventListener("touchend",this.touchSwipeBind),delete this.showControlsBind,delete this.mouseDownBind,delete this.mouseWheelBind,delete this.resetMouseScrollStateBind,delete this.contextMenuBind,delete this.touchSwipeBind},_PDFPresentationMode_fullscreenChange=function n(){document.fullscreenElement?__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_enter).call(this):__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_exit).call(this)},_PDFPresentationMode_addFullscreenChangeListeners=function n(){this.fullscreenChangeBind=__classPrivateFieldGet(this,_PDFPresentationMode_instances,"m",_PDFPresentationMode_fullscreenChange).bind(this),window.addEventListener("fullscreenchange",this.fullscreenChangeBind)},_PDFPresentationMode_removeFullscreenChangeListeners=function n(){window.removeEventListener("fullscreenchange",this.fullscreenChangeBind),delete this.fullscreenChangeBind};const initialState={isDocumentLoaded:!1,pagesReady:!1,url:null,numPages:0,pageNumber:0,scale:0,scaleValue:"auto",pagesRotation:0,spreadMode:SpreadMode.UNKNOWN,scrollMode:ScrollMode.UNKNOWN,documentOutline:null,attachments:new Map,thumbnails:new Map,thumbnailViews:new Map,annotationEditorMode:pdfExports.AnnotationEditorType.NONE,pdfSlick:null},create=()=>createStore((n,e)=>Object.assign(Object.assign({},initialState),{_setThumbnailView:(a,i)=>{const o=new Map(e().thumbnails),f=new Map(e().thumbnailViews),{canvasWidth:v,canvasHeight:d,scale:P,rotation:r,loaded:t,pageLabel:l,src:p=null}=i;f.set(a,i),o.set(a,{pageNumber:a,width:v,height:d,scale:P,rotation:r,loaded:t,pageLabel:l,src:p}),n({thumbnailViews:f,thumbnails:o})},_setThumbnailsViews:a=>{const i=new Map(a.map(f=>[f.id,f])),o=new Map(a.map(f=>{const{canvasWidth:v,canvasHeight:d,scale:P,rotation:r,loaded:t,pageLabel:l,src:p=null}=f;return[f.id,{pageNumber:f.id,width:v,height:d,scale:P,rotation:r,loaded:t,pageLabel:l,src:p}]}));n({thumbnailViews:i,thumbnails:o})}}));var _PDFSlick_instances,_PDFSlick_renderingQueue,_PDFSlick_container,_PDFSlick_viewerContainer,_PDFSlick_thumbsContainer,_PDFSlick_annotationMode,_PDFSlick_annotationEditorMode,_PDFSlick_onError,_PDFSlick_initializePageLabels,_PDFSlick_parseDocumentInfo,_PDFSlick_parsePageSize,_PDFSlick_initInternalEventListeners,_PDFSlick_onDocumentReady,_PDFSlick_onRotationChanging,_PDFSlick_onSwitchSpreadMode,_PDFSlick_onSwitchScrollMode,_PDFSlick_onScaleChanging,_PDFSlick_onPageChanging,_PDFSlick_onPageRendered;pdfExports.GlobalWorkerOptions.workerSrc=new URL(""+new URL("pdf.worker-e3f005b2.js",import.meta.url).href,self.location).toString();const US_PAGE_NAMES={"8.5x11":"Letter","8.5x14":"Legal"},METRIC_PAGE_NAMES={"297x420":"A3","210x297":"A4"};function getPageName(n,e,a){const i=e?n.width:n.height,o=e?n.height:n.width;return a[`${i}x${o}`]}class PDFSlick{constructor({container:e,viewer:a,thumbs:i,store:o=create(),options:f,onError:v}){var d,P,r,t,l,p,h,s,m,_,u,w,C;_PDFSlick_instances.add(this),_PDFSlick_renderingQueue.set(this,void 0),_PDFSlick_container.set(this,void 0),_PDFSlick_viewerContainer.set(this,void 0),_PDFSlick_thumbsContainer.set(this,void 0),this.downloadManager=null,this.findController=null,this.pdfPresentationMode=null,this.document=null,_PDFSlick_annotationMode.set(this,void 0),_PDFSlick_annotationEditorMode.set(this,void 0),_PDFSlick_onError.set(this,void 0),__classPrivateFieldSet(this,_PDFSlick_container,e,"f"),__classPrivateFieldSet(this,_PDFSlick_viewerContainer,a,"f"),__classPrivateFieldSet(this,_PDFSlick_thumbsContainer,i,"f"),__classPrivateFieldSet(this,_PDFSlick_onError,v,"f"),this.l10n=(d=f?.l10n)!==null&&d!==void 0?d:pdf_viewerExports.NullL10n,this.downloadManager=new pdf_viewerExports.DownloadManager,this.textLayerMode=(P=f?.textLayerMode)!==null&&P!==void 0?P:TextLayerMode.ENABLE,__classPrivateFieldSet(this,_PDFSlick_annotationMode,(r=f?.annotationMode)!==null&&r!==void 0?r:pdfExports.AnnotationMode.ENABLE_FORMS,"f"),__classPrivateFieldSet(this,_PDFSlick_annotationEditorMode,(t=f?.annotationEditorMode)!==null&&t!==void 0?t:pdfExports.AnnotationEditorType.NONE,"f"),this.removePageBorders=(l=f?.removePageBorders)!==null&&l!==void 0?l:!1,this.singlePageViewer=(p=f?.singlePageViewer)!==null&&p!==void 0?p:!1,this.enablePrintAutoRotate=(h=f?.enablePrintAutoRotate)!==null&&h!==void 0?h:!1,this.useOnlyCssZoom=(s=f?.useOnlyCssZoom)!==null&&s!==void 0?s:!1,this.pageColors=(m=f?.pageColors)!==null&&m!==void 0?m:null,this.maxCanvasPixels=(_=f?.maxCanvasPixels)!==null&&_!==void 0?_:16777216,this.printResolution=(u=f?.printResolution)!==null&&u!==void 0?u:96,this.thumbnailWidth=(w=f?.thumbnailWidth)!==null&&w!==void 0?w:125,this.pageColors&&!(CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground))&&((this.pageColors.background||this.pageColors.foreground)&&console.warn("PDFViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.l10n=pdf_viewerExports.NullL10n,this.store=o;const x=new PDFRenderingQueue;x.onIdle=this._cleanup.bind(this),x.isThumbnailViewEnabled=!0,__classPrivateFieldSet(this,_PDFSlick_renderingQueue,x,"f");const c=new pdf_viewerExports.EventBus,b=new pdf_viewerExports.PDFLinkService({eventBus:c,externalLinkTarget:2,externalLinkRel:"noopener noreferrer nofollow",ignoreDestinationZoom:!1}),D=Object.assign(Object.assign({container:e},a&&{viewer:a}),{eventBus:c,linkService:b,renderingQueue:x,defaultRenderingQueue:!0,textLayerMode:this.textLayerMode,l10n:this.l10n,annotationMode:__classPrivateFieldGet(this,_PDFSlick_annotationMode,"f"),annotationEditorMode:__classPrivateFieldGet(this,_PDFSlick_annotationEditorMode,"f"),removePageBorders:this.removePageBorders,imageResourcesPath:"/images/",useOnlyCssZoom:this.useOnlyCssZoom}),B=this.singlePageViewer?new pdf_viewerExports.PDFSinglePageViewer(D):new pdf_viewerExports.PDFViewer(D);x.setViewer(B),i&&(this.thumbnailViewer=new PDFThumbnailViewer({container:i,eventBus:c,linkService:b,renderingQueue:x,l10n:this.l10n,pageColors:this.pageColors,store:o,thumbnailWidth:this.thumbnailWidth}),x.setThumbnailViewer(this.thumbnailViewer)),document.fullscreenEnabled&&(this.pdfPresentationMode=new PDFPresentationMode({container:e,pdfViewer:B,eventBus:c})),this.eventBus=c,this.linkService=b,this.viewer=B,this.linkService.setViewer(B);const L=(C=f?.scaleValue)!==null&&C!==void 0?C:"auto";this.store.setState({scaleValue:L})}loadDocument(e,a){var i,o,f,v,d;return __awaiter(this,void 0,void 0,function*(){if(this.url&&typeof this.url=="string")try{URL.revokeObjectURL(this.url)}catch{}try{(i=this.document)===null||i===void 0||i.destroy(),(o=this.viewer)===null||o===void 0||o.cleanup(),e instanceof URL?this.url=e.toString():this.url=e;const P=(f=a?.filename)!==null&&f!==void 0?f:pdfExports.getPdfFilenameFromUrl((v=this.url)===null||v===void 0?void 0:v.toString());this.filename=P;const r=yield pdfExports.getDocument(e).promise;this.document=r,this.viewer.setDocument(this.document),this.linkService.setDocument(this.document),this.thumbnailViewer&&((d=this.thumbnailViewer)===null||d===void 0||d.setDocument(r)),__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_initInternalEventListeners).call(this),yield __classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_initializePageLabels).call(this),this.store.setState({filename:P,numPages:r.numPages,pageNumber:1,isDocumentLoaded:!0,url:e.toString()});const t=yield r.getAttachments(),l=new Map(Object.keys(t??{}).sort((p,h)=>p.toLowerCase().localeCompare(h.toLowerCase())).map(p=>[p,t[p]]));this.store.setState({attachments:l}),yield __classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_parseDocumentInfo).call(this),this.forceRendering()}catch(P){__classPrivateFieldGet(this,_PDFSlick_onError,"f")&&__classPrivateFieldGet(this,_PDFSlick_onError,"f").call(this,P)}})}forceRendering(e=!0){__classPrivateFieldGet(this,_PDFSlick_renderingQueue,"f").printing=!!this.printService,__classPrivateFieldGet(this,_PDFSlick_renderingQueue,"f").isThumbnailViewEnabled=e,__classPrivateFieldGet(this,_PDFSlick_renderingQueue,"f").renderHighestPriority()}gotoPage(e){this.linkService.goToPage(e)}openOrDownloadData(e,a,i){var o;(o=this.downloadManager)===null||o===void 0||o.openOrDownloadData(e,a,i)}download(){var e,a;return __awaiter(this,void 0,void 0,function*(){const i=this.url,{filename:o}=this;try{const f=yield this.document.getData(),v=new Blob([f],{type:"application/pdf"});yield(e=this.downloadManager)===null||e===void 0?void 0:e.download(v,i,o,{})}catch{yield(a=this.downloadManager)===null||a===void 0?void 0:a.downloadUrl(i,o,{})}})}save(){var e;return __awaiter(this,void 0,void 0,function*(){const a=this.url,{filename:i}=this;try{const o=yield this.document.saveDocument(),f=new Blob([o],{type:"application/pdf"});yield(e=this.downloadManager)===null||e===void 0?void 0:e.download(f,a,i,{})}catch(o){console.error(`Error when saving the document: ${o.message}`),yield this.download()}finally{}})}downloadOrSave(){var e;const{annotationStorage:a}=(e=this.document)!==null&&e!==void 0?e:{};a&&a.size>0?this.save():this.download()}get supportsPrinting(){return PDFPrintServiceFactory.instance.supportsPrinting}beforePrint(){if(this.printService||!this.supportsPrinting)return;if(!this.viewer.pageViewsReady){this.l10n.get("printing_not_ready").then(v=>{window.alert(v)});return}const e=this.viewer.getPagesOverview(),a=document.getElementById("printContainer"),i=this.printResolution,o=this.viewer.optionalContentConfigPromise,f=PDFPrintServiceFactory.instance.createPrintService(this.document,e,a,i,o,null,this.l10n);this.printService=f,this.forceRendering(),f.layout()}afterPrint(){var e;this.printService&&(this.printService.destroy(),this.printService=null,(e=this.document)===null||e===void 0||e.annotationStorage.resetModified()),this.forceRendering()}requestPresentationMode(){var e;(e=this.pdfPresentationMode)===null||e===void 0||e.request()}triggerPrinting(){this.supportsPrinting&&window.print()}_cleanup(){var e;if(this.document)try{this.viewer.cleanup(),(e=this.thumbnailViewer)===null||e===void 0||e.cleanup(),this.document.cleanup()}catch(a){console.error("Unable to perform cleanup",a)}}setAnnotationEditorMode(e){this.viewer.annotationEditorMode={mode:e},this.store.setState({annotationEditorMode:e})}setAnnotationEditorParams(e){const a=Array.isArray(e)?e:[e];for(const i of a)this.viewer.annotationEditorParams=i}setSpreadMode(e){isValidSpreadMode(e)&&(this.viewer.spreadMode=e,this.dispatch("switchspreadmode",{mode:e}))}setScrollMode(e){isValidScrollMode(e)&&(this.viewer.scrollMode=e,this.dispatch("switchscrollmode",{mode:e}))}setRotation(e){isValidRotation(e)&&(this.viewer.pagesRotation=e)}getPagesOverview(){var e,a;try{return(a=(e=this.viewer)===null||e===void 0?void 0:e.getPagesOverview())!==null&&a!==void 0?a:[]}catch{return[]}}increaseScale(){this.viewer.increaseScale()}decreaseScale(){this.viewer.decreaseScale()}set currentScaleValue(e){this.viewer.currentScaleValue=e}set currentScale(e){this.viewer.currentScale=e}getPageView(e){return this.viewer.getPageView(e)}on(e,a,i){this.eventBus.on(e,a,i)}off(e,a,i){this.eventBus.off(e,a,i)}dispatch(e,a){this.eventBus.dispatch(e,a)}}_PDFSlick_renderingQueue=new WeakMap,_PDFSlick_container=new WeakMap,_PDFSlick_viewerContainer=new WeakMap,_PDFSlick_thumbsContainer=new WeakMap,_PDFSlick_annotationMode=new WeakMap,_PDFSlick_annotationEditorMode=new WeakMap,_PDFSlick_onError=new WeakMap,_PDFSlick_instances=new WeakSet,_PDFSlick_initializePageLabels=function n(){var e;return __awaiter(this,void 0,void 0,function*(){const i=(e=yield this.document.getPageLabels())!==null&&e!==void 0?e:[],o=i.length;let f=0,v=0;for(let r=0;r<o;r++){const t=i[r];if(t===(r+1).toString())f++;else if(t==="")v++;else break}if(f>=o||v>=o)return;const{viewer:d,thumbnailViewer:P}=this;d.setPageLabels(i),P?.setPageLabels(i)})},_PDFSlick_parseDocumentInfo=function n(){return __awaiter(this,void 0,void 0,function*(){const{info:e,contentLength:a}=yield this.document.getMetadata(),i=yield this.document.getPage(this.store.getState().pageNumber).then(o=>__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_parsePageSize).call(this,getPageSizeInches(o),0));this.store.setState({filesize:a,title:e.Title,author:e.Author,subject:e.Subject,keywords:e.Keywords,creator:e.Creator,producer:e.Producer,version:e.PDFFormatVersion,creationDate:pdfExports.PDFDateString.toDateObject(e.CreationDate),modificationDate:pdfExports.PDFDateString.toDateObject(e.ModDate),isLinearized:e.IsLinearized,pageSize:i})})},_PDFSlick_parsePageSize=function n(e,a){return __awaiter(this,void 0,void 0,function*(){if(!e)return;a%180!==0&&(e={width:e.height,height:e.width});const i=isPortraitOrientation(e);let o={width:Math.round(e.width*100)/100,height:Math.round(e.height*100)/100},f={width:Math.round(e.width*25.4*10)/10,height:Math.round(e.height*25.4*10)/10},v=getPageName(o,i,US_PAGE_NAMES)||getPageName(f,i,METRIC_PAGE_NAMES);if(!v&&!(Number.isInteger(f.width)&&Number.isInteger(f.height))){const p={width:e.width*25.4,height:e.height*25.4},h={width:Math.round(f.width),height:Math.round(f.height)};Math.abs(p.width-h.width)<.1&&Math.abs(p.height-h.height)<.1&&(v=getPageName(h,i,METRIC_PAGE_NAMES),v&&(o={width:Math.round(h.width/25.4*100)/100,height:Math.round(h.height/25.4*100)/100},f=h))}const[{width:d,height:P},r,t,l]=yield Promise.all([o,this.l10n.get("document_properties_page_size_unit_inches"),v&&this.l10n.get(`document_properties_page_size_name_${v.toLowerCase()}`),this.l10n.get(`document_properties_page_size_orientation_${i?"portrait":"landscape"}`)]);return{width:d.toLocaleString(),height:P.toLocaleString(),unit:r,name:t,orientation:l}})},_PDFSlick_initInternalEventListeners=function n(){this.eventBus._on("pagesinit",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onDocumentReady).bind(this)),this.eventBus._on("scalechanging",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onScaleChanging).bind(this)),this.eventBus._on("pagechanging",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onPageChanging).bind(this)),this.eventBus._on("pagerendered",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onPageRendered).bind(this)),this.eventBus._on("rotationchanging",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onRotationChanging).bind(this)),this.eventBus._on("switchspreadmode",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onSwitchSpreadMode).bind(this)),this.eventBus._on("switchscrollmode",__classPrivateFieldGet(this,_PDFSlick_instances,"m",_PDFSlick_onSwitchScrollMode).bind(this)),this.eventBus._on("beforeprint",this.beforePrint.bind(this)),this.eventBus._on("afterprint",this.afterPrint.bind(this)),window.onbeforeprint=e=>{this.eventBus.dispatch("beforeprint",{source:window})},window.onafterprint=e=>{this.eventBus.dispatch("afterprint",{source:window})}},_PDFSlick_onDocumentReady=function n({source:e}){var a;return __awaiter(this,void 0,void 0,function*(){const i=yield(a=this.document)===null||a===void 0?void 0:a.getOutline(),o=this.store.getState().scaleValue;e.currentScale=1,e.currentScaleValue="auto",this.store.setState({documentOutline:i,pageNumber:1,scaleValue:o,pagesReady:!0})})},_PDFSlick_onRotationChanging=function n({pagesRotation:e,pageNumber:a}){this.store.setState({pagesRotation:e}),this.thumbnailViewer&&(this.thumbnailViewer.pagesRotation=e),this.forceRendering(),this.viewer.currentPageNumber=a},_PDFSlick_onSwitchSpreadMode=function n({mode:e}){this.store.setState({spreadMode:e})},_PDFSlick_onSwitchScrollMode=function n({mode:e}){this.store.setState({scrollMode:e})},_PDFSlick_onScaleChanging=function n({scale:e,presetValue:a}){this.store.setState({scale:e,scaleValue:a}),this.viewer.update()},_PDFSlick_onPageChanging=function n({pageNumber:e}){var a;(a=this.thumbnailViewer)===null||a===void 0||a.scrollThumbnailIntoView(e),this.store.setState({pageNumber:e})},_PDFSlick_onPageRendered=function n({pageNumber:e,error:a}){var i;if(__classPrivateFieldGet(this,_PDFSlick_thumbsContainer,"f")){const o=this.viewer.getPageView(e-1),f=(i=this.thumbnailViewer)===null||i===void 0?void 0:i.getThumbnail(e-1);o&&f&&f.setImage(o)}};function isObject(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function accessWith(n,...e){return typeof n=="function"?n(...e):n}function createStaticStore(n){const e={...n},a={...n},i={},o=v=>{let d=i[v];if(!d){if(!getListener())return e[v];i[v]=d=createSignal(e[v],{internal:!0}),delete e[v]}return d[0]()};for(const v in n)Object.defineProperty(a,v,{get:()=>o(v),enumerable:!0});const f=(v,d)=>{const P=i[v];if(P)return P[1](d);v in e&&(e[v]=accessWith(d,[e[v]]))};return[a,(v,d)=>{if(isObject(v)){const P=untrack(()=>Object.entries(accessWith(v,a)));batch(()=>{for(const[r,t]of P)f(r,()=>t)})}else f(v,d);return a}]}var ELEMENT_SIZE_FALLBACK={width:null,height:null};function getElementSize(n){if(!n)return{...ELEMENT_SIZE_FALLBACK};const{width:e,height:a}=n.getBoundingClientRect();return{width:e,height:a}}function createElementSize(n){const e=typeof n=="function",[a,i]=createStaticStore(e?ELEMENT_SIZE_FALLBACK:getElementSize(n)),o=new ResizeObserver(([f])=>i(getElementSize(f.target)));return onCleanup(()=>o.disconnect()),e?createEffect(()=>{const f=n();f&&(i(getElementSize(f)),o.observe(f),onCleanup(()=>o.unobserve(f)))}):(o.observe(n),onCleanup(()=>o.unobserve(n))),a}var _tmpl$$1$1=template('<div id=viewerContainer><div id=viewer class="pdfSlickViewer pdfViewer">');function PDFSlickViewer(n){const[e,a]=createSignal(),i=createElementSize(e);return createEffect(()=>{i.width&&i.height&&(n.store.pdfSlick&&(n.store.scaleValue==="auto"||n.store.scaleValue==="page-fit"||n.store.scaleValue==="page-width")&&(n.store.pdfSlick.viewer.currentScaleValue=n.store.scaleValue),n.store.pdfSlick?.viewer.update())}),(()=>{var o=_tmpl$$1$1();return use(f=>{n.viewerRef(f),a(f)},o),o.style.setProperty("position","absolute"),o.style.setProperty("inset","0"),createRenderEffect(()=>className(o,`pdfSlickContainer ${n.class??""}`)),o})()}var _tmpl$$5=template("<div>");function PDFSlickThumbnails(n){const[e,a]=createSignal(),i=createElementSize(e);return createEffect(()=>{i.width&&i.height&&n.store.pdfSlick?.forceRendering()}),(()=>{var o=_tmpl$$5();return use(f=>{n.thumbsRef(f),a(f)},o),o.style.setProperty("position","absolute"),o.style.setProperty("overflow","auto"),o.style.setProperty("inset","0"),insert(o,createComponent(For,{get each(){return Array.from(n.store.thumbnailViews)},children:([f,v])=>createComponent(Portal,{get mount(){return v.div},get children(){return n.children({pageNumber:f,width:v.canvasWidth,height:v.canvasHeight,scale:v.scale,src:v?.src??null,rotation:v.rotation,pageLabel:v.pageLabel,loaded:v.loaded})}})})),createRenderEffect(f=>{var v=n.class??"",d=n.classList??{};return v!==f.e&&className(o,f.e=v),f.t=classList(o,d,f.t),f},{e:void 0,t:void 0}),o})()}function useStore(n,e=n.getState,a){const i=e(n.getState()),[o,f]=createStore$1(i),v=(P,r)=>{e(r);const t=e(P);f(reconcile(t))},d=n.subscribe(v);return onCleanup(()=>d()),o}const usePDFSlick=(n,e)=>{const[a,i]=createSignal(!1),[o,f]=createSignal(!1),[v,d]=createSignal(null),[P,r]=createSignal(null),[t,l]=createSignal(null),[p,h]=createSignal(null),s=create(),m=useStore(s),_=w=>{d(w),f(!0)},u=w=>{r(w)};return createEffect(()=>{if(n&&o()){const w=new PDFSlick({container:v(),thumbs:P(),store:s,options:e,onError:C=>l(C)});h(w),s.setState({pdfSlick:w}),w.loadDocument(n,e).then(()=>{i(!0)})}}),{isDocumentLoaded:a,viewerRef:_,thumbsRef:u,pdfSlick:p,pdfSlickStore:m,PDFSlickViewer,PDFSlickThumbnails,error:t}},pdf_viewer="";var _tmpl$$4=template('<div class="absolute mt-[7rem] inset-0 flex flex-col pdfSlick"><div class="flex-1 relative h-full">');const PDFViewerComponent=({pdfFilePath:n})=>{const{viewerRef:e,pdfSlickStore:a,PDFSlickViewer:i}=usePDFSlick(n);return(()=>{var o=_tmpl$$4(),f=o.firstChild;return insert(f,createComponent(i,{store:a,viewerRef:e})),o})()};var _tmpl$$3=template('<div><a class="float-right mr-10 hover:text-yellow-400 hover:scale-125"href=/src/assets/resume.pdf download=Geza_Szoradi_resume>Download</a><div class=text-white><div class=" mt-[65rem] flex flex-col items-center justify-center text-center">');const CvPage=()=>(()=>{var n=_tmpl$$3(),e=n.firstChild,a=e.nextSibling,i=a.firstChild;return insert(i,createComponent(PDFViewerComponent,{pdfFilePath:"../../src/assets/resume.pdf"})),n})(),navigationElements=[{title:"Introduction",path:"/",component:Introduction},{title:"Experience",path:"/about",component:Experience},{title:"Projects",path:"/projects",component:Projects},{title:"Cv",path:"/cv",component:CvPage},,],NavigationContext=createContext();function NavigationProvider(n){const[e,a]=createSignal(null);return createComponent(NavigationContext.Provider,{value:[e,a],get children(){return n.children}})}function useNavigation(){return useContext(NavigationContext)}var _tmpl$$2=template('<div class=w-full><div class="flex items-center space-x-10 px-10 mx-auto pt-4 pb-8 ">'),_tmpl$2=template("<div>");function Navigation(){const[n,e]=useNavigation(),a=useLocation();return createEffect(()=>{const i=navigationElements.findIndex(o=>(console.log(a.pathname.replace("/portfolio-solidjs","")),console.log(o.path),o.path===a.pathname.replace("/portfolio-solidjs","")));if(console.log(a.pathname),a.pathname.replace("/portfolio-solidjs","")===""){e(0);return}e(i)}),(()=>{var i=_tmpl$$2(),o=i.firstChild;return insert(o,()=>navigationElements.map((f,v)=>(()=>{var d=_tmpl$2();return insert(d,createComponent(A,{get href(){return f.path},onClick:()=>e(v),get children(){return f.title}})),createRenderEffect(()=>className(d,`h-6text-white transform  transition duration-300 ${v===n()?"text-yellow-400 scale-125":"hover:text-yellow-400 hover:scale-125"}`)),d})())),i})()}var _tmpl$$1=template('<div class="mb-0 mr-0 flex justify-end items-center space-x-3 px-4 mx-auto pt-4 pb-1"><a href=https://www.linkedin.com/in/g%C3%A9za-sz%C3%B3r%C3%A1di-58b478174/><svg class="h-6 w-6 text-white transform transition duration-300 hover:text-yellow-400 hover:scale-125"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x=2 y=9 width=4 height=12></rect><circle cx=4 cy=4 r=2></circle></svg></a><a href=https://github.com/szoradigeza><svg class="h-6 w-6 text-white transform transition duration-300 hover:text-yellow-400 hover:scale-125"width=24 height=24 viewBox="0 0 24 24"stroke-width=2 stroke=currentColor fill=none stroke-linecap=round stroke-linejoin=round><path stroke=none d="M0 0h24v24H0z"></path> <path d="M9 19c-4.286 1.35-4.286-2.55-6-3m12 5v-3.5c0-1 .099-1.405-.5-2 2.791-.3 5.5-1.366 5.5-6.04a4.567 4.567 0 0 0 -1.333 -3.21 4.192 4.192 0 00-.08-3.227s-1.05-.3-3.476 1.267a12.334 12.334 0 0 0 -6.222 0C6.462 2.723 5.413 3.023 5.413 3.023a4.192 4.192 0 0 0 -.08 3.227A4.566 4.566 0 004 9.486c0 4.64 2.709 5.68 5.5 6.014-.591.589-.56 1.183-.5 2V21"></path></svg></a><a href=mailto:szoradigeza@gmail.com><svg class="h-8 w-6 text-white transform transition duration-300 hover:text-yellow-400 hover:scale-125"viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path> <polyline points="22,6 12,13 2,6">');const Footer=()=>_tmpl$$1();var _tmpl$=template('<div class=main><div class=back-img><div class="flex flex-col justify-center items-center pb-20"><div class="max-w-[800px] sm:w-full sm: h-auto lg:w-2/3 text-white mt-10 bg-black w-full rounded-2xl shadow-lg bg-opacity-80 backdrop-filter backdrop-blur-lg "><div class="flex flex-col justify-between ">');const App=()=>(()=>{var n=_tmpl$(),e=n.firstChild,a=e.firstChild,i=a.firstChild,o=i.firstChild;return insert(i,createComponent(Navigation,{}),o),insert(o,createComponent(Routes,{get children(){return navigationElements.map(f=>createComponent(Route,{get path(){return f.path},get component(){return f.component}}))}})),insert(i,createComponent(Footer,{}),null),n})(),tailwind="",root=document.getElementById("root");render(()=>createComponent(Router,{base:"/portfolio-solidjs",get children(){return createComponent(NavigationProvider,{get children(){return createComponent(App,{})}})}}),root);
